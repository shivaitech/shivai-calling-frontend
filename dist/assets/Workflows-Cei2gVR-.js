import{i as e,e as t,r as s,j as a}from"./index-C5aCmPir.js";import{G as n}from"./GlassCard-tew0-LE0.js";import{i as l}from"./utils-Cr29uOvE.js";import{c as o}from"./createLucideIcon-BXwsGmML.js";import{B as r}from"./bot-BHAywAGD.js";import{P as i}from"./plus-C8IBxeM6.js";import{Z as c}from"./zap-BXo3GZ41.js";import{X as d}from"./x-BT7THf-P.js";import{L as m}from"./link-9B0SmiLU.js";import{T as x}from"./trash-2-QYia7R19.js";import{I as u}from"./info-Bd3SKYUr.js";import{S as h}from"./square-pen-NLF-9KAj.js";import{P as p}from"./pause-6_VaIcHq.js";import{P as g}from"./play-Cx2N7UtY.js";import{C as b}from"./copy-9_HOEdNz.js";import{E as f}from"./eye-CWePNK0J.js";import{C as y}from"./calendar-pvGlA8gq.js";import{T as j}from"./target-CcBaGSgz.js";import{M as w}from"./message-square-CdZxp2lp.js";import{P as v}from"./phone-BleHWiKY.js";import{M as k}from"./mail-BilbM7Yg.js";import{W as N}from"./webhook-BbzeiSAF.js";import{D as C}from"./database-CUgGXVNG.js";import{C as S}from"./clock-BA_2xdVl.js";import{G as A}from"./globe-DWvsbXMs.js";import{S as D}from"./settings-BZj1FePY.js";const M=o("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),W=o("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]),$=()=>{var o;const{agents:$}=e(),{user:T}=t(),[P,U]=s.useState("canvas"),[E,z]=s.useState(""),[R,L]=s.useState(""),[q,Y]=s.useState([]),[B,I]=s.useState([]),[X,F]=s.useState(null),[O,G]=s.useState(!1),[H,K]=s.useState({name:"",description:"",type:"custom"}),[Z,Q]=s.useState(null),[V,J]=s.useState(null),[_,ee]=s.useState(null),[te,se]=s.useState(1),[ae,ne]=s.useState({x:0,y:0}),[le,oe]=s.useState(!1),[re,ie]=s.useState({x:0,y:0}),[ce,de]=s.useState(!1),[me,xe]=s.useState(null),ue=s.useRef(null),he=l(null==T?void 0:T.email),pe=()=>{document.body.style.userSelect="",document.body.style.webkitUserSelect="",F(null),de(!1),xe(null)};s.useEffect(()=>()=>{pe()},[]),s.useEffect(()=>{const e=e=>{if(e.ctrlKey||e.metaKey)switch(e.key){case"=":case"+":e.preventDefault(),De();break;case"-":e.preventDefault(),Me();break;case"0":e.preventDefault(),We()}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]);const ge=[{id:"booking-confirmed",name:"Booking Confirmed",description:"When a booking is successfully made",icon:y,color:"green",type:"predefined"},{id:"lead-qualified",name:"Lead Qualified",description:"When lead score reaches threshold",icon:j,color:"blue",type:"predefined"},{id:"keyword-detected",name:"Keyword Detected",description:"When specific phrase is mentioned",icon:w,color:"purple",type:"predefined"},{id:"call-ended",name:"Call Ended",description:"When conversation completes",icon:v,color:"orange",type:"predefined"},{id:"high-intent",name:"High Purchase Intent",description:"When customer shows buying signals",icon:j,color:"emerald",type:"predefined"},{id:"negative-sentiment",name:"Negative Sentiment",description:"When customer expresses dissatisfaction",icon:M,color:"red",type:"predefined"}],[be,fe]=s.useState([{id:"payment-failed",name:"Payment Failed",description:"When payment processing fails",icon:M,color:"red",type:"custom"}]),ye=[...ge,...be],je=[{id:"sms",name:"SMS",description:"Send text message",icon:w,color:"blue"},{id:"email",name:"Email",description:"Send email notification",icon:k,color:"red"},{id:"webhook",name:"Webhook",description:"POST data to external URL",icon:N,color:"purple"},{id:"calendar",name:"Calendar Event",description:"Create Google/Microsoft event",icon:y,color:"orange"},{id:"crm-update",name:"Update CRM",description:"Update customer record in CRM",icon:C,color:"indigo"},{id:"whatsapp",name:"WhatsApp Message",description:"Send template message via WhatsApp",icon:w,color:"green",compliance:"Templates require approval"}],we=[{id:"time-window",name:"Time Window",icon:S,description:"Execute only during specific hours",color:"blue"},{id:"region",name:"Region Check",icon:A,description:"Based on caller location",color:"green"},{id:"language",name:"Language Match",icon:w,description:"Match conversation language",color:"purple"},{id:"intent-confidence",name:"Intent Confidence",icon:j,description:"Minimum confidence score",color:"orange"},{id:"call-duration",name:"Call Duration",icon:S,description:"Based on call length",color:"indigo"},{id:"previous-interaction",name:"Previous Interaction",icon:r,description:"Based on call history",color:"emerald"}],[ve,ke]=s.useState(he?[{id:"1",name:"Booking Confirmation Flow",agentId:"1",agentName:"Customer Support Bot",nodes:[{id:"trigger-1",type:"trigger",data:ge[0],position:{x:100,y:150}},{id:"action-1",type:"action",data:je[0],position:{x:400,y:150}}],connections:[{id:"conn-1",from:"trigger-1",to:"action-1"}],status:"Active",runs:47,lastRun:"2 min ago",createdAt:new Date("2024-01-15")},{id:"2",name:"Lead Follow-up",agentId:"2",agentName:"Sales Assistant",nodes:[],connections:[],status:"Draft",runs:0,lastRun:"Never",createdAt:new Date("2024-01-20")}]:[]),Ne=[{id:"canvas",label:"Canvas Builder",icon:c},{id:"workflows",label:"My Workflows",icon:D},{id:"runs",label:"Execution Log",icon:g}],Ce=(e,t,s)=>{e.stopPropagation(),F({...t,nodeType:s});const a=new Image;a.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",e.dataTransfer.setDragImage(a,0,0),e.dataTransfer.effectAllowed="copy",document.body.style.userSelect="none",document.body.style.webkitUserSelect="none"},Se=e=>{e.preventDefault(),e.stopPropagation(),pe()},Ae=(e,t)=>{if(!ue.current)return;const s=100-ae.x/te,a=100-ae.y/te;let n=s+q.length%4*250,l=a+150*Math.floor(q.length/4);const o={id:`${t}-${Date.now()}`,type:t,data:e,position:{x:n,y:l}};Y(e=>[...e,o]),ee(`✓ ${e.name} added to workflow!`),setTimeout(()=>ee(null),1500)},De=()=>{se(e=>Math.min(1.2*e,3))},Me=()=>{se(e=>Math.max(e/1.2,.3))},We=()=>{se(1),ne({x:0,y:0})},$e=()=>{oe(!1)},[Te,Pe]=s.useState(null),[Ue,Ee]=s.useState(1),[ze,Re]=s.useState({x:0,y:0}),Le=e=>{if(e.length<2)return 0;const t=e[0],s=e[1];return Math.sqrt(Math.pow(s.clientX-t.clientX,2)+Math.pow(s.clientY-t.clientY,2))},qe=(e,t)=>{Y(s=>s.map(s=>s.id===e?{...s,position:t}:s))};return a.jsxs("div",{className:"space-y-4 sm:space-y-6 w-full ",children:[a.jsx("div",{className:"",children:a.jsx(n,{children:a.jsx("div",{className:"p-4 sm:p-6",children:a.jsx("div",{className:"flex space-x-1 common-bg-icons rounded-xl p-1 overflow-x-auto",children:Ne.map(e=>a.jsxs("button",{onClick:()=>U(e.id),className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-4 py-2 rounded-lg transition-all duration-200 whitespace-nowrap "+(P===e.id?"common-button-bg2 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200 transition ease-in-out"),children:[a.jsx(e.icon,{className:"w-3 sm:w-4 h-3 sm:h-4"}),a.jsx("span",{className:"text-xs sm:text-sm",children:e.label})]},e.id))})})})}),"canvas"===P&&a.jsxs("div",{className:" space-y-4 sm:space-y-6",children:[a.jsx(n,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-slate-800 dark:text-white mb-4 sm:mb-6",children:"Workflow Setup"}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mb-4 sm:mb-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:["Workflow Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:R,onChange:e=>L(e.target.value),placeholder:"e.g., Lead Qualification Flow",disabled:!he,className:"w-full px-4 py-3 rounded-xl text-sm sm:text-base touch-manipulation "+(he?"common-bg-icons":"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 cursor-not-allowed"),required:!0}),!R.trim()&&a.jsx("p",{className:"text-xs text-red-500 mt-2",children:"Workflow name is required"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:["Assign to Agent ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:E,onChange:e=>z(e.target.value),disabled:!he,className:"w-full px-4 py-3 rounded-xl text-sm sm:text-base touch-manipulation "+(he?"common-bg-icons":"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 cursor-not-allowed"),style:{zIndex:50},required:!0,children:[a.jsx("option",{value:"",children:"Select an agent..."}),$.map(e=>a.jsxs("option",{value:e.id,children:[e.name," (",e.status,")"]},e.id))]}),!E&&a.jsx("p",{className:"text-xs text-red-500 mt-2",children:"Agent selection is required"})]})]}),E&&a.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-xl",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:a.jsx(r,{className:"w-4 h-4 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-blue-800 dark:text-blue-300",children:null==(o=$.find(e=>e.id===E))?void 0:o.name}),a.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"This workflow will be assigned to this agent"})]})]})})]})}),a.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-12 gap-4 sm:gap-6",children:[a.jsx("div",{className:"lg:col-span-3",children:a.jsx(n,{className:"h-[400px] lg:h-[600px]",children:a.jsxs("div",{className:"p-3 sm:p-4 h-full flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[a.jsx("h3",{className:"text-base sm:text-lg font-semibold text-slate-800 dark:text-white",children:"Triggers"}),a.jsx("button",{onClick:()=>G(!0),disabled:!he,className:"p-2 rounded-lg transition-colors touch-manipulation "+(he?"common-bg-icons hover:shadow-sm":"bg-gray-400 dark:bg-gray-600 text-gray-200 dark:text-gray-300 cursor-not-allowed opacity-50"),title:"Add Custom Trigger",children:a.jsx(i,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"})})]}),a.jsx("div",{className:"flex-1 space-y-2 overflow-y-auto",children:ye.map(e=>a.jsx("div",{draggable:he,onDragStart:t=>he&&Ce(t,e,"trigger"),onDragEnd:Se,className:"common-bg-icons p-2.5 sm:p-3 rounded-lg transition-all duration-200 hover:shadow-md touch-manipulation select-none "+(he?"cursor-move":"cursor-default opacity-50"),style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},children:a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[a.jsx("div",{className:"common-bg-icons p-1.5 rounded-md flex-shrink-0",children:a.jsx(e.icon,{className:"w-3 h-3 sm:w-4 sm:h-4 text-slate-600 dark:text-slate-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-slate-800 dark:text-white text-xs sm:text-sm truncate",children:e.name}),a.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:e.description})]}),a.jsx("button",{onClick:t=>{t.stopPropagation(),Ae(e,"trigger")},disabled:!he,className:"sm:hidden p-1 rounded-md transition-colors touch-manipulation flex-shrink-0 active:scale-95 min-w-[28px] min-h-[28px] "+(he?"common-button-bg":"bg-gray-400 dark:bg-gray-600 text-gray-200 dark:text-gray-300 cursor-not-allowed opacity-50"),title:"Add to Canvas",children:a.jsx(i,{className:"w-3 h-3"})}),a.jsx("div",{className:"hidden sm:block flex-shrink-0",children:a.jsx(W,{className:"w-3 h-3 sm:w-4 sm:h-4 text-slate-400 dark:text-slate-500"})})]})},e.id))})]})})}),a.jsx("div",{className:"lg:col-span-6",children:a.jsx(n,{className:"h-[500px] lg:h-[600px] overflow-hidden relative",children:a.jsxs("div",{className:"p-3 sm:p-4 h-full flex flex-col",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-3 sm:mb-4 gap-3 sm:gap-2",children:[a.jsx("h3",{className:"text-base sm:text-lg font-semibold text-slate-800 dark:text-white",children:"Workflow Canvas"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{0!==q.length?alert("Workflow test initiated! Check the execution log for results."):alert("Please add triggers and actions to test the workflow")},disabled:0===q.length||!he,className:"flex-1 sm:flex-none touch-manipulation disabled:opacity-50 disabled:cursor-not-allowed "+(he?"common-button-bg2":"bg-gray-400 dark:bg-gray-600 text-gray-200 dark:text-gray-300 px-3 py-2 text-xs sm:text-sm rounded-lg"),children:"Test"}),a.jsx("button",{onClick:()=>{if(!R.trim())return void alert("Workflow name is required");if(!E)return void alert("Please select an agent for this workflow");if(0===q.length)return void alert("Please add at least one trigger or action to the workflow");const e=$.find(e=>e.id===E),t={id:(null==Z?void 0:Z.id)||Date.now().toString(),name:R,agentId:E,agentName:(null==e?void 0:e.name)||"Unknown Agent",nodes:[...q],connections:[...B],status:"Draft",runs:(null==Z?void 0:Z.runs)||0,lastRun:(null==Z?void 0:Z.lastRun)||"Never",createdAt:(null==Z?void 0:Z.createdAt)||new Date};Z?(ke(e=>e.map(e=>e.id===Z.id?t:e)),alert("Workflow updated successfully!")):(ke(e=>[...e,t]),alert("Workflow created successfully!")),L(""),z(""),Y([]),I([]),Q(null)},disabled:!R.trim()||!E||0===q.length||!he,className:"flex-1 sm:flex-none touch-manipulation disabled:opacity-50 disabled:cursor-not-allowed "+(he?"common-button-bg":"bg-gray-400 dark:bg-gray-600 text-gray-200 dark:text-gray-300 px-3 py-2 text-xs sm:text-sm rounded-lg"),children:Z?"Update":"Save"})]})]}),_&&a.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg text-sm font-medium animate-in slide-in-from-top-2",children:_}),a.jsxs("div",{className:"absolute bottom-3 right-3 z-10 flex flex-col gap-1 bg-white/95 dark:bg-slate-800/95 backdrop-blur-sm rounded-xl border border-slate-200/50 dark:border-slate-700/50 shadow-xl p-2 sm:p-2",children:[a.jsx("button",{onClick:De,disabled:te>=3,className:"w-10 h-10 sm:w-9 sm:h-9 rounded-xl bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-800/40 transition-all flex items-center justify-center text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 disabled:opacity-50 disabled:cursor-not-allowed touch-manipulation active:scale-95 font-bold text-lg",title:"Zoom In",children:"+"}),a.jsx("button",{onClick:Me,disabled:te<=.3,className:"w-10 h-10 sm:w-9 sm:h-9 rounded-xl bg-orange-50 dark:bg-orange-900/20 hover:bg-orange-100 dark:hover:bg-orange-800/40 transition-all flex items-center justify-center text-orange-600 dark:text-orange-400 hover:text-orange-700 dark:hover:text-orange-300 disabled:opacity-50 disabled:cursor-not-allowed touch-manipulation active:scale-95 font-bold text-lg",title:"Zoom Out",children:"−"}),a.jsx("div",{className:"w-full h-px bg-slate-200 dark:bg-slate-600 my-1"}),a.jsx("button",{onClick:We,className:"w-10 h-10 sm:w-9 sm:h-9 rounded-xl bg-slate-50 dark:bg-slate-800/20 hover:bg-slate-100 dark:hover:bg-slate-700/40 transition-all flex items-center justify-center text-slate-600 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300 text-xs font-bold touch-manipulation active:scale-95",title:"Reset View",children:"⌂"})]}),a.jsx("div",{ref:ue,onDragOver:e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy"},onDrop:e=>{if(e.preventDefault(),e.stopPropagation(),document.body.style.userSelect="",document.body.style.webkitUserSelect="",!X||!ue.current)return;const t=ue.current.getBoundingClientRect(),s=e.clientX-t.left,a=e.clientY-t.top,n=(s-ae.x)/te,l=(a-ae.y)/te,o={id:`${X.nodeType}-${Date.now()}`,type:X.nodeType,data:X,position:{x:Math.max(0,n-50),y:Math.max(0,l-50)}};Y(e=>[...e,o]),F(null),ee(`✓ ${X.name} added!`),setTimeout(()=>ee(null),1500)},onMouseDown:e=>{var t;ce||(null==(t=e.target)?void 0:t.closest(".workflow-node"))||(e=>{(1===e.button||0===e.button&&e.ctrlKey)&&(e.preventDefault(),oe(!0),ie({x:e.clientX,y:e.clientY}))})(e)},onMouseMove:e=>{ce||(e=>{if(le){e.preventDefault();const t=e.clientX-re.x,s=e.clientY-re.y;ne(e=>({x:e.x+t,y:e.y+s})),ie({x:e.clientX,y:e.clientY})}})(e)},onMouseUp:$e,onMouseLeave:$e,onWheel:e=>{if(e.ctrlKey){e.preventDefault();const t=e.deltaY>0?.9:1.1;se(e=>Math.min(Math.max(e*t,.3),3))}},onTouchStart:e=>{var t;ce||(null==(t=e.target)?void 0:t.closest(".workflow-node"))||(e=>{if(1===e.touches.length)oe(!0),Pe({x:e.touches[0].clientX,y:e.touches[0].clientY}),Re(ae);else if(2===e.touches.length){e.preventDefault();const t=Le(e.touches);Pe({x:(e.touches[0].clientX+e.touches[1].clientX)/2,y:(e.touches[0].clientY+e.touches[1].clientY)/2,distance:t}),Ee(te),Re(ae),oe(!1)}})(e)},onTouchMove:e=>{var t;ce||(null==(t=e.target)?void 0:t.closest(".workflow-node"))||(e=>{if(Te)if(1===e.touches.length&&!Te.distance&&le){e.preventDefault();const t=e.touches[0].clientX-Te.x,s=e.touches[0].clientY-Te.y;ne({x:ze.x+t,y:ze.y+s})}else if(2===e.touches.length&&Te.distance){e.preventDefault();const t=Le(e.touches),s=Math.max(.1,t/Te.distance),a=Math.min(Math.max(Ue*s,.3),3);se(a);const n=(e.touches[0].clientX+e.touches[1].clientX)/2,l=(e.touches[0].clientY+e.touches[1].clientY)/2,o=a-te;if(ue.current){const e=ue.current.getBoundingClientRect(),t=n-e.left,s=l-e.top;ne(e=>({x:e.x-t*o/a,y:e.y-s*o/a}))}}})(e)},onTouchEnd:e=>{ce||(oe(!1),Pe(null))},className:"flex-1 relative rounded-xl border-2 border-dashed border-slate-300 dark:border-slate-600 overflow-hidden touch-none select-none "+(le||ce?"cursor-grabbing":"cursor-grab"),style:{cursor:le||ce?"grabbing":"grab",background:"\n                        radial-gradient(circle at 1px 1px, rgba(148, 163, 184, 0.15) 1px, transparent 0),\n                        linear-gradient(to bottom, rgb(248, 250, 252), rgb(241, 245, 249))\n                      ",backgroundSize:`${20*te}px ${20*te}px`,backgroundPosition:`${ae.x}px ${ae.y}px`,touchAction:"none",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},children:a.jsx("div",{className:"absolute inset-0 w-full h-full",style:{transform:`translate(${ae.x}px, ${ae.y}px) scale(${te})`,transformOrigin:"0 0",transition:le?"none":"transform 0.1s ease-out"},children:0===q.length?a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:a.jsxs("div",{className:"text-center text-slate-500 dark:text-slate-400 p-4",children:[a.jsx(c,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),a.jsx("p",{className:"text-lg font-medium mb-3",children:he?"Build Your Workflow":"Workflow Canvas"}),a.jsx("div",{className:"text-sm max-w-md mx-auto space-y-2",children:he?a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"block sm:hidden",children:["Tap the ",a.jsx("span",{className:"inline-flex w-4 h-4 bg-blue-500 text-white rounded text-xs items-center justify-center mx-1",children:"+"})," buttons to add triggers and actions to your workflow."]}),a.jsx("p",{className:"hidden sm:block",children:"Drag triggers from the left and actions from the right to create your automation flow."}),a.jsxs("p",{className:"block mt-2",children:[a.jsx("span",{className:"block sm:hidden",children:"Touch nodes to connect them together."}),a.jsx("span",{className:"hidden sm:block",children:"Click nodes to connect them together."})]}),a.jsx("p",{className:"block sm:hidden text-xs text-slate-400 mt-3",children:"Use pinch gestures to zoom • Drag with one finger to pan"})]}):a.jsxs(a.Fragment,{children:[a.jsx("p",{children:"This is where you'll build automated workflows for your agents."}),a.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Create agents first to start building automation flows"})]})})]})}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"absolute pointer-events-none",style:{left:0,top:0,width:"100%",height:"100%",zIndex:1,transform:`translate(${ae.x}px, ${ae.y}px) scale(${te})`,transformOrigin:"0 0"},children:[a.jsx("defs",{children:a.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"6",refX:"9",refY:"3",orient:"auto",markerUnits:"strokeWidth",children:a.jsx("path",{d:"M0,0 L0,6 L10,3 z",fill:"#3b82f6"})})}),B.map(e=>{const t=q.find(t=>t.id===e.from),s=q.find(t=>t.id===e.to);if(!t||!s)return null;const n=t.position.x+28,l=t.position.y+28,o=s.position.x+28,r=s.position.y+28,i=Math.abs(o-n),c=Math.min(i/2,80),d=n+c,m=l,x=o-c,u=r;return a.jsxs("g",{children:[a.jsx("path",{d:`M ${n} ${l} C ${d} ${m} ${x} ${u} ${o} ${r}`,stroke:"transparent",strokeWidth:"10",fill:"none",className:"cursor-pointer",onClick:()=>{he&&(I(t=>t.filter(t=>t.id!==e.id)),ee("✓ Connection deleted"),setTimeout(()=>ee(null),1500))},style:{pointerEvents:"stroke"}}),a.jsx("path",{d:`M ${n} ${l} C ${d} ${m} ${x} ${u} ${o} ${r}`,stroke:"#3b82f6",strokeWidth:"2",strokeDasharray:"6,3",fill:"none",markerEnd:"url(#arrowhead)",className:"drop-shadow-sm pointer-events-none"}),a.jsx("circle",{cx:n+.3*(o-n),cy:l+.3*(r-l),r:"2",fill:"#3b82f6",className:"opacity-60"}),a.jsx("circle",{cx:n+.7*(o-n),cy:l+.7*(r-l),r:"2",fill:"#3b82f6",className:"opacity-60"})]},e.id)})]}),q.map(e=>a.jsx("div",{className:`workflow-node absolute select-none transition-all duration-200 ${V===e.id?"scale-110 z-20":ce?"z-30":"hover:scale-105 z-10"} ${ce?"cursor-grabbing":"cursor-grab"}`,style:{left:`${e.position.x}px`,top:`${e.position.y}px`,userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},onMouseDown:t=>{var s,a;if(0===t.button&&!(null==(s=t.target)?void 0:s.closest("button"))){t.preventDefault(),t.stopPropagation(),de(!0),document.body.style.userSelect="none",document.body.style.webkitUserSelect="none";const s=null==(a=ue.current)?void 0:a.getBoundingClientRect();if(!s)return;const n=(t.clientX-s.left-ae.x)/te,l=(t.clientY-s.top-ae.y)/te,o=n-e.position.x,r=l-e.position.y;xe({x:o,y:r});const i=t=>{if(t.preventDefault(),!ue.current)return;const s=ue.current.getBoundingClientRect(),a=(t.clientX-s.left-ae.x)/te,n=(t.clientY-s.top-ae.y)/te,l=Math.max(0,a-o),i=Math.max(0,n-r);qe(e.id,{x:l,y:i})},c=()=>{de(!1),xe(null),document.body.style.userSelect="",document.body.style.webkitUserSelect="",document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",c)};document.addEventListener("mousemove",i),document.addEventListener("mouseup",c)}},onTouchStart:t=>{var s,a;if(!(null==(s=t.target)?void 0:s.closest("button"))){t.preventDefault(),de(!0);const s=t.touches[0],n=null==(a=ue.current)?void 0:a.getBoundingClientRect();if(!n)return;const l=(s.clientX-n.left-ae.x)/te,o=(s.clientY-n.top-ae.y)/te,r=l-e.position.x,i=o-e.position.y;xe({x:r,y:i})}},onTouchMove:t=>{var s,a;if(ce&&me&&!(null==(s=t.target)?void 0:s.closest("button"))){t.preventDefault();const s=t.touches[0],n=null==(a=ue.current)?void 0:a.getBoundingClientRect();if(!n)return;const l=(s.clientX-n.left-ae.x)/te,o=(s.clientY-n.top-ae.y)/te,r=Math.max(0,l-me.x),i=Math.max(0,o-me.y);qe(e.id,{x:r,y:i})}},onTouchEnd:()=>{de(!1),xe(null)},children:a.jsxs("div",{className:"relative "+(V===e.id?"ring-4 ring-blue-500/30":""),children:[a.jsx("div",{className:`w-14 h-14 sm:w-12 sm:h-12 rounded-full bg-gradient-to-br ${"trigger"===e.type||e.type,`from-${e.data.color}-400 to-${e.data.color}-600`} shadow-lg flex items-center justify-center border-2 border-white dark:border-slate-800 cursor-move touch-manipulation active:scale-95 transition-transform`,children:a.jsx(e.data.icon,{className:"w-6 h-6 sm:w-5 sm:h-5 text-white"})}),a.jsxs("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 bg-white dark:bg-slate-800 rounded-lg p-2 shadow-lg border border-slate-200 dark:border-slate-700 min-w-[120px] max-w-[160px]",children:[a.jsx("p",{className:"font-medium text-slate-800 dark:text-white text-xs text-center truncate",children:e.data.name}),a.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center truncate",children:e.data.description}),a.jsx("div",{className:"flex justify-center mt-1",children:a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium "+("trigger"===e.type?"bg-blue-100 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"action"===e.type?"bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-purple-100 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300"),children:e.type})})]}),a.jsx("button",{onClick:t=>{var s;t.stopPropagation(),s=e.id,Y(e=>e.filter(e=>e.id!==s)),I(e=>e.filter(e=>e.from!==s&&e.to!==s))},className:"absolute -top-2 -right-2 w-7 h-7 sm:w-6 sm:h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-all shadow-lg touch-manipulation active:scale-90",children:a.jsx(d,{className:"w-4 h-4 sm:w-3 sm:h-3"})}),a.jsx("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),(e=>{if(V){if(V!==e)if(B.find(t=>t.from===V&&t.to===e))ee("⚠ Connection already exists"),setTimeout(()=>ee(null),1500);else{const t={id:`conn-${Date.now()}`,from:V,to:e};I(e=>[...e,t]),ee("✓ Nodes connected!"),setTimeout(()=>ee(null),1500)}J(null)}else J(e),ee("Select target node to connect"),setTimeout(()=>{V===e&&ee(null)},3e3)})(e.id)},className:"absolute -bottom-2 -right-2 w-7 h-7 sm:w-6 sm:h-6 rounded-full flex items-center justify-center transition-all shadow-lg touch-manipulation active:scale-90 z-40 "+(V===e.id?"bg-blue-500 text-white animate-pulse ring-4 ring-blue-500/30":V&&V!==e.id?"bg-green-500 text-white hover:bg-green-600 ring-2 ring-green-500/30":"bg-slate-300 dark:bg-slate-600 text-slate-600 dark:text-slate-300 hover:bg-blue-500 hover:text-white"),title:V===e.id?"Click to cancel connection":V?"Click to connect here":"Click to start connection",children:a.jsx(m,{className:"w-4 h-4 sm:w-3 sm:h-3"})}),a.jsx("div",{className:"absolute -top-1 -left-1 w-5 h-5 bg-slate-400 text-white rounded-full flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity cursor-move",children:a.jsx(W,{className:"w-3 h-3"})})]})},e.id)),V&&a.jsx("div",{className:"absolute top-4 left-4 bg-blue-500 text-white px-3 py-2 rounded-lg text-sm shadow-lg z-30 animate-pulse",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-ping"}),"Click another node to connect"]})})]})})}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mt-4 pt-4 border-t border-slate-200 dark:border-slate-700 gap-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-xs sm:text-sm text-slate-600 dark:text-slate-400",children:[a.jsxs("span",{className:"common-bg-icons px-2 py-1 rounded",children:["Nodes: ",q.length]}),a.jsxs("span",{className:"common-bg-icons px-2 py-1 rounded",children:["Links: ",B.length]}),a.jsxs("span",{className:"common-bg-icons px-2 py-1 rounded",children:["Zoom: ",Math.round(100*te),"%"]}),a.jsx("span",{className:"hidden sm:inline text-xs common-bg-icons px-2 py-1 rounded",children:"Ctrl+/-: zoom • Ctrl+0: reset • Middle-click: pan"}),a.jsx("span",{className:"sm:hidden text-xs common-bg-icons px-2 py-1 rounded",children:"Pinch: zoom • Drag: pan"})]}),a.jsxs("div",{className:"flex gap-2",children:[V&&a.jsx("button",{type:"button",onClick:()=>J(null),className:"common-button-bg2 px-3 py-2 text-sm rounded-lg touch-manipulation",children:"Cancel Connect"}),a.jsxs("button",{type:"button",onClick:()=>{Y([]),I([]),J(null)},className:"common-button-bg2 flex items-center gap-1 px-3 py-2 text-sm rounded-lg touch-manipulation hover:text-red-500",children:[a.jsx(x,{className:"w-3 h-3"}),a.jsx("span",{className:"hidden sm:inline",children:"Clear All"}),a.jsx("span",{className:"sm:hidden",children:"Clear"})]})]})]})]})})}),a.jsx("div",{className:"lg:col-span-3",children:a.jsx(n,{className:"h-[400px] lg:h-[600px]",children:a.jsxs("div",{className:"p-3 sm:p-4 h-full flex flex-col",children:[a.jsx("h3",{className:"text-base sm:text-lg font-semibold text-slate-800 dark:text-white mb-3 sm:mb-4",children:"Actions"}),a.jsx("div",{className:"flex-1 space-y-2 overflow-y-auto",children:je.map(e=>a.jsx("div",{draggable:he,onDragStart:t=>he&&Ce(t,e,"action"),onDragEnd:Se,className:"common-bg-icons p-2.5 sm:p-3 rounded-lg transition-all duration-200 hover:shadow-md touch-manipulation select-none "+(he?"cursor-move":"cursor-default opacity-50"),style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},children:a.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[a.jsx("div",{className:"common-bg-icons p-1.5 rounded-md flex-shrink-0",children:a.jsx(e.icon,{className:"w-3 h-3 sm:w-4 sm:h-4 text-slate-600 dark:text-slate-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-slate-800 dark:text-white text-xs sm:text-sm truncate",children:e.name}),a.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:e.description}),e.compliance&&a.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[a.jsx(u,{className:"w-3 h-3 text-yellow-500 flex-shrink-0"}),a.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 truncate",children:e.compliance})]})]}),a.jsx("button",{onClick:t=>{t.stopPropagation(),Ae(e,"action")},disabled:!he,className:"sm:hidden p-1 rounded-md transition-colors touch-manipulation flex-shrink-0 self-start mt-0.5 active:scale-95 min-w-[28px] min-h-[28px] "+(he?"common-button-bg":"bg-gray-400 text-gray-200 cursor-not-allowed opacity-50"),title:"Add to Canvas",children:a.jsx(i,{className:"w-3 h-3"})}),a.jsx("div",{className:"hidden sm:block flex-shrink-0 self-start mt-0.5",children:a.jsx(W,{className:"w-3 h-3 sm:w-4 sm:h-4 text-slate-400 dark:text-slate-500"})})]})},e.id))})]})})})]}),a.jsx(n,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsx("h3",{className:"text-base sm:text-lg font-semibold text-slate-800 dark:text-white mb-3 sm:mb-4",children:"Add Conditions (Optional)"}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4 sm:mb-6",children:"Add conditions to control when your workflow executes. Drag conditions to the canvas to create conditional logic."}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:we.map(e=>a.jsxs("div",{draggable:he,onDragStart:t=>he&&Ce(t,e,"condition"),onDragEnd:Se,className:"common-bg-icons p-3 sm:p-4 rounded-xl transition-all duration-200 hover:shadow-lg touch-manipulation select-none "+(he?"cursor-move":"cursor-default opacity-50"),style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2",children:[a.jsx("div",{className:"common-bg-icons p-1.5 sm:p-2 rounded-lg flex-shrink-0",children:a.jsx(e.icon,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-600 dark:text-slate-400"})}),a.jsx("span",{className:"font-medium text-slate-800 dark:text-white text-sm sm:text-base flex-1 min-w-0 truncate",children:e.name}),a.jsx("button",{onClick:t=>{t.stopPropagation(),Ae(e,"condition")},disabled:!he,className:"sm:hidden p-1 rounded-md transition-colors touch-manipulation flex-shrink-0 active:scale-95 min-w-[28px] min-h-[28px] "+(he?"common-button-bg":"bg-gray-400 text-gray-200 cursor-not-allowed opacity-50"),title:"Add to Canvas",children:a.jsx(i,{className:"w-3 h-3"})}),a.jsx("div",{className:"hidden sm:block flex-shrink-0",children:a.jsx(W,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-400 dark:text-slate-500"})})]}),a.jsx("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400",children:e.description})]},e.id))})]})})]}),"workflows"===P&&a.jsx("div",{className:"",children:a.jsx(n,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 sm:mb-6 gap-3",children:[a.jsx("h3",{className:"text-base sm:text-lg font-semibold text-slate-800 dark:text-white",children:"My Workflows"}),a.jsxs("button",{onClick:()=>U("canvas"),disabled:!he,className:"flex items-center justify-center gap-2 touch-manipulation "+(he?"common-button-bg":"bg-gray-400 dark:bg-gray-600 text-gray-200 dark:text-gray-300 cursor-not-allowed opacity-50 px-4 py-2.5 rounded-lg"),children:[a.jsx(i,{className:"w-4 h-4"}),"New Workflow"]})]}),a.jsxs("div",{className:"space-y-4",children:[ve.map(e=>a.jsxs("div",{className:"common-bg-icons flex flex-col sm:flex-row sm:items-center justify-between p-4 sm:p-6 rounded-xl hover:shadow-md transition-all gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 flex-1 min-w-0",children:[a.jsx("div",{className:"common-bg-icons w-10 h-10 sm:w-12 sm:h-12 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(c,{className:"w-5 h-5 sm:w-6 sm:h-6 text-slate-600 dark:text-slate-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-semibold text-slate-800 dark:text-white text-base sm:text-lg truncate",children:e.name}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4 text-xs sm:text-sm text-slate-500 dark:text-slate-400 mt-1",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(r,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:e.agentName})]}),a.jsxs("div",{className:"hidden sm:flex items-center gap-4",children:[a.jsx("span",{children:"•"}),a.jsxs("span",{children:[e.nodes.length," nodes"]}),a.jsx("span",{children:"•"}),a.jsxs("span",{children:[e.runs," runs"]}),a.jsx("span",{children:"•"}),a.jsxs("span",{children:["Last: ",e.lastRun]})]}),a.jsxs("div",{className:"flex sm:hidden items-center gap-2 text-xs",children:[a.jsxs("span",{children:[e.nodes.length," nodes"]}),a.jsx("span",{children:"•"}),a.jsxs("span",{children:[e.runs," runs"]})]})]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[a.jsx("span",{className:"inline-flex w-fit px-3 py-1 rounded-full text-xs sm:text-sm font-medium "+("Active"===e.status||e.status,"common-bg-icons text-slate-700 dark:text-slate-300"),children:e.status}),a.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[a.jsx("button",{onClick:()=>(e=>{Q(e),L(e.name),z(e.agentId),Y([...e.nodes]),I([...e.connections]),U("canvas")})(e),disabled:!he,className:"p-2 transition-colors touch-manipulation "+(he?"text-slate-400 hover:text-blue-500":"text-gray-300 cursor-not-allowed opacity-50"),title:"Edit Workflow",children:a.jsx(h,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),a.jsx("button",{onClick:()=>{return t=e.id,void ke(e=>e.map(e=>e.id===t?{...e,status:"Active"===e.status?"Paused":"Active"}:e));var t},disabled:!he,className:"p-2 transition-colors touch-manipulation "+(he?"text-slate-400 hover:text-yellow-500":"text-gray-300 cursor-not-allowed opacity-50"),title:"Active"===e.status?"Pause Workflow":"Activate Workflow",children:"Active"===e.status?a.jsx(p,{className:"w-4 h-4 sm:w-5 sm:h-5"}):a.jsx(g,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),a.jsx("button",{onClick:()=>{const t={...e,id:Date.now().toString(),name:`${e.name} (Copy)`,status:"Draft",runs:0,lastRun:"Never",createdAt:new Date};ke(e=>[...e,t])},disabled:!he,className:"p-2 transition-colors touch-manipulation "+(he?"text-slate-400 hover:text-green-500":"text-gray-300 cursor-not-allowed opacity-50"),title:"Duplicate Workflow",children:a.jsx(b,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),a.jsx("button",{onClick:()=>{return t=e.id,void(confirm("Are you sure you want to delete this workflow?")&&ke(e=>e.filter(e=>e.id!==t)));var t},disabled:!he,className:"p-2 transition-colors touch-manipulation "+(he?"text-slate-400 hover:text-red-500":"text-gray-300 cursor-not-allowed opacity-50"),title:"Delete Workflow",children:a.jsx(x,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})]})]},e.id)),0===ve.length&&a.jsxs("div",{className:"text-center py-16",children:[a.jsx(c,{className:"w-20 h-20 text-slate-300 dark:text-slate-600 mx-auto mb-6"}),a.jsx("h3",{className:"text-xl font-medium text-slate-600 dark:text-slate-400 mb-3",children:he?"No workflows yet":"No Workflows Available"}),a.jsx("p",{className:"text-slate-500 dark:text-slate-500 mb-8 max-w-md mx-auto",children:he?"Create your first workflow to automate agent actions and improve customer experience":"Workflows will appear here once you create agents and set up automation flows"}),a.jsx("button",{onClick:()=>U("canvas"),disabled:!he,className:""+(he?"common-button-bg rounded-xl px-8 py-3":"bg-gray-400 dark:bg-gray-600 text-gray-200 dark:text-gray-300 cursor-not-allowed opacity-50 px-8 py-3 rounded-xl"),children:"Create Your First Workflow"})]})]})]})})}),"runs"===P&&a.jsx(n,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[a.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-slate-800 dark:text-white",children:"Workflow Execution Log"}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[a.jsxs("select",{disabled:!he,className:"px-3 sm:px-4 py-2 rounded-lg text-sm min-w-0 touch-manipulation "+(he?"common-bg-icons":"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 cursor-not-allowed"),style:{zIndex:50},children:[a.jsx("option",{value:"all",children:"All Workflows"}),ve.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]}),a.jsx("button",{disabled:!he,className:"px-3 sm:px-4 py-2 rounded-lg transition-colors text-sm touch-manipulation "+(he?"common-button-bg":"bg-gray-400 text-gray-200 cursor-not-allowed opacity-50"),children:"Refresh"})]})]}),a.jsx("div",{className:"space-y-3 sm:space-y-4",children:ve.length>0?ve.map(e=>a.jsx("div",{className:"common-bg-icons p-4 sm:p-6 rounded-xl",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[a.jsxs("div",{className:"flex items-start sm:items-center gap-3 sm:gap-4 flex-1 min-w-0",children:[a.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-lg flex items-center justify-center flex-shrink-0 "+(e.runs>0?"bg-gradient-to-br from-blue-500 to-purple-600":"common-bg-icons"),children:a.jsx(c,{className:"w-5 h-5 sm:w-6 sm:h-6 "+(e.runs>0?"text-white":"text-slate-600 dark:text-slate-400")})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-semibold text-slate-800 dark:text-white text-base sm:text-lg truncate",children:e.name}),a.jsxs("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400 leading-relaxed",children:[a.jsx("span",{className:"block sm:inline",children:e.agentName}),a.jsx("span",{className:"hidden sm:inline",children:" • "}),a.jsx("span",{className:"block sm:inline",children:e.runs>0?`${e.runs} total runs`:"No executions yet"}),a.jsx("span",{className:"hidden sm:inline",children:" • "}),a.jsxs("span",{className:"block sm:inline",children:["Last: ",e.lastRun]})]})]})]}),a.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-3 sm:gap-3",children:[a.jsx("span",{className:"inline-flex px-2.5 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium "+("Active"===e.status?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":"Paused"===e.status?"bg-orange-100 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400":"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300"),children:e.status}),a.jsx("button",{disabled:!he,className:"p-2 transition-colors touch-manipulation "+(he?"text-slate-400 hover:text-blue-500":"text-gray-300 cursor-not-allowed opacity-50"),title:"View Details",children:a.jsx(f,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})]})},e.id)):a.jsxs("div",{className:"text-center py-12 sm:py-16",children:[a.jsx(g,{className:"w-16 h-16 sm:w-20 sm:h-20 text-slate-300 dark:text-slate-600 mx-auto mb-4 sm:mb-6"}),a.jsx("h3",{className:"text-lg sm:text-xl font-medium text-slate-600 dark:text-slate-400 mb-2 sm:mb-3",children:"No workflows created yet"}),a.jsx("p",{className:"text-sm sm:text-base text-slate-500 dark:text-slate-500 mb-4 sm:mb-6",children:"Create your first workflow to start automating your AI agent tasks"}),a.jsx("button",{onClick:()=>U("canvas"),disabled:!he,className:""+(he?"common-button-bg":"bg-gray-400 dark:bg-gray-600 text-gray-200 dark:text-gray-300 cursor-not-allowed opacity-50 px-6 py-3 rounded-lg"),children:"Create Workflow"})]})})]})}),O&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[99999] p-4",children:a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-6 w-full max-w-md",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h4",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:"Create Custom Trigger"}),a.jsx("button",{onClick:()=>G(!1),className:"p-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:a.jsx(d,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Trigger Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:H.name,onChange:e=>K({...H,name:e.target.value}),placeholder:"e.g., High Priority Request",className:"common-bg-icons w-full px-3 py-2 rounded-lg",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Description ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{value:H.description,onChange:e=>K({...H,description:e.target.value}),placeholder:"Describe when this trigger should activate",rows:3,className:"common-bg-icons w-full px-3 py-2 rounded-lg resize-none",required:!0})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>G(!1),className:"common-button-bg2 flex-1 py-2 rounded-lg",children:"Cancel"}),a.jsx("button",{onClick:()=>{if(!H.name.trim())return;const e={id:`custom-${Date.now()}`,name:H.name,description:H.description,icon:w,color:"indigo",type:"custom"};fe(t=>[...t,e]),K({name:"",description:"",type:"custom"}),G(!1)},disabled:!H.name.trim()||!H.description.trim(),className:"common-button-bg flex-1 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Create"})]})]})]})})]})};export{$ as default};
