import{r as e,j as t,k as s,R as a,b as l,l as r,u as n,f as i,d as o,i as d,e as c,z as m,m as u,n as x}from"./index-C5aCmPir.js";import{G as h}from"./GlassCard-tew0-LE0.js";import{S as p}from"./SearchableSelect-CymxsKTW.js";import{S as g,M as b,F as f,P as v,a as y}from"./Pagination-Bo3Ow0ZY.js";import{S as w}from"./index-DCAQ88rM.js";import{c as j}from"./createLucideIcon-BXwsGmML.js";import{S as k}from"./save-v6HbjtNw.js";import{C as N}from"./chevron-left-B_kLO2ST.js";import{C}from"./chevron-right-DpUsoRmQ.js";import{R as S}from"./refresh-cw-HkDxyCB2.js";import{C as A}from"./copy-9_HOEdNz.js";import{X as P}from"./x-BT7THf-P.js";import{a as E,g as I}from"./aiEmployeeTemplates-BayvapC5.js";import{i as T}from"./utils-Cr29uOvE.js";import{P as M}from"./plus-C8IBxeM6.js";import{S as L}from"./search-DbuR1Bkp.js";import{B as D}from"./bot-BHAywAGD.js";import{E as R}from"./eye-CWePNK0J.js";import{S as F}from"./square-pen-NLF-9KAj.js";import{Z as B}from"./zap-BXo3GZ41.js";import{P as U}from"./pause-6_VaIcHq.js";import{P as _}from"./play-Cx2N7UtY.js";import{T as O}from"./trash-2-QYia7R19.js";import{B as $,A as H}from"./building-2-5dYwZ2y4.js";import{C as z}from"./check-circle-CVnF6RRH.js";import{F as G}from"./file-text-2a2sCfcW.js";import{U as W}from"./upload-niTX7RYk.js";import{I as K,F as q}from"./image-DjBmGLrm.js";import{L as J}from"./link-9B0SmiLU.js";import{S as V}from"./share-2-D9LKftq3.js";import{S as Y}from"./sparkles-DEkWFNK1.js";import{A as Q}from"./arrow-left-B3YbGsVt.js";import{G as X}from"./globe-DWvsbXMs.js";import{M as Z}from"./message-square-CdZxp2lp.js";import{U as ee}from"./users-D_BM4_md.js";import{C as te}from"./clock-BA_2xdVl.js";import{L as se}from"./lightbulb-kqGTdtIT.js";import{D as ae}from"./download-CWF4FNHW.js";import{P as le}from"./phone-BleHWiKY.js";import{S as re}from"./settings-BZj1FePY.js";import{M as ne}from"./mic-OivVqP7x.js";import"./chevron-down-Ch40cs65.js";import"./check-Bd9jBrpa.js";const ie=j("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),oe=j("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]),de=j("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),ce=j("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),me=j("PauseCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]),ue=j("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),xe=j("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]),he=j("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),pe=j("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),ge=j("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),be=j("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]),fe=({agentId:a,agentName:l,isPublished:r=!1})=>{const[n,i]=e.useState("configure"),[o,d]=e.useState("mobile"),[c,m]=e.useState(!1),[u,x]=e.useState(!1),[p,f]=e.useState(null),[v,y]=e.useState(!1),[j,A]=e.useState(""),[P,E]=e.useState(0),I=e.useRef(null),T=e.useRef(null);e.useEffect(()=>{r||"install"!==n&&"advanced"!==n||i("preview")},[r,n]);const[M,L]=e.useState({theme:{primaryColor:"#4b5563",secondaryColor:"#6b7280",accentColor:"#374151",borderRadius:"16px",buttonStyle:"floating",widgetStyle:"modern"},ui:{position:"bottom-right",buttonSize:"medium",chatHeight:"320px",chatWidth:"380px",autoOpen:!1,minimizeButton:!0,draggable:!0},content:{welcomeMessage:`Hi! I'm ${l}. How can I help you today?`,companyName:l,companyDescription:"AI-Powered Support - We offer 24/7 voice support to handle your business calls effieciently and professionally.",companyLogo:"",placeholderText:"Type your message...",offlineMessage:"We're currently offline. Please leave a message."},features:{voiceEnabled:!0,soundEffects:!0,showBranding:!0,messageHistory:!0,typingIndicator:!0,fileUpload:!1},customCSS:""});e.useEffect(()=>{p||(A(""),L(e=>({...e,content:{...e.content,welcomeMessage:`Hi! I'm ${l}. How can I help you today?`,companyName:l,companyLogo:""}})))},[l,p]),e.useEffect(()=>((async()=>{var e;x(!0),A("");try{const t=await fetch(`https://nodejs.service.callshivai.com/api/v1/agents/${a}`);if(t.ok){const s=await t.json(),a=null==(e=null==s?void 0:s.data)?void 0:e.agent;if(null==a?void 0:a.widget){const e=a.widget,t={theme:{primaryColor:e.primary_color||"#4b5563",secondaryColor:e.gradient_start||"#6b7280",accentColor:e.gradient_end||"#374151",borderRadius:"16px",buttonStyle:"floating",widgetStyle:"modern"},ui:{position:e.position||"bottom-right",buttonSize:"medium",chatHeight:"320px",chatWidth:"380px",autoOpen:!1,minimizeButton:!0,draggable:!0},content:{welcomeMessage:e.welcome_message||`Hi! I'm ${l}. How can I help you today?`,companyName:e.ai_employee_name||l,companyDescription:e.ai_employee_description||"AI-Powered Support - We offer 24/7 voice support to handle your business calls effieciently and professionally.",companyLogo:e.company_logo||"",placeholderText:"Type your message...",offlineMessage:"We're currently offline. Please leave a message."},features:{voiceEnabled:!0,soundEffects:!0,showBranding:!0,messageHistory:!0,typingIndicator:!0,fileUpload:!1},customCSS:""};if(L(t),e.company_logo){A(e.company_logo);const t=new Image;t.onload=()=>{},t.onerror=e=>{},t.src=e.company_logo}else A("");f(new Date(e.updatedAt||e.createdAt||Date.now()))}else A(""),L(e=>({...e,content:{...e.content,companyLogo:"",companyName:l,companyDescription:"AI-Powered Support - We offer 24/7 voice support to handle your business calls effieciently and professionally.",welcomeMessage:`Hi! I'm ${l}. How can I help you today?`}}))}}catch(t){}finally{x(!1)}})(),()=>{T.current&&clearTimeout(T.current)}),[a,l]);const D=(e,t="info")=>{const s=document.createElement("div");s.className=`fixed top-4 right-4 ${{success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500"}[t]} text-white px-4 py-3 rounded-lg shadow-lg z-50 transition-all transform translate-x-0 opacity-100 max-w-md`,s.innerHTML=`\n      <div class="flex items-start gap-3">\n        <span class="text-lg">${{success:"‚úÖ",error:"‚ùå",info:"‚ÑπÔ∏è"}[t]}</span>\n        <div class="flex-1">\n          <div class="font-medium text-sm leading-tight">${e}</div>\n        </div>\n        <button onclick="this.parentElement.parentElement.remove()" class="ml-2 text-white/80 hover:text-white text-lg leading-none">&times;</button>\n      </div>\n    `,document.body.appendChild(s);setTimeout(()=>{s.parentElement&&(s.style.opacity="0",s.style.transform="translateX(100%)",setTimeout(()=>{s.remove()},300))},"error"===t?5e3:3e3)},R=(e,t,s)=>{const l={...M,[e]:{...M[e],[t]:s}};L(l),y(!0);const r=new CustomEvent("widgetConfigUpdated",{detail:{agentId:a,config:l}});window.dispatchEvent(r),T.current&&clearTimeout(T.current),T.current=window.setTimeout(()=>{E(e=>e+1)},500)};return t.jsx(h,{children:t.jsxs("div",{className:"p-4 sm:p-6",children:[u&&t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Loading widget configuration..."})]}),!u&&t.jsxs(t.Fragment,{children:[t.jsxs("h3",{className:"text-lg sm:text-xl font-semibold text-slate-800 dark:text-white mb-4 flex items-center gap-3",children:[t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[t.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 bg-slate-50 dark:bg-slate-800 rounded-lg flex items-center justify-center",children:t.jsx(ge,{className:"w-3 h-3 text-slate-600 dark:text-slate-400"})}),t.jsx("h3",{className:"text-xs sm:text-sm font-semibold text-slate-800 dark:text-white",children:"Widget Customization"})]}),v&&t.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400 px-2 py-1 rounded-full",children:"Unsaved changes"}),p&&t.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Last saved: ",p.toLocaleTimeString()]})]}),t.jsx("div",{className:"flex justify-end gap-2 mb-6",children:t.jsx("button",{onClick:async()=>{var e,t,l;m(!0);try{let r=M.content.companyLogo;if(r&&r.startsWith("data:image")){const a=await fetch(r),n=await a.blob(),i=new File([n],"logo.png",{type:n.type}),o=await s.uploadLogo(i);(null==o?void 0:o.logo_url)?r=o.logo_url:(null==(e=null==o?void 0:o.data)?void 0:e.logo_url)?r=o.data.logo_url:(null==(l=null==(t=null==o?void 0:o.data)?void 0:t.data)?void 0:l.logo_url)&&(r=o.data.data.logo_url)}const n={agent_id:a,company_logo:r,ai_employee_name:M.content.companyName,ai_employee_description:M.content.companyDescription,theme:"shivai-blue",position:M.ui.position,button_text:"Call ShivAI!",welcome_message:M.content.welcomeMessage,primary_color:M.theme.primaryColor,gradient_start:M.theme.primaryColor,gradient_end:M.theme.accentColor};await s.saveWidgetConfig(n);L(e=>({...e,content:{...e.content,companyLogo:r}})),f(new Date),y(!1),E(e=>e+1);const i=new CustomEvent("widgetConfigUpdated",{detail:{agentId:a,config:M}});window.dispatchEvent(i),D("Widget configuration saved successfully!","success")}catch(r){const e=r instanceof Error?r.message:"Unknown error occurred";D(`Failed to save widget configuration: ${e}`,"error"),alert("Failed to save widget configuration. Please check the console for details and try again.")}finally{m(!1)}},disabled:c||!v,className:"common-button-bg text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",title:c?"Saving widget configuration...":"Save all changes to backend",children:c?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Uploading & Saving..."]}):t.jsxs(t.Fragment,{children:[t.jsx(k,{className:"w-4 h-4"}),"Save Changes"]})})}),t.jsx("div",{children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Company Branding"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-400 mb-2",children:["Company Logo ",t.jsx("span",{className:"text-slate-400",children:"(Max: 200KB)"})]}),t.jsxs("div",{className:"relative group w-32 h-32",children:[t.jsx("input",{type:"file",id:"logo-upload",accept:"image/*",onChange:e=>{var t;const s=null==(t=e.target.files)?void 0:t[0];if(!s)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(s.type))return D("Please select a valid image file (JPG, PNG, GIF, or WebP)","error"),void(e.target.value="");if(s.size>204800){const t=Math.round(s.size/1024);return D(`Logo file size (${t}KB) exceeds the maximum limit of 200KB. Please choose a smaller image.`,"error"),void(e.target.value="")}if(s.name.length>100)return D("Logo file name is too long. Please rename the file and try again.","error"),void(e.target.value="");const a=new FileReader;a.onloadend=()=>{const e=a.result;A(e),R("content","companyLogo",e);const t=Math.round(s.size/1024);D(`Logo uploaded successfully (${t}KB)`,"success")},a.onerror=()=>{D("Error reading the logo file. Please try again.","error"),e.target.value=""},a.readAsDataURL(s)},className:"hidden"}),t.jsx("div",{className:"relative w-full h-full bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-800 dark:to-slate-700 rounded-xl border-2 border-dashed border-slate-300 dark:border-slate-600 overflow-hidden",children:j?t.jsxs(t.Fragment,{children:[void 0,t.jsx("label",{htmlFor:"logo-upload",className:"cursor-pointer block w-full h-full",children:t.jsx("img",{src:j,alt:"Company Logo",className:"w-full h-full object-contain p-3",onLoad:()=>{},onError:e=>{A("")},crossOrigin:"anonymous"})}),t.jsx("button",{onClick:e=>{e.stopPropagation(),A(""),R("content","companyLogo","")},className:"absolute top-2 left-2 p-1.5 bg-red-500 hover:bg-red-600 text-white rounded-full shadow-lg transition-all duration-200 hover:scale-110 z-10",title:"Remove logo",children:t.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]}):t.jsxs(t.Fragment,{children:[void 0,t.jsxs("label",{htmlFor:"logo-upload",className:"absolute inset-0 flex flex-col items-center justify-center cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:[t.jsx("svg",{className:"w-10 h-10 text-slate-400 dark:text-slate-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 font-medium",children:"Upload"})]})]})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-slate-600 dark:text-slate-400 mb-2",children:"AI Employee Name *"}),t.jsx("input",{type:"text",value:M.content.companyName,onChange:e=>R("content","companyName",e.target.value),placeholder:"Enter your company name",className:"common-bg-icons w-full px-3 py-2 rounded-lg text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-slate-600 dark:text-slate-400 mb-2",children:"AI Employee Description"}),t.jsx("textarea",{value:M.content.companyDescription,onChange:e=>R("content","companyDescription",e.target.value),placeholder:"AI-Powered Support - We offer 24/7 voice support to handle your business calls...",rows:3,className:"common-bg-icons w-full px-3 py-2 rounded-lg text-sm resize-none"})]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Theme & Colors"}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-slate-600 dark:text-slate-400 mb-3",children:"Choose a Gradient Theme"}),t.jsx("div",{className:"theme-slider-container",children:t.jsx(w,{dots:!1,infinite:!1,speed:300,slidesToShow:4,slidesToScroll:1,arrows:!0,prevArrow:t.jsx("button",{className:"slick-arrow slick-prev","aria-label":"Previous",children:t.jsx(N,{className:"w-4 h-4"})}),nextArrow:t.jsx("button",{className:"slick-arrow slick-next","aria-label":"Next",children:t.jsx(C,{className:"w-4 h-4"})}),responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:640,settings:{slidesToShow:2,slidesToScroll:1}}],children:[{id:"original",name:"Original Default",primaryColor:"#4b5563",secondaryColor:"#6b7280",accentColor:"#374151",gradient:"linear-gradient(135deg, #4b5563 0%, #6b7280 30%, #374151 70%, #1f2937 100%)"},{id:"default",name:"ShivAI Blue",primaryColor:"#3b82f6",secondaryColor:"#1e40af",accentColor:"#2563eb",gradient:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)"},{id:"ocean",name:"Ocean Breeze",primaryColor:"#0ea5e9",secondaryColor:"#0284c7",accentColor:"#0369a1",gradient:"linear-gradient(135deg, #0ea5e9 0%, #0369a1 100%)"},{id:"sunset",name:"Sunset Glow",primaryColor:"#f97316",secondaryColor:"#ea580c",accentColor:"#dc2626",gradient:"linear-gradient(135deg, #f97316 0%, #dc2626 100%)"},{id:"forest",name:"Forest Green",primaryColor:"#22c55e",secondaryColor:"#16a34a",accentColor:"#15803d",gradient:"linear-gradient(135deg, #22c55e 0%, #15803d 100%)"},{id:"purple",name:"Purple Dream",primaryColor:"#a855f7",secondaryColor:"#9333ea",accentColor:"#7c3aed",gradient:"linear-gradient(135deg, #a855f7 0%, #7c3aed 100%)"},{id:"teal",name:"Teal Wave",primaryColor:"#14b8a6",secondaryColor:"#0d9488",accentColor:"#0f766e",gradient:"linear-gradient(135deg, #14b8a6 0%, #0f766e 100%)"},{id:"rose",name:"Rose Garden",primaryColor:"#f43f5e",secondaryColor:"#e11d48",accentColor:"#be123c",gradient:"linear-gradient(135deg, #f43f5e 0%, #be123c 100%)"},{id:"gradient1",name:"Cosmic Fusion",primaryColor:"#6366f1",secondaryColor:"#8b5cf6",accentColor:"#a855f7",gradient:"linear-gradient(135deg, #6366f1 0%, #a855f7 100%)"},{id:"gradient2",name:"Warm Citrus",primaryColor:"#fbbf24",secondaryColor:"#f59e0b",accentColor:"#d97706",gradient:"linear-gradient(135deg, #fbbf24 0%, #d97706 100%)"},{id:"gradient3",name:"Cool Mint",primaryColor:"#34d399",secondaryColor:"#10b981",accentColor:"#059669",gradient:"linear-gradient(135deg, #34d399 0%, #059669 100%)"}].map(e=>{const s=M.theme.primaryColor===e.primaryColor&&M.theme.accentColor===e.accentColor;return t.jsx("div",{className:"px-1",children:t.jsxs("button",{onClick:()=>(e=>{const t={...M,theme:{...M.theme,primaryColor:e.primaryColor,secondaryColor:e.secondaryColor,accentColor:e.accentColor}};L(t),y(!0);const s=new CustomEvent("widgetConfigUpdated",{detail:{agentId:a,config:t}});window.dispatchEvent(s),setTimeout(()=>{E(e=>e+1)},50)})(e),className:"relative group w-full h-14 lg:h-16 rounded-lg border-2 transition-all duration-200 "+(s?"border-blue-500 ring-2 ring-blue-200 dark:ring-blue-800":"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600"),style:{background:e.gradient},title:e.name,children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent rounded-md"}),t.jsxs("div",{className:"relative h-full flex flex-col items-center justify-center text-white",children:[t.jsx("div",{className:"text-[10px] lg:text-xs font-medium opacity-90 px-1 text-center leading-tight",children:e.name}),s&&t.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 lg:w-5 lg:h-5 bg-blue-500 rounded-full flex items-center justify-center border border-white",children:t.jsx("svg",{className:"w-2.5 h-2.5 lg:w-3 lg:h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})]})},e.id)})})}),t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-3",children:"Select a preset theme or customize individual colors below"})]})})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Live Preview"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>d("mobile"),className:"p-2 rounded-lg transition-colors "+("mobile"===o?"common-button-bg text-white":"common-bg-icons text-slate-600 dark:text-slate-400"),children:t.jsx(g,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>d("desktop"),className:"p-2 rounded-lg transition-colors "+("desktop"===o?"common-button-bg text-white":"common-bg-icons text-slate-600 dark:text-slate-400"),children:t.jsx(b,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>E(e=>e+1),className:"p-2 rounded-lg common-bg-icons text-slate-600 dark:text-slate-400 hover:opacity-90 transition-opacity",title:"Refresh Preview",children:t.jsx(S,{className:"w-4 h-4"})})]})]}),t.jsx("div",{className:"relative bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-800 dark:to-slate-900 rounded-xl overflow-hidden "+("mobile"===o?"h-[600px]":"h-[500px]"),children:t.jsx("iframe",{ref:I,srcDoc:`<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Widget Preview</title>\n    <style>\n        body {\n            margin: 0;\n            padding: 20px;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n            background: linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 100%);\n            min-height: 100vh;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            overflow: hidden;\n        }\n        .demo-content {\n            text-align: center;\n            max-width: 600px;\n            width: 100%;\n            padding: 2rem;\n            background: white;\n            border-radius: 16px;\n            box-shadow: 0 10px 25px rgba(0,0,0,0.1);\n        }\n        .company-header {\n            margin-bottom: 2rem;\n        }\n        .company-logo {\n            width: 80px;\n            height: 80px;\n            border-radius: 16px;\n            margin: 0 auto 1rem;\n            display: block;\n            object-fit: cover;\n            box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n        }\n        .company-name {\n            font-size: 2rem;\n            font-weight: 700;\n            color: #1f2937;\n            margin-bottom: 0.5rem;\n        }\n        .company-description {\n           y font-size: 1.1rem;\n            color: #6b7280;\n            line-height: 1.6;\n            margin-bottom: 2rem;\n        }\n        .demo-text {\n            color: #4b5563;\n            font-size: 1rem;\n            margin-bottom: 1rem;\n        }\n        .device-badge {\n            display: inline-block;\n            background: linear-gradient(135deg, #3b82f6, #8b5cf6);\n            color: white;\n            padding: 0.5rem 1rem;\n            border-radius: 20px;\n            font-size: 0.875rem;\n            font-weight: 600;\n            margin-bottom: 1rem;\n        }\n        @media (max-width: 768px) {\n            body { padding: 10px; }\n            .demo-content { padding: 1.5rem; }\n            .company-name { font-size: 1.5rem; }\n            .company-description { font-size: 1rem; }\n        }\n    </style>\n</head>\n<body>\n    <div class="">\n      \n        \n      \n\n                        \n\n<div class="demo-text">\n  <strong> Test Your AI Employee Widget:</strong>\n</div>\n<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 1.5rem; margin: 1rem 0; text-align: left;">\n  <div style="color: #374151; font-size: 0.9rem; line-height: 1.6;">\n    <p style="margin: 0 0 1rem 0; font-weight: 600; color: #1f2937;">\n      üìã How to test:\n    </p>\n    <ol style="margin: 0; padding-left: 1.5rem; color: #4b5563;">\n      <li style="margin-bottom: 0.75rem;">\n        <strong>Look for the call button</strong> - It should appear in the bottom-right corner\n      </li>\n      <li style="margin-bottom: 0.75rem;">\n        <strong>Click to open</strong> - Test the interface and your custom branding\n      </li>\n      <li style="margin-bottom: 0.75rem;">\n        <strong>Try voice features</strong> - Click the Start call button icon to test voice input of AI Employee\n      </li>\n      <li style="margin-bottom: 0;">\n        <strong>Check response and Other Features</strong> - Send messages, view Transcripts, and see how the AI responds\n      </li>\n    </ol>\n    <div style="margin-top: 1rem; padding: 0.75rem; background: #dbeafe; border-radius: 8px; border-left: 4px solid #3b82f6;">\n      <p style="margin: 0; font-size: 0.85rem; color: #1e40af;">\n        üí° <strong>Tip:</strong> Make changes in the customization panel and see them update in real-time!\n      </p>\n    </div>\n  </div>\n</div>\n    </div>\n\n    \x3c!-- Pass configuration to widget --\x3e\n    <script>\n        // Debug: Log agentId being passed to configure widget\n        console.log("üîç Setting configure widget agentId:", "${a}");\n        \n        window.ShivAI = window.ShivAI || {};\n        window.ShivAI.config = {\n            companyName: "${M.content.companyName}",\n            companyDescription: "${M.content.companyDescription}",\n            ${M.content.companyLogo?`companyLogo: "${M.content.companyLogo}",`:""}\n        };\n        \n        // Also set SHIVAI_CONFIG for agent ID\n        window.SHIVAI_CONFIG = {\n            agentId: "${a}",\n            theme: ${JSON.stringify(M.theme)},\n            ui: ${JSON.stringify(M.ui)},\n            content: ${JSON.stringify(M.content)},\n            features: ${JSON.stringify(M.features)}\n        };\n        \n        console.log("‚úÖ Configure widget SHIVAI_CONFIG set:", window.SHIVAI_CONFIG);\n        \n        // Refresh widget theme after config is set\n        setTimeout(() => {\n            if (window.ShivAIWidget && window.ShivAIWidget.refreshTheme) {\n                window.ShivAIWidget.refreshTheme();\n                console.log("üé® Theme refreshed in configure view");\n            }\n        }, 100);\n    <\/script>\n    \n    \x3c!-- Load the actual widget.js --\x3e\n    <script src="/widget.js?agentId=${a}&companyName=${encodeURIComponent(M.content.companyName)}&companyDescription=${encodeURIComponent(M.content.companyDescription)}&agentName=${encodeURIComponent(M.content.companyName)}&v=${Date.now()}"><\/script>\n</body>\n</html>`,className:"w-full h-full border-0",title:"Widget Preview",sandbox:"allow-scripts allow-same-origin"},`${P}-${JSON.stringify(M.content)}`)})]})]})})]})]})})},ve=({currentAgent:s})=>{const[a,l]=e.useState({theme:{primaryColor:"#4b5563",secondaryColor:"#6b7280",accentColor:"#374151",borderRadius:"16px",buttonStyle:"floating",widgetStyle:"modern"},ui:{position:"bottom-right",buttonSize:"medium",chatHeight:"320px",chatWidth:"380px",autoOpen:!1,minimizeButton:!0,draggable:!0},content:{welcomeMessage:`Hi! I'm ${s.name}. How can I help you today?`,companyName:s.name,companyDescription:"AI-Powered Support - We offer 24/7 voice support to handle your business calls efficiently and professionally.",companyLogo:"",placeholderText:"Type your message...",offlineMessage:"We're currently offline. Please leave a message."},features:{voiceEnabled:!0,soundEffects:!0,showBranding:!0,messageHistory:!0,typingIndicator:!0,fileUpload:!1},customCSS:""});e.useEffect(()=>{(async()=>{try{const e=await fetch(`/api/agents/${s.id}/widget-config`);if(e.ok){const t=await e.json();l(t)}}catch(e){}})();const e=e=>{e.detail.agentId===s.id&&l(e.detail.config)};return window.addEventListener("widgetConfigUpdated",e),()=>{window.removeEventListener("widgetConfigUpdated",e)}},[s.id]);const r=`<script src="https://callshivai.com/widget2.js?agentId=${s.id}"><\/script>`;return t.jsx("div",{className:"mt-6 sm:mt-8",children:t.jsx(h,{children:t.jsxs("div",{className:"p-4 sm:p-6",children:[t.jsx("h3",{className:"text-base sm:text-lg font-semibold text-slate-800 dark:text-white mb-3 sm:mb-4",children:"Widget Integration Code"}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Copy and paste this script tag into your website's HTML. The widget will automatically load your saved customizations."}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Script Tag"}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[t.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),"Live Configuration"]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("code",{className:"common-bg-icons block w-full p-3 rounded-lg text-xs sm:text-sm font-mono text-slate-800 dark:text-white overflow-x-auto whitespace-pre-wrap max-h-64 overflow-y-auto",children:r}),t.jsx("button",{onClick:()=>{navigator.clipboard.writeText(r)},className:"absolute top-2 right-2 p-2 common-bg-icons rounded-md hover:shadow-sm transition-all touch-manipulation min-h-[36px] min-w-[36px] bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm",title:"Copy embed code",children:t.jsx(A,{className:"w-4 h-4 text-slate-600 dark:text-slate-300"})})]}),t.jsxs("div",{className:"mt-4 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg",children:[t.jsx("h4",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"üìã Quick Installation:"}),t.jsxs("ol",{className:"text-xs text-slate-600 dark:text-slate-400 space-y-1 list-decimal list-inside",children:[t.jsx("li",{children:"Copy the script tag above"}),t.jsx("li",{children:"Paste it in your website's HTML, before the closing </body> tag"}),t.jsx("li",{children:"The widget will load automatically with all your custom settings"}),t.jsx("li",{children:"To update: copy new script when you change settings"})]})]})]})]})})})};var ye={},we={exports:{}};function je(){}function ke(){}ke.resetWarningCache=je;we.exports=function(){function e(e,t,s,a,l,r){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==r){var n=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw n.name="Invariant Violation",n}}function t(){return e}e.isRequired=e;var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ke,resetWarningCache:je};return s.PropTypes=s,s}();var Ne=we.exports,Ce={L:1,M:0,Q:3,H:2},Se={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},Ae=Se;function Pe(e){this.mode=Ae.MODE_8BIT_BYTE,this.data=e}Pe.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var Ee=Pe,Ie=Ce;function Te(e,t){this.totalCount=e,this.dataCount=t}Te.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],Te.getRSBlocks=function(e,t){var s=Te.getRsBlockTable(e,t);if(null==s)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var a=s.length/3,l=new Array,r=0;r<a;r++)for(var n=s[3*r+0],i=s[3*r+1],o=s[3*r+2],d=0;d<n;d++)l.push(new Te(i,o));return l},Te.getRsBlockTable=function(e,t){switch(t){case Ie.L:return Te.RS_BLOCK_TABLE[4*(e-1)+0];case Ie.M:return Te.RS_BLOCK_TABLE[4*(e-1)+1];case Ie.Q:return Te.RS_BLOCK_TABLE[4*(e-1)+2];case Ie.H:return Te.RS_BLOCK_TABLE[4*(e-1)+3];default:return}};var Me=Te;function Le(){this.buffer=new Array,this.length=0}Le.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var s=0;s<t;s++)this.putBit(1==(e>>>t-s-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};for(var De=Le,Re={glog:function(e){if(e<1)throw new Error("glog("+e+")");return Re.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return Re.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},Fe=0;Fe<8;Fe++)Re.EXP_TABLE[Fe]=1<<Fe;for(Fe=8;Fe<256;Fe++)Re.EXP_TABLE[Fe]=Re.EXP_TABLE[Fe-4]^Re.EXP_TABLE[Fe-5]^Re.EXP_TABLE[Fe-6]^Re.EXP_TABLE[Fe-8];for(Fe=0;Fe<255;Fe++)Re.LOG_TABLE[Re.EXP_TABLE[Fe]]=Fe;var Be=Re,Ue=Be;function _e(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var s=0;s<e.length&&0==e[s];)s++;this.num=new Array(e.length-s+t);for(var a=0;a<e.length-s;a++)this.num[a]=e[a+s]}_e.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),s=0;s<this.getLength();s++)for(var a=0;a<e.getLength();a++)t[s+a]^=Ue.gexp(Ue.glog(this.get(s))+Ue.glog(e.get(a)));return new _e(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=Ue.glog(this.get(0))-Ue.glog(e.get(0)),s=new Array(this.getLength()),a=0;a<this.getLength();a++)s[a]=this.get(a);for(a=0;a<e.getLength();a++)s[a]^=Ue.gexp(Ue.glog(e.get(a))+t);return new _e(s,0).mod(e)}};var Oe=Se,$e=_e,He=Be,ze=0,Ge=1,We=2,Ke=3,qe=4,Je=5,Ve=6,Ye=7,Qe={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;Qe.getBCHDigit(t)-Qe.getBCHDigit(Qe.G15)>=0;)t^=Qe.G15<<Qe.getBCHDigit(t)-Qe.getBCHDigit(Qe.G15);return(e<<10|t)^Qe.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;Qe.getBCHDigit(t)-Qe.getBCHDigit(Qe.G18)>=0;)t^=Qe.G18<<Qe.getBCHDigit(t)-Qe.getBCHDigit(Qe.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return Qe.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,s){switch(e){case ze:return(t+s)%2==0;case Ge:return t%2==0;case We:return s%3==0;case Ke:return(t+s)%3==0;case qe:return(Math.floor(t/2)+Math.floor(s/3))%2==0;case Je:return t*s%2+t*s%3==0;case Ve:return(t*s%2+t*s%3)%2==0;case Ye:return(t*s%3+(t+s)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new $e([1],0),s=0;s<e;s++)t=t.multiply(new $e([1,He.gexp(s)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case Oe.MODE_NUMBER:return 10;case Oe.MODE_ALPHA_NUM:return 9;case Oe.MODE_8BIT_BYTE:case Oe.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case Oe.MODE_NUMBER:return 12;case Oe.MODE_ALPHA_NUM:return 11;case Oe.MODE_8BIT_BYTE:return 16;case Oe.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case Oe.MODE_NUMBER:return 14;case Oe.MODE_ALPHA_NUM:return 13;case Oe.MODE_8BIT_BYTE:return 16;case Oe.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),s=0,a=0;a<t;a++)for(var l=0;l<t;l++){for(var r=0,n=e.isDark(a,l),i=-1;i<=1;i++)if(!(a+i<0||t<=a+i))for(var o=-1;o<=1;o++)l+o<0||t<=l+o||0==i&&0==o||n==e.isDark(a+i,l+o)&&r++;r>5&&(s+=3+r-5)}for(a=0;a<t-1;a++)for(l=0;l<t-1;l++){var d=0;e.isDark(a,l)&&d++,e.isDark(a+1,l)&&d++,e.isDark(a,l+1)&&d++,e.isDark(a+1,l+1)&&d++,0!=d&&4!=d||(s+=3)}for(a=0;a<t;a++)for(l=0;l<t-6;l++)e.isDark(a,l)&&!e.isDark(a,l+1)&&e.isDark(a,l+2)&&e.isDark(a,l+3)&&e.isDark(a,l+4)&&!e.isDark(a,l+5)&&e.isDark(a,l+6)&&(s+=40);for(l=0;l<t;l++)for(a=0;a<t-6;a++)e.isDark(a,l)&&!e.isDark(a+1,l)&&e.isDark(a+2,l)&&e.isDark(a+3,l)&&e.isDark(a+4,l)&&!e.isDark(a+5,l)&&e.isDark(a+6,l)&&(s+=40);var c=0;for(l=0;l<t;l++)for(a=0;a<t;a++)e.isDark(a,l)&&c++;return s+=10*(Math.abs(100*c/t/t-50)/5)}},Xe=Ee,Ze=Me,et=De,tt=Qe,st=_e;function at(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var lt=at.prototype;lt.addData=function(e){var t=new Xe(e);this.dataList.push(t),this.dataCache=null},lt.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},lt.getModuleCount=function(){return this.moduleCount},lt.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=Ze.getRSBlocks(e,this.errorCorrectLevel),s=new et,a=0,l=0;l<t.length;l++)a+=t[l].dataCount;for(l=0;l<this.dataList.length;l++){var r=this.dataList[l];s.put(r.mode,4),s.put(r.getLength(),tt.getLengthInBits(r.mode,e)),r.write(s)}if(s.getLengthInBits()<=8*a)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},lt.makeImpl=function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var s=0;s<this.moduleCount;s++){this.modules[s]=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++)this.modules[s][a]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=at.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},lt.setupPositionProbePattern=function(e,t){for(var s=-1;s<=7;s++)if(!(e+s<=-1||this.moduleCount<=e+s))for(var a=-1;a<=7;a++)t+a<=-1||this.moduleCount<=t+a||(this.modules[e+s][t+a]=0<=s&&s<=6&&(0==a||6==a)||0<=a&&a<=6&&(0==s||6==s)||2<=s&&s<=4&&2<=a&&a<=4)},lt.getBestMaskPattern=function(){for(var e=0,t=0,s=0;s<8;s++){this.makeImpl(!0,s);var a=tt.getLostPoint(this);(0==s||e>a)&&(e=a,t=s)}return t},lt.createMovieClip=function(e,t,s){var a=e.createEmptyMovieClip(t,s);this.make();for(var l=0;l<this.modules.length;l++)for(var r=1*l,n=0;n<this.modules[l].length;n++){var i=1*n;this.modules[l][n]&&(a.beginFill(0,100),a.moveTo(i,r),a.lineTo(i+1,r),a.lineTo(i+1,r+1),a.lineTo(i,r+1),a.endFill())}return a},lt.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},lt.setupPositionAdjustPattern=function(){for(var e=tt.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var s=0;s<e.length;s++){var a=e[t],l=e[s];if(null==this.modules[a][l])for(var r=-2;r<=2;r++)for(var n=-2;n<=2;n++)this.modules[a+r][l+n]=-2==r||2==r||-2==n||2==n||0==r&&0==n}},lt.setupTypeNumber=function(e){for(var t=tt.getBCHTypeNumber(this.typeNumber),s=0;s<18;s++){var a=!e&&1==(t>>s&1);this.modules[Math.floor(s/3)][s%3+this.moduleCount-8-3]=a}for(s=0;s<18;s++){a=!e&&1==(t>>s&1);this.modules[s%3+this.moduleCount-8-3][Math.floor(s/3)]=a}},lt.setupTypeInfo=function(e,t){for(var s=this.errorCorrectLevel<<3|t,a=tt.getBCHTypeInfo(s),l=0;l<15;l++){var r=!e&&1==(a>>l&1);l<6?this.modules[l][8]=r:l<8?this.modules[l+1][8]=r:this.modules[this.moduleCount-15+l][8]=r}for(l=0;l<15;l++){r=!e&&1==(a>>l&1);l<8?this.modules[8][this.moduleCount-l-1]=r:l<9?this.modules[8][15-l-1+1]=r:this.modules[8][15-l-1]=r}this.modules[this.moduleCount-8][8]=!e},lt.mapData=function(e,t){for(var s=-1,a=this.moduleCount-1,l=7,r=0,n=this.moduleCount-1;n>0;n-=2)for(6==n&&n--;;){for(var i=0;i<2;i++)if(null==this.modules[a][n-i]){var o=!1;r<e.length&&(o=1==(e[r]>>>l&1)),tt.getMask(t,a,n-i)&&(o=!o),this.modules[a][n-i]=o,-1==--l&&(r++,l=7)}if((a+=s)<0||this.moduleCount<=a){a-=s,s=-s;break}}},at.PAD0=236,at.PAD1=17,at.createData=function(e,t,s){for(var a=Ze.getRSBlocks(e,t),l=new et,r=0;r<s.length;r++){var n=s[r];l.put(n.mode,4),l.put(n.getLength(),tt.getLengthInBits(n.mode,e)),n.write(l)}var i=0;for(r=0;r<a.length;r++)i+=a[r].dataCount;if(l.getLengthInBits()>8*i)throw new Error("code length overflow. ("+l.getLengthInBits()+">"+8*i+")");for(l.getLengthInBits()+4<=8*i&&l.put(0,4);l.getLengthInBits()%8!=0;)l.putBit(!1);for(;!(l.getLengthInBits()>=8*i||(l.put(at.PAD0,8),l.getLengthInBits()>=8*i));)l.put(at.PAD1,8);return at.createBytes(l,a)},at.createBytes=function(e,t){for(var s=0,a=0,l=0,r=new Array(t.length),n=new Array(t.length),i=0;i<t.length;i++){var o=t[i].dataCount,d=t[i].totalCount-o;a=Math.max(a,o),l=Math.max(l,d),r[i]=new Array(o);for(var c=0;c<r[i].length;c++)r[i][c]=255&e.buffer[c+s];s+=o;var m=tt.getErrorCorrectPolynomial(d),u=new st(r[i],m.getLength()-1).mod(m);n[i]=new Array(m.getLength()-1);for(c=0;c<n[i].length;c++){var x=c+u.getLength()-n[i].length;n[i][c]=x>=0?u.get(x):0}}var h=0;for(c=0;c<t.length;c++)h+=t[c].totalCount;var p=new Array(h),g=0;for(c=0;c<a;c++)for(i=0;i<t.length;i++)c<r[i].length&&(p[g++]=r[i][c]);for(c=0;c<l;c++)for(i=0;i<t.length;i++)c<n[i].length&&(p[g++]=n[i][c]);return p};var rt=at,nt={};Object.defineProperty(nt,"__esModule",{value:!0});var it=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},ot=mt(Ne),dt=e,ct=mt(dt);function mt(e){return e&&e.__esModule?e:{default:e}}var ut={bgColor:ot.default.oneOfType([ot.default.object,ot.default.string]).isRequired,bgD:ot.default.string.isRequired,fgColor:ot.default.oneOfType([ot.default.object,ot.default.string]).isRequired,fgD:ot.default.string.isRequired,size:ot.default.number.isRequired,title:ot.default.string,viewBoxSize:ot.default.number.isRequired,xmlns:ot.default.string},xt=(0,dt.forwardRef)(function(e,t){var s=e.bgColor,a=e.bgD,l=e.fgD,r=e.fgColor,n=e.size,i=e.title,o=e.viewBoxSize,d=e.xmlns,c=void 0===d?"http://www.w3.org/2000/svg":d,m=function(e,t){var s={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=e[a]);return s}(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return ct.default.createElement("svg",it({},m,{height:n,ref:t,viewBox:"0 0 "+o+" "+o,width:n,xmlns:c}),i?ct.default.createElement("title",null,i):null,ct.default.createElement("path",{d:a,fill:s}),ct.default.createElement("path",{d:l,fill:r}))});xt.displayName="QRCodeSvg",xt.propTypes=ut,nt.default=xt,Object.defineProperty(ye,"__esModule",{value:!0}),ye.QRCode=void 0;var ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},pt=wt(Ne),gt=wt(Ce),bt=wt(rt),ft=e,vt=wt(ft),yt=wt(nt);function wt(e){return e&&e.__esModule?e:{default:e}}var jt={bgColor:pt.default.oneOfType([pt.default.object,pt.default.string]),fgColor:pt.default.oneOfType([pt.default.object,pt.default.string]),level:pt.default.string,size:pt.default.number,value:pt.default.string.isRequired},kt=(0,ft.forwardRef)(function(e,t){var s=e.bgColor,a=void 0===s?"#FFFFFF":s,l=e.fgColor,r=void 0===l?"#000000":l,n=e.level,i=void 0===n?"L":n,o=e.size,d=void 0===o?256:o,c=e.value,m=function(e,t){var s={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=e[a]);return s}(e,["bgColor","fgColor","level","size","value"]),u=new bt.default(-1,gt.default[i]);u.addData(c),u.make();var x=u.modules;return vt.default.createElement(yt.default,ht({},m,{bgColor:a,bgD:x.map(function(e,t){return e.map(function(e,s){return e?"":"M "+s+" "+t+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:r,fgD:x.map(function(e,t){return e.map(function(e,s){return e?"M "+s+" "+t+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:d,viewBoxSize:x.length}))});ye.QRCode=kt,kt.displayName="QRCode",kt.propTypes=jt;var Nt=ye.default=kt;const Ct=({agent:e,onClose:s})=>{const l=`https://widget.callshivai.com/agent/${e.id}`,[r,n]=a.useState(180);a.useEffect(()=>{const e=()=>{window.innerWidth<640?n(140):window.innerWidth<1024?n(160):n(180)},t=e=>{"Escape"===e.key&&s()};return e(),window.addEventListener("resize",e),window.addEventListener("keydown",t),()=>{window.removeEventListener("resize",e),window.removeEventListener("keydown",t)}},[s]);return t.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-3 sm:p-4 -top-8",onClick:e=>{e.target===e.currentTarget&&s()},children:t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-lg sm:max-w-2xl lg:max-w-4xl max-h-[90vh] overflow-y-auto relative border border-slate-200 dark:border-slate-700",children:[t.jsx("button",{onClick:s,className:"absolute top-3 right-3 sm:top-4 sm:right-4 p-2 hover:bg-slate-100 dark:hover:bg-slate-700 bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm rounded-lg transition-colors z-50 cursor-pointer",children:t.jsx(P,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-500 dark:text-slate-400"})}),t.jsx("div",{className:"bg-gradient-to-r from-gray-400 via-gray-500 to-gray-600 px-4 sm:px-6 py-4 text-white relative overflow-hidden",children:t.jsx("div",{className:"relative z-10",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center",children:t.jsx(he,{className:"w-4 h-4 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg sm:text-xl font-bold",children:"Share Agent"}),t.jsx("p",{className:"text-white/80 text-sm",children:"Scan to start conversation"})]})]})})}),t.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-5 lg:gap-6 p-4 sm:p-6",children:[t.jsx("div",{className:"lg:col-span-2 flex justify-center mb-6 lg:mb-0",children:t.jsxs("div",{className:"bg-white rounded-xl p-4 sm:p-6 flex items-center justify-center shadow-lg border-2 border-slate-100 dark:border-slate-700 relative max-w-xs sm:max-w-none",children:[t.jsxs("div",{className:"relative bg-white p-3 sm:p-4 rounded-lg shadow-inner",children:[t.jsx("div",{className:"bg-white p-2 sm:p-3 rounded-lg border border-slate-100",children:t.jsx(Nt,{id:"qr-code-svg",value:l,size:r,style:{height:"auto",maxWidth:"100%",width:"100%"},viewBox:"0 0 256 256",bgColor:"#ffffff",fgColor:"#000000",level:"M"})}),t.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg p-1.5 shadow-xl border-2 border-white",children:t.jsxs("div",{className:"w-4 h-4 sm:w-5 sm:h-5 bg-gradient-to-br from-gray-500 to-gray-600 rounded-md flex items-center justify-center shadow-md relative overflow-hidden",children:[t.jsx("span",{className:"text-white font-bold text-xs relative z-10",children:"AI"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent"})]})})]}),t.jsx("div",{className:"absolute top-2 left-2 w-3 h-3 border-l-2 border-t-2 border-gray-400 rounded-tl-md"}),t.jsx("div",{className:"absolute top-2 right-2 w-3 h-3 border-r-2 border-t-2 border-gray-400 rounded-tr-md"}),t.jsx("div",{className:"absolute bottom-2 left-2 w-3 h-3 border-l-2 border-b-2 border-gray-400 rounded-bl-md"}),t.jsx("div",{className:"absolute bottom-2 right-2 w-3 h-3 border-r-2 border-b-2 border-gray-400 rounded-br-md"})]})}),t.jsxs("div",{className:"lg:col-span-3 flex flex-col justify-between",children:[t.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-slate-900/50 dark:to-gray-800/20 rounded-xl p-4 sm:p-5 border border-slate-200 dark:border-slate-700 mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-gray-400 to-gray-500 rounded-lg flex items-center justify-center shadow-lg flex-shrink-0",children:t.jsx("span",{className:"text-white font-bold text-lg",children:e.name.charAt(0).toUpperCase()})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-base sm:text-lg truncate",children:e.name}),t.jsx("div",{className:"flex items-center gap-2 mt-1",children:t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold "+("Published"===e.status?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"Training"===e.status?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300"),children:[t.jsx("div",{className:"w-2 h-2 rounded-full mr-1.5 "+("Published"===e.status?"bg-green-500":"Training"===e.status?"bg-yellow-500":"bg-slate-500")}),e.status]})})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-3 border border-slate-200 dark:border-slate-600",children:[t.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs font-medium mb-1 uppercase tracking-wide",children:"Widget URL"}),t.jsx("p",{className:"font-mono text-xs sm:text-sm text-gray-600 dark:text-gray-400 break-all bg-gray-100 dark:bg-gray-800/20 px-2 py-1.5 rounded",children:l})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsxs("button",{onClick:()=>{const t=document.getElementById("qr-code-svg");if(!t)return;const s=document.createElement("canvas"),a=s.getContext("2d");if(!a)return;const l=(new XMLSerializer).serializeToString(t),r=window.URL||window.webkitURL||window,n=new Image,i=new Blob([l],{type:"image/svg+xml;charset=utf-8"}),o=r.createObjectURL(i);n.onload=()=>{s.width=512,s.height=512,a.fillStyle="#ffffff",a.fillRect(0,0,s.width,s.height),a.drawImage(n,0,0,s.width,s.height),r.revokeObjectURL(o);const t=document.createElement("a");t.download=`${e.name}-qr-code.png`,t.href=s.toDataURL(),t.click()},n.src=o},className:"group bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white font-semibold py-3 px-4 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-2 touch-manipulation",children:[t.jsx("div",{className:"w-4 h-4 transition-transform group-hover:scale-110",children:t.jsxs("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z"}),t.jsx("polyline",{points:"14,2 14,8 20,8"}),t.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),t.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),t.jsx("polyline",{points:"10,9 9,9 8,9"})]})}),t.jsx("span",{className:"text-sm sm:text-base",children:"Download QR"})]}),t.jsxs("button",{id:"copy-url-btn",onClick:()=>{navigator.clipboard.writeText(l);const e=document.getElementById("copy-url-btn");if(e){const t=e.innerHTML;e.innerHTML='\n        <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>\n        </svg>\n        Copied!\n      ',setTimeout(()=>{e.innerHTML=t},2e3)}},className:"group bg-white hover:bg-slate-50 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 font-semibold py-3 px-4 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98] border-2 border-slate-200 dark:border-slate-600 flex items-center justify-center gap-2 touch-manipulation",children:[t.jsx("div",{className:"w-4 h-4 transition-transform group-hover:scale-110",children:t.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),t.jsx("span",{className:"text-sm sm:text-base",children:"Copy Link"})]})]}),t.jsx("div",{className:"mt-4 text-center",children:t.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs sm:text-sm leading-relaxed",children:"Share this QR code or link to let users instantly chat with your AI agent"})})]})]})]})})},St="https://nodejs.service.callshivai.com/api/v1/generate-prompt/generate",At=l.create({timeout:9e4,headers:{"Content-Type":"application/json"}});At.interceptors.request.use(e=>{const t=localStorage.getItem("auth_tokens");if(t)try{const{accessToken:s}=JSON.parse(t);s&&(e.headers.Authorization=`Bearer ${s}`)}catch(s){}return e}),At.interceptors.response.use(e=>e,e=>{var t;return 401===(null==(t=e.response)?void 0:t.status)&&(localStorage.removeItem("auth_tokens"),window.location.href="/landing"),Promise.reject(e)});const Pt=new class{async generateTemplates(e){try{const t=this.buildPrompt(e),s=await At.post(St,{prompt:t,max_tokens:12e3,temperature:.7}),a=this.extractGeneratedText(s.data);if(!a)throw new Error("No text generated from API");let l=this.parseGeneratedTemplates(a);if(0===l.length)throw new Error("Failed to parse templates from API response - JSON may be incomplete");if(l.length<2){const t=this.generateComplementaryTemplate(l[0],e);l.push(t)}return l.forEach((e,t)=>{}),l}catch(t){throw Error,t}}buildPrompt(e){var t;const s=(null==(t=e.websiteUrls)?void 0:t.length)?`\nWebsite URLs for context: ${e.websiteUrls.join(", ")}`:"",a=e.subIndustry?`\nSub-industry: ${e.subIndustry}`:"";return`You are an AI assistant that creates professional AI Employee templates for businesses. Based on the following business information, generate AT LEAST 2 (preferably 3-5) DIFFERENT AI Employee template recommendations in JSON format with COMPREHENSIVE, PROFESSIONAL system prompts.\n\nCompany Name: ${e.companyName}\nBusiness Process: ${e.businessProcess}\nIndustry: ${e.industry}${a}${s}\n${e.additionalContext?`Additional Context: ${e.additionalContext}`:""}\n\nCRITICAL: Generate a minimum of 2 templates. Each template should be distinct and offer a different approach or perspective for the AI Employee.\n\nIMPORTANT: The systemPrompt field must be COMPREHENSIVE and follow this professional structure:\n\n## System Prompt Structure (REQUIRED):\nThe systemPrompt should include ALL of these sections with detailed content:\n\n1. **Identity & Purpose** - Who the AI is and their primary goal\n2. **Voice & Persona** - Personality traits and speech characteristics\n3. **Conversation Flow** - Step-by-step conversation process with specific phrases to use\n4. **Response Guidelines** - Rules for how to respond (concise, confirm details, etc.)\n5. **Scenario Handling** - Detailed handling for 3-4 common scenarios with specific steps\n6. **Knowledge Base** - Key information the AI should know\n7. **Call Management** - How to handle delays, technical issues, multiple requests\n\nFor each template, provide:\n1. A professional name for the AI Employee (MUST BE UNIQUE)\n2. A concise description (2-3 sentences)\n3. An appropriate emoji icon\n4. 3-4 key features\n5. A COMPREHENSIVE systemPrompt (following the structure above - this is the MOST IMPORTANT field)\n6. First message/greeting for starting conversations\n7. Industry focus\n8. Recommended tone/personality\n9. Suggested gender (Male, Female, Neutral, or Not Specified)\n10. Recommended voice type\n11. Personality traits\n12. Manual knowledge base content\n13. Opening script\n14. Key talking points\n15. Closing script\n16. 2-3 common objections with responses\n17. 2-3 example conversation exchanges\n18. 2-3 intent examples\n\nReturn ONLY a valid JSON array with AT LEAST 2 objects containing all above fields. No markdown, no explanation, just valid JSON array.\n\nExample format: [\n  {\n    "name": "Professional Appointment Coordinator",\n    "description": "Efficiently schedules and manages appointments with clear communication.",\n    "icon": "üìÖ",\n    "features": ["Smart Scheduling", "Appointment Confirmation", "Rescheduling"],\n    "systemPrompt": "## Identity & Purpose\\n\\nYou are [AI Employee Name], an appointment scheduling assistant for [Company Name]. Your purpose is to efficiently manage appointments.\\n\\n## Voice & Persona\\n\\n### Personality\\n- Sound friendly and organized\\n- Be patient and helpful\\n\\n### Speech Characteristics\\n- Use clear language\\n- Confirm details explicitly\\n\\n## Conversation Flow\\n\\n### Scheduling\\n1. Identify appointment type\\n2. Check availability\\n3. Confirm booking\\n\\n## Response Guidelines\\n- Ask one question at a time\\n- Confirm all details\\n\\n## Scenario Handling\\n\\n### New Customers\\n1. Collect information\\n2. Explain process\\n\\n### Rescheduling\\n1. Find existing appointment\\n2. Offer alternatives\\n\\n## Call Management\\n- If checking: 'One moment please.'",\n    "firstMessage": "Thank you for calling [Company Name]. How may I help you today?",\n    "industryFocus": "Healthcare, Services",\n    "tone": "Friendly",\n    "gender": "Female",\n    "voice": "Professional",\n    "personality": "Organized",\n    "manualKnowledge": "Appointment types, policies, availability.",\n    "openingScript": "Thank you for calling. How may I help?",\n    "keyTalkingPoints": "‚Ä¢ Identify need ‚Ä¢ Offer options ‚Ä¢ Confirm details",\n    "closingScript": "Your appointment is confirmed. Is there anything else?",\n    "objections": [{"objection": "Times dont work", "response": "Let me find other options."}],\n    "conversationExamples": [{"customerInput": "I need an appointment", "expectedResponse": "I can help. What type of appointment?"}],\n    "intents": [{"name": "Schedule", "phrases": "book, schedule", "response": "I can help schedule that."}]\n  }\n]`}extractGeneratedText(e){var t;if(e.data){if(null==(t=e.data.generation)?void 0:t.response)return e.data.generation.response;if(e.data.response)return e.data.response;if("string"==typeof e.data)return e.data}return""}parseGeneratedTemplates(e){try{let s,a=e.replace(/^```json\s*\n?/,"").replace(/^```\s*\n?/,"").replace(/\n?```\s*$/,""),l=a.match(/\[[\s\S]*\]/);if(!l){const e=a.indexOf("[");if(-1===e)return[];a=a.substring(e),a=this.repairIncompleteJSON(a)}try{const e=l?l[0]:a;s=JSON.parse(e)}catch(t){return this.fallbackParsing(a)}return Array.isArray(s)||(s=[s]),s.forEach((e,t)=>{}),s.map(e=>({name:e.name||"Unnamed Template",description:e.description||"",icon:e.icon||"ü§ñ",features:Array.isArray(e.features)?e.features:["AI-powered assistance"],systemPrompt:e.systemPrompt||"",firstMessage:e.firstMessage||"Hello! I am [AI Employee Name] from [Company Name], here to assist you. How can I help you today?",industryFocus:e.industryFocus||"",tone:e.tone||"Professional",gender:e.gender||"Not Specified",voice:e.voice||"Professional",personality:e.personality||"Helpful",manualKnowledge:e.manualKnowledge||"",websiteUrls:Array.isArray(e.websiteUrls)?e.websiteUrls:[],openingScript:e.openingScript||"Hi there! Thanks for reaching out. How can I help?",keyTalkingPoints:e.keyTalkingPoints||"‚Ä¢ Quality service is our priority\n‚Ä¢ We're here to help",closingScript:e.closingScript||"Thank you for contacting us. Have a great day!",objections:Array.isArray(e.objections)?e.objections:[],conversationExamples:Array.isArray(e.conversationExamples)?e.conversationExamples:[],intents:Array.isArray(e.intents)?e.intents:[]}))}catch(s){return[]}}repairIncompleteJSON(e){let t=e,s=0,a=0,l=!1,r=!1,n=-1,i=-1;for(let o=0;o<e.length;o++){const t=e[o];r?r=!1:"\\"!==t?('"'!==t||r||(l=!l),l||("{"===t?(s++,n=o):"}"===t?s--:"["===t?(a++,i=o):"]"===t&&a--)):r=!0}if(l&&n>i){const l=e.lastIndexOf(",",n);l>-1&&(t=e.substring(0,l),s=1,a=1)}if((t.match(/"/g)||[]).length%2==1){const e=t.lastIndexOf('"');e>-1&&(t=t.substring(0,e))}s=0,a=0,l=!1,r=!1;for(let o=0;o<t.length;o++){const e=t[o];r?r=!1:"\\"!==e?('"'!==e||r||(l=!l),l||("{"===e?s++:"}"===e?s--:"["===e?a++:"]"===e&&a--)):r=!0}for(;s>0;)t+="}",s--;for(;a>1;)t+="]",a--;return t}fallbackParsing(e){const t=[];if(this.findObjectBoundaries(e).forEach((s,a)=>{try{const a=e.substring(s.start,s.end);try{const e=JSON.parse(a);return void t.push(this.normalizeTemplate(e))}catch(l){const e=this.repairIncompleteJSON(a);try{const s=JSON.parse(e);t.push(this.normalizeTemplate(s))}catch(r){}}}catch(n){}}),0===t.length){const s=e.match(/"name"\s*:\s*"([^"]+)"/),a=e.match(/"description"\s*:\s*"([^"]+)"/);s&&t.push({name:s[1],description:a?a[1]:"AI-powered assistant",icon:"ü§ñ",features:["AI Assistance","Customer Support"],systemPrompt:"",firstMessage:"Hello! I am [AI Employee Name] from [Company Name], here to assist you. How can I help you today?",industryFocus:"",tone:"Professional",gender:"Not Specified",voice:"Professional",personality:"Helpful",manualKnowledge:"",websiteUrls:[],openingScript:"Thank you for contacting us. How can I help?",keyTalkingPoints:"‚Ä¢ Quality service\n‚Ä¢ Customer satisfaction",closingScript:"Thank you for your time!",objections:[],conversationExamples:[],intents:[]})}return t}findObjectBoundaries(e){const t=[];let s=0,a=!1,l=!1,r=-1;for(let n=0;n<e.length;n++){const i=e[n];l?l=!1:"\\"!==i?'"'!==i?a||("{"===i?(0===s&&(r=n),s++):"}"===i&&(s--,0===s&&-1!==r&&(t.push({start:r,end:n+1}),r=-1))):a=!a:l=!0}return t}generateComplementaryTemplate(e,t){var s,a,l,r,n,i,o;const d=(null==(s=e.personality)?void 0:s.toLowerCase().includes("friendly"))||(null==(a=e.personality)?void 0:a.toLowerCase().includes("empathetic"))||(null==(l=e.tone)?void 0:l.toLowerCase().includes("friendly")),c=(null==(r=e.name)?void 0:r.toLowerCase().includes("sales"))||(null==(n=t.businessProcess)?void 0:n.toLowerCase().includes("sales")),m=(null==(i=e.name)?void 0:i.toLowerCase().includes("support"))||(null==(o=t.businessProcess)?void 0:o.toLowerCase().includes("support"));let u,x,h,p,g,b,f,v;return c?(u=`${t.companyName} Customer Care Specialist`,x=`A dedicated customer support specialist for ${t.companyName} that handles inquiries with care and professionalism.`,h="üéß",p=["Customer Support","Issue Resolution","FAQ Handling","Follow-up Care"],g="Empathetic and Patient",b="Warm and Supportive",f=`You are a caring customer support specialist for ${t.companyName}. Help customers with their questions, resolve issues efficiently, and ensure a positive experience. Be patient, understanding, and solution-oriented.`,v=`Hello! I am [AI Employee Name] from ${t.companyName}, here to assist you with any questions or concerns. How can I help you today?`):m?(u=`${t.companyName} Sales Advisor`,x=`A professional sales advisor for ${t.companyName} that engages prospects and guides them toward solutions.`,h="üíº",p=["Lead Engagement","Product Guidance","Consultation Booking","Value Communication"],g="Confident and Persuasive",b="Professional and Engaging",f=`You are a professional sales advisor for ${t.companyName}. Engage prospects warmly, understand their needs, present value propositions effectively, and guide them toward making informed decisions.`,v=`Hello! I am [AI Employee Name] from ${t.companyName}, here to assist you. I'd love to learn more about your needs and how we can help. What brings you here today?`):d?(u=`${t.companyName} Professional Consultant`,x=`A professional consultant for ${t.companyName} with a formal, business-focused approach.`,h="üëî",p=["Professional Consultation","Expert Guidance","Detailed Analysis","Strategic Advice"],g="Analytical and Direct",b="Formal and Professional",f=`You are a professional consultant for ${t.companyName}. Provide expert guidance with a formal, business-focused approach. Be thorough, analytical, and solution-oriented.`,v=`Hello! I am [AI Employee Name] from ${t.companyName}, here to assist you. How may I help you today?`):(u=`${t.companyName} Friendly Assistant`,x=`A warm and approachable assistant for ${t.companyName} that creates a welcoming experience.`,h="üòä",p=["Friendly Assistance","Personalized Help","Easy Communication","Supportive Guidance"],g="Friendly and Approachable",b="Warm and Conversational",f=`You are a friendly and approachable assistant for ${t.companyName}. Create a warm, welcoming experience while helping customers with their needs. Be personable, helpful, and easy to talk to.`,v=`Hello! I am [AI Employee Name] from ${t.companyName}, here to assist you! I'm happy to help with anything you need. What can I do for you today?`),{name:u,description:x,icon:h,features:p,systemPrompt:f,firstMessage:v,industryFocus:t.industry||"",tone:b,gender:"Female"===e.gender?"Male":"Female",voice:d?"Professional":"Friendly",personality:g,manualKnowledge:e.manualKnowledge||"",websiteUrls:t.websiteUrls||[],openingScript:`Thank you for contacting ${t.companyName}. How can I assist you today?`,keyTalkingPoints:e.keyTalkingPoints||"‚Ä¢ We're here to help\n‚Ä¢ Your satisfaction is our priority",closingScript:`Thank you for choosing ${t.companyName}. Is there anything else I can help with?`,objections:e.objections||[],conversationExamples:e.conversationExamples||[],intents:e.intents||[]}}normalizeTemplate(e){return{name:e.name||"Unnamed Template",description:e.description||"",icon:e.icon||"ü§ñ",features:Array.isArray(e.features)?e.features:["AI-powered assistance"],systemPrompt:e.systemPrompt||"",firstMessage:e.firstMessage||"Hello! I am [AI Employee Name] from [Company Name], here to assist you. How can I help you today?",industryFocus:e.industryFocus||"",tone:e.tone||"Professional",gender:e.gender||"Not Specified",voice:e.voice||"Professional",personality:e.personality||"Helpful",manualKnowledge:e.manualKnowledge||"",websiteUrls:Array.isArray(e.websiteUrls)?e.websiteUrls:[],openingScript:e.openingScript||"Hi there! How can I help?",keyTalkingPoints:e.keyTalkingPoints||"‚Ä¢ Quality service",closingScript:e.closingScript||"Thank you for your time!",objections:Array.isArray(e.objections)?e.objections:[],conversationExamples:Array.isArray(e.conversationExamples)?e.conversationExamples:[],intents:Array.isArray(e.intents)?e.intents:[]}}async enhanceTemplate(e,t){try{const s=`You are an AI assistant that enhances AI Employee templates. Given the following template name and business context, provide an enhanced version with optimized system prompt and features.\n\nTemplate Name: ${e}\nCompany: ${t.companyName}\nBusiness Process: ${t.businessProcess}\nIndustry: ${t.industry}\n\nReturn a JSON object with: name, description, icon, features (array), systemPrompt, industryFocus, and tone.`,a=await At.post(St,{prompt:s,max_tokens:1500,temperature:.7}),l=this.extractGeneratedText(a.data);return this.parseGeneratedTemplates(l)[0]||{name:e,description:"",icon:"ü§ñ",features:[]}}catch(s){throw s}}};const Et=new class{constructor(){this.room=null,this.isConnected=!1,this.isConnecting=!1,this.callbacks=null,this.lastSentMessage=null,this.localAudioTrack=null,this.remoteAudioTrack=null}async loadLiveKitSDK(){return new Promise((e,t)=>{if(void 0!==window.LivekitClient)return void e();const s=document.createElement("script");s.src="https://unpkg.com/livekit-client@latest/dist/livekit-client.umd.js",s.onload=()=>{e()},s.onerror=()=>{t(new Error("Failed to load LiveKit client"))},document.head.appendChild(s)})}setCallbacks(e){this.callbacks=e}async connect(e,t="en-US"){var s,a,l,r;try{if(this.isConnecting||this.isConnected)return;if(this.isConnecting=!0,null==(s=this.callbacks)||s.onStatusUpdate("Loading LiveKit...","connecting"),void 0===window.LivekitClient&&(await this.loadLiveKitSDK(),void 0===window.LivekitClient))throw new Error("LiveKit not available after loading");if(null==(a=this.callbacks)||a.onStatusUpdate("Connecting...","connecting"),!this.isConnecting)return;const l=/Mobile|Android|iPhone/i.test(navigator.userAgent)?"mobile":"desktop",r=`call_${Date.now()}`,n=await fetch("https://python.service.callshivai.com/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agent_id:e,language:t,call_id:r,device:l,user_agent:navigator.userAgent})});if(!n.ok){const e=await n.text();throw new Error(`Failed to get LiveKit token: ${n.status} - ${e}`)}const i=await n.json();if(!this.isConnecting)return;window.pendingAudioElement&&(window.pendingAudioElement.play().catch(e=>{}),window.pendingAudioElement=null);const o={echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,suppressLocalAudioPlayback:!0,channelCount:1,sampleRate:48e3,sampleSize:16,volume:.5,latency:.1,facingMode:"user",deviceId:"default",googEchoCancellation:!0,googAutoGainControl:!0,googNoiseSuppression:!0,googHighpassFilter:!0,googAudioMirroring:!1,googBeamforming:!1,googArrayGeometry:!1,mozAutoGainControl:!0,mozNoiseSuppression:!0},d=window.LivekitClient,c={adaptiveStream:!0,dynacast:!0,audioCaptureDefaults:{...o,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,suppressLocalAudioPlayback:!0},reconnectPolicy:{nextRetryDelayInMs:()=>2e3},publishDefaults:{audioPreset:d.AudioPresets.speech,dtx:!0,red:!1,simulcast:!1},e2eeEnabled:!1,expWebAudioMix:!1};if(this.room=new d.Room(c),this.setupRoomEvents(d,o),await this.room.connect(i.url,i.token),!this.isConnecting)return void(this.room&&(this.room.disconnect(),this.room=null))}catch(n){this.isConnecting=!1,this.isConnected=!1;let e="Connection failed";n instanceof Error&&(n.message.includes("token")?e="Authentication failed":n.message.includes("timeout")?e="Connection timeout":n.message.includes("network")&&(e="Network error")),null==(l=this.callbacks)||l.onError(e),null==(r=this.callbacks)||r.onStatusUpdate(`‚ùå ${e}`,"disconnected")}}setupRoomEvents(e,t){if(this.room){this.room.on(e.RoomEvent.TrackSubscribed,(t,s,a)=>{if(t.kind===e.Track.Kind.Audio){const e=t.attach();if(e.volume=.4,e.preload="auto",e.autoplay=!0,e.setSinkId)try{e.setSinkId("default")}catch(l){}void 0!==e.webkitAudioDecodedByteCount&&(e.webkitPreservesPitch=!1),document.body.appendChild(e),e.play().catch(t=>{window.pendingAudioElement=e}),this.remoteAudioTrack=t}}),this.room.on(e.RoomEvent.ParticipantMetadataChanged,(e,t)=>{if(e)try{const t=JSON.parse(e);(t.transcript||t.text)&&this.addMessage(!1,t.transcript||t.text,"voice")}catch(s){}}),this.room.on(e.RoomEvent.RoomMetadataChanged,e=>{if(e)try{const t=JSON.parse(e);(t.transcript||t.text)&&this.addMessage(!1,t.transcript||t.text,"voice")}catch(t){}}),this.room.on(e.RoomEvent.Connected,async()=>{var e,t,s,a;this.isConnected=!0,this.isConnecting=!1,null==(e=this.callbacks)||e.onStatusUpdate("ü§ñ AI is Initializing...","connected");try{await this.room.localParticipant.setMicrophoneEnabled(!0,{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,suppressLocalAudioPlayback:!0,channelCount:1,sampleRate:48e3,sampleSize:16,volume:.5,latency:.1,facingMode:"user"})}catch(r){try{await this.room.localParticipant.setMicrophoneEnabled(!0)}catch(n){null==(t=this.callbacks)||t.onError("Failed to enable microphone. Please check your microphone permissions and try again.")}}if(window.AudioContext||window.webkitAudioContext){const e=new(window.AudioContext||window.webkitAudioContext);"suspended"===e.state&&e.resume().then(()=>{}).catch(e=>{})}null==(s=this.callbacks)||s.onStatusUpdate("‚úÖ Connected - Speak now!","connected");const l=Array.from(this.room.localParticipant.audioTrackPublications.values());l.length>0&&(this.localAudioTrack=l[0].track),null==(a=this.callbacks)||a.onConnected()}),this.room.on(e.RoomEvent.Disconnected,e=>{var t,s;this.isConnected=!1,null==(t=this.callbacks)||t.onDisconnected(e),null==(s=this.callbacks)||s.onStatusUpdate("‚ùå Disconnected","disconnected")}),this.room.on(e.RoomEvent.ConnectionStateChanged,t=>{var s,a;null==(s=this.callbacks)||s.onConnectionStateChange(t),t===e.ConnectionState.Disconnected&&(this.isConnected=!1,null==(a=this.callbacks)||a.onStatusUpdate("‚ùå Disconnected","disconnected"))}),this.room.on(e.RoomEvent.DataReceived,(e,t,s,a)=>{var l,r;try{const s=(new TextDecoder).decode(e);if(s&&s.trim().length>0){let e=s.trim(),a=!1;null==t||t.identity;if(["subscribed","connected","disconnected","enabled","disabled","true","false","null","undefined"].some(e=>s.toLowerCase()===e))return;try{const r=JSON.parse(s),n=["text","transcript","message","content","data","response","speech","voice","audio","words","result","output"];for(const t of n)if(r[t]&&"string"==typeof r[t]&&r[t].trim().length>0){e=r[t].trim(),a=!0;break}let i=!1;if(r.role?i=r.role.includes("user")||r.role.includes("human"):r.speaker?i=r.speaker.includes("user")||r.speaker.includes("human")||r.speaker.includes("You"):t&&(i=t.identity===(null==(l=this.room.localParticipant)?void 0:l.identity)),"transcript"===r.type&&r.text)return void("user"===r.role?"chat"!==r.type&&this.addMessage(!0,r.text,"voice"):"assistant"===r.role&&this.addMessage(!1,r.text,"voice"));if(a){const t=i;(!i||i&&"chat"!==r.type||i&&"typed"!==r.source)&&this.addMessage(t,e,"voice")}}catch(n){if(s.length>=2&&s.length<=1e3){const s=t&&t.identity===(null==(r=this.room.localParticipant)?void 0:r.identity);this.addMessage(s,e,"voice")}}}}catch(i){}});try{"function"==typeof this.room.registerTextStreamHandler&&(this.room.registerTextStreamHandler("lk.transcription",async(e,t)=>{var s,a,l,r;try{const n=e.info,i=(null==(s=n.attributes)||s["lk.transcription_final"],null==(a=n.attributes)||a["lk.transcribed_track_id"],null==(l=n.attributes)||l["lk.segment_id"],await e.readAll());if(i&&i.trim()){const e=t.identity===(null==(r=this.room.localParticipant)?void 0:r.identity);if(e&&this.lastSentMessage&&i.trim()===this.lastSentMessage.trim())return;this.addMessage(e,i,"voice")}}catch(n){}}),this.room.registerTextStreamHandler("lk.chat",async(e,t)=>{var s;try{const a=await e.readAll();!(t.identity===(null==(s=this.room.localParticipant)?void 0:s.identity))&&a&&a.trim()&&this.addMessage(!1,a,"chat")}catch(a){}}))}catch(s){}}}addMessage(e,t,s="voice"){if(!this.callbacks)return;const a={id:Date.now()+Math.random(),text:t.trim(),isUser:e,timestamp:new Date,source:s};this.callbacks.onMessage(a)}async sendMessage(e){var t;if(this.room&&this.isConnected&&e.trim())try{if("function"==typeof this.room.localParticipant.sendText)await this.room.localParticipant.sendText(e,{topic:"lk.chat"});else{const t={type:"chat",text:e,timestamp:Date.now(),source:"typed"},s=(new TextEncoder).encode(JSON.stringify(t));this.room.localParticipant.publishData(s,{reliable:!0})}this.addMessage(!0,e,"chat"),this.lastSentMessage=e}catch(s){null==(t=this.callbacks)||t.onError("Failed to send message")}}async disconnect(){if(this.room){this.isConnecting=!1,this.isConnected=!1;try{await this.room.disconnect()}catch(e){}this.room=null,this.localAudioTrack=null,this.remoteAudioTrack=null}}async toggleMute(){if(!this.room||!this.isConnected)return!1;try{const e=this.room.localParticipant.isMicrophoneEnabled;return await this.room.localParticipant.setMicrophoneEnabled(!e),!e}catch(e){return!1}}getStatus(){return{isConnected:this.isConnected,isConnecting:this.isConnecting}}};const It=new class{constructor(){this.socket=null,this.globalCallback=null,this.isConnected=!1,this.isLoading=!1}async loadSocketIO(){if(!window.io)return this.isLoading?new Promise(e=>{const t=setInterval(()=>{!window.io&&this.isLoading||(clearInterval(t),e())},100)}):(this.isLoading=!0,new Promise((e,t)=>{const s=document.createElement("script");s.src="https://cdn.socket.io/4.5.4/socket.io.min.js",s.async=!0,s.onload=()=>{this.isLoading=!1,e()},s.onerror=()=>{this.isLoading=!1,t(new Error("Failed to load Socket.IO"))},document.head.appendChild(s)}))}async connect(e){var t;if(!(null==(t=this.socket)?void 0:t.connected))try{await this.loadSocketIO(),this.socket=window.io("https://nodejs.service.callshivai.com",{transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,timeout:1e4}),this.socket.onAny((e,...t)=>{}),this.socket.on("connect",()=>{this.isConnected=!0,setTimeout(()=>{var t;null==(t=this.socket)||t.emit("join-user-room",e)},500)}),this.socket.on("kb-progress",e=>{this.globalCallback&&this.globalCallback(e)}),this.socket.on("disconnect",()=>{this.isConnected=!1}),this.socket.on("connect_error",e=>{}),this.socket.on("error",e=>{})}catch(s){}}onProgress(e){this.globalCallback=e}clearCallback(){this.globalCallback=null}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null,this.isConnected=!1,this.globalCallback=null)}getConnectionStatus(){return this.isConnected}},Tt=()=>{var a,l,g,b;const{id:w}=r(),j=n(),k=i(),[S,he]=o(),{agents:ge,currentAgent:ye,setCurrentAgent:we,publishAgentStatus:je,unpublishAgentStatus:ke,refreshAgents:Ne,deleteAgent:Ce}=d(),{user:Se}=c(),Ae=T(null==Se?void 0:Se.email),Pe=k.pathname.includes("/train"),Ee=w&&!Pe,Ie=!w,[Te,Me]=e.useState({name:"",gender:"Female",businessProcess:"",industry:"",persona:"Empathetic",language:"English (US)",voice:"Sarah - Professional",customInstructions:"",guardrailsLevel:"Medium",responseStyle:"Balanced",maxResponseLength:"Medium (150 words)",contextWindow:"Standard (8K tokens)",temperature:50}),[Le,De]=e.useState(""),[Re,Fe]=e.useState("newest"),[Be,Ue]=e.useState("all"),[_e,Oe]=e.useState(!1),[$e,He]=e.useState([]),[ze,Ge]=e.useState(0),[We,Ke]=e.useState(0),[qe,Je]=e.useState(!1),Ve=parseInt(S.get("page")||"1",10),[Ye,Qe]=e.useState(!1),[Xe,Ze]=e.useState(!1),[et,tt]=e.useState(!1),[st,at]=e.useState(null),[lt,rt]=e.useState(!1),[nt,it]=e.useState(!1),[ot,dt]=e.useState(null),[ct,mt]=e.useState(!1),[ut,xt]=e.useState(!1),[ht,pt]=e.useState(null),[gt,bt]=e.useState(!1),[ft,vt]=e.useState(!1),[yt,wt]=e.useState(null),[jt,kt]=e.useState("call"),[Nt,St]=e.useState(!1),[At,Tt]=e.useState(0),[Mt,Lt]=e.useState(null),[Dt,Rt]=e.useState([{id:"1",text:`Hello! I am ${(null==ye?void 0:ye.name)||"your AI assistant"}${(null==Se?void 0:Se.company)?` from ${Se.company}`:""}, here to assist you. How can I help you today?`,isUser:!1,timestamp:new Date}]),[Ft,Bt]=e.useState(""),Ut=e.useRef(new Set),_t=e.useRef(0),[Ot,$t]=e.useState(!1),[Ht,zt]=e.useState(!1),[Gt,Wt]=e.useState(1),[Kt,qt]=e.useState(0),[Jt,Vt]=e.useState(0),[Yt,Qt]=e.useState(0),[Xt,Zt]=e.useState(0),[es,ts]=e.useState({companyName:"",aiEmployeeName:"",businessProcess:"",industry:"",subIndustry:"",websiteUrls:[""],socialMediaUrls:[""],uploadedFiles:[],uploadedFileUrls:[],selectedTemplate:null}),[ss,as]=e.useState(!1),[ls,rs]=e.useState(!1),[ns,is]=e.useState(null),[os,ds]=e.useState(!1),[cs,ms]=e.useState(null),[us,xs]=e.useState([]),[hs,ps]=e.useState(!1),[gs,bs]=e.useState(0),[fs,vs]=e.useState(null),ys=e=>e?e.replace(/\[AI Employee Name\]/g,es.aiEmployeeName||"AI Assistant").replace(/\[Company Name\]/g,es.companyName||"Company").replace(/\[Company\]/g,es.companyName||"Company").replace(/\[Business Name\]/g,es.companyName||"Company").replace(/\[Store Name\]/g,es.companyName||"Company").replace(/\[Clinic Name\]/g,es.companyName||"Company").replace(/\[Real Estate Company\]/g,es.companyName||"Company").replace(/\[Agent Name\]/g,es.aiEmployeeName||"AI Assistant"):"",ws=[{value:"customer-support",label:"Customer Support",icon:"üéß"},{value:"sales-marketing",label:"Sales & Marketing",icon:"üíº"},{value:"appointment-setting",label:"Appointment Setting",icon:"üìÖ"},{value:"lead-qualification",label:"Lead Qualification",icon:"üéØ"},{value:"technical-support",label:"Technical Support",icon:"üîß"},{value:"order-processing",label:"Order Processing",icon:"üì¶"},{value:"billing-inquiries",label:"Billing Inquiries",icon:"üí≥"},{value:"onboarding",label:"Customer Onboarding",icon:"üöÄ"}],js=[{value:"real-estate",label:"Real Estate",icon:"üè†"},{value:"healthcare",label:"Healthcare",icon:"üè•"},{value:"dental",label:"Dental",icon:"ü¶∑"},{value:"fitness",label:"Fitness & Wellness",icon:"üí™"},{value:"education",label:"Education",icon:"üéì"},{value:"finance",label:"Finance & Banking",icon:"üè¶"},{value:"insurance",label:"Insurance",icon:"üõ°Ô∏è"},{value:"ecommerce",label:"E-commerce",icon:"üõí"},{value:"retail",label:"Retail",icon:"üè™"},{value:"technology",label:"Technology",icon:"üíª"},{value:"saas",label:"SaaS",icon:"‚òÅÔ∏è"},{value:"legal",label:"Legal Services",icon:"‚öñÔ∏è"},{value:"hospitality",label:"Hospitality",icon:"üè®"},{value:"restaurants",label:"Restaurants",icon:"üçΩÔ∏è"},{value:"automotive",label:"Automotive",icon:"üöó"},{value:"beauty",label:"Beauty & Salon",icon:"üíá"},{value:"home-services",label:"Home Services",icon:"üè†"},{value:"other",label:"Other",icon:"üìã"}],ks={"real-estate":[{value:"residential",label:"Residential Sales"},{value:"commercial",label:"Commercial Real Estate"},{value:"property-management",label:"Property Management"},{value:"luxury-real-estate",label:"Luxury Real Estate"},{value:"vacation-rentals",label:"Vacation Rentals"},{value:"real-estate-investment",label:"Real Estate Investment"},{value:"land-sales",label:"Land & Lot Sales"},{value:"real-estate-appraisal",label:"Real Estate Appraisal"}],healthcare:[{value:"hospitals",label:"Hospitals"},{value:"clinics",label:"General Clinics"},{value:"mental-health",label:"Mental Health Services"},{value:"home-healthcare",label:"Home Healthcare"},{value:"urgent-care",label:"Urgent Care Centers"},{value:"specialized-clinics",label:"Specialized Clinics"},{value:"diagnostic-centers",label:"Diagnostic Centers"},{value:"rehabilitation",label:"Rehabilitation Centers"},{value:"telemedicine",label:"Telemedicine"},{value:"nursing-homes",label:"Nursing Homes"}],dental:[{value:"general-dentistry",label:"General Dentistry"},{value:"orthodontics",label:"Orthodontics"},{value:"cosmetic-dentistry",label:"Cosmetic Dentistry"},{value:"pediatric-dentistry",label:"Pediatric Dentistry"},{value:"periodontics",label:"Periodontics"},{value:"endodontics",label:"Endodontics"},{value:"oral-surgery",label:"Oral Surgery"},{value:"dental-implants",label:"Dental Implants"}],fitness:[{value:"gyms",label:"Gyms & Fitness Centers"},{value:"yoga-studios",label:"Yoga Studios"},{value:"personal-training",label:"Personal Training"},{value:"crossfit",label:"CrossFit Gyms"},{value:"pilates",label:"Pilates Studios"},{value:"martial-arts",label:"Martial Arts & Boxing"},{value:"dance-studios",label:"Dance Studios"},{value:"sports-facilities",label:"Sports Facilities"},{value:"wellness-centers",label:"Wellness Centers"}],education:[{value:"k12",label:"K-12 Schools"},{value:"higher-education",label:"Higher Education"},{value:"online-learning",label:"Online Learning Platforms"},{value:"tutoring",label:"Tutoring Services"},{value:"vocational-training",label:"Vocational Training"},{value:"language-schools",label:"Language Schools"},{value:"test-prep",label:"Test Preparation"},{value:"preschool",label:"Preschool & Daycare"}],finance:[{value:"banking",label:"Banking Services"},{value:"investment",label:"Investment Services"},{value:"wealth-management",label:"Wealth Management"},{value:"accounting",label:"Accounting Services"},{value:"financial-planning",label:"Financial Planning"},{value:"tax-services",label:"Tax Services"},{value:"mortgage-lending",label:"Mortgage Lending"},{value:"credit-unions",label:"Credit Unions"}],insurance:[{value:"health-insurance",label:"Health Insurance"},{value:"life-insurance",label:"Life Insurance"},{value:"auto-insurance",label:"Auto Insurance"},{value:"property-insurance",label:"Property Insurance"},{value:"business-insurance",label:"Business Insurance"},{value:"travel-insurance",label:"Travel Insurance"},{value:"disability-insurance",label:"Disability Insurance"}],ecommerce:[{value:"fashion",label:"Fashion & Apparel"},{value:"electronics",label:"Electronics"},{value:"food-beverage",label:"Food & Beverage"},{value:"home-decor",label:"Home Decor"},{value:"beauty-products",label:"Beauty Products"},{value:"sporting-goods",label:"Sporting Goods"},{value:"toys-games",label:"Toys & Games"},{value:"books-media",label:"Books & Media"},{value:"pet-supplies",label:"Pet Supplies"}],retail:[{value:"grocery",label:"Grocery Stores"},{value:"fashion-retail",label:"Fashion Retail"},{value:"electronics-retail",label:"Electronics Retail"},{value:"home-improvement",label:"Home Improvement"},{value:"department-stores",label:"Department Stores"},{value:"specialty-retail",label:"Specialty Retail"},{value:"convenience-stores",label:"Convenience Stores"},{value:"furniture-stores",label:"Furniture Stores"}],technology:[{value:"software-development",label:"Software Development"},{value:"it-services",label:"IT Services & Consulting"},{value:"cybersecurity",label:"Cybersecurity"},{value:"cloud-services",label:"Cloud Services"},{value:"data-analytics",label:"Data Analytics"},{value:"ai-ml",label:"AI & Machine Learning"},{value:"mobile-development",label:"Mobile App Development"},{value:"web-development",label:"Web Development"}],saas:[{value:"crm",label:"CRM Software"},{value:"erp",label:"ERP Software"},{value:"marketing-automation",label:"Marketing Automation"},{value:"project-management",label:"Project Management"},{value:"hr-software",label:"HR & Payroll Software"},{value:"accounting-software",label:"Accounting Software"},{value:"collaboration-tools",label:"Collaboration Tools"},{value:"analytics-platforms",label:"Analytics Platforms"}],legal:[{value:"corporate-law",label:"Corporate Law"},{value:"family-law",label:"Family Law"},{value:"immigration-law",label:"Immigration Law"},{value:"criminal-law",label:"Criminal Defense"},{value:"real-estate-law",label:"Real Estate Law"},{value:"estate-planning",label:"Estate Planning"},{value:"personal-injury",label:"Personal Injury"},{value:"intellectual-property",label:"Intellectual Property"}],hospitality:[{value:"hotels",label:"Hotels & Motels"},{value:"resorts",label:"Resorts & Spas"},{value:"event-venues",label:"Event Venues"},{value:"bed-breakfast",label:"Bed & Breakfast"},{value:"vacation-rentals",label:"Vacation Rentals"},{value:"hostels",label:"Hostels"},{value:"conference-centers",label:"Conference Centers"}],restaurants:[{value:"fine-dining",label:"Fine Dining"},{value:"casual-dining",label:"Casual Dining"},{value:"fast-food",label:"Fast Food & QSR"},{value:"cafes",label:"Cafes & Coffee Shops"},{value:"food-trucks",label:"Food Trucks"},{value:"bakeries",label:"Bakeries & Pastry Shops"},{value:"catering",label:"Catering Services"},{value:"bars-pubs",label:"Bars & Pubs"},{value:"buffets",label:"Buffets"}],automotive:[{value:"dealerships",label:"Car Dealerships"},{value:"auto-repair",label:"Auto Repair & Maintenance"},{value:"car-rental",label:"Car Rental Services"},{value:"auto-parts",label:"Auto Parts & Accessories"},{value:"car-wash",label:"Car Wash & Detailing"},{value:"body-shops",label:"Body Shops & Collision Repair"},{value:"tire-services",label:"Tire Services"},{value:"oil-change",label:"Oil Change & Lube"},{value:"auto-glass",label:"Auto Glass Repair"},{value:"towing",label:"Towing Services"}],beauty:[{value:"hair-salons",label:"Hair Salons"},{value:"nail-salons",label:"Nail Salons"},{value:"med-spas",label:"Medical Spas"},{value:"barbershops",label:"Barbershops"},{value:"day-spas",label:"Day Spas"},{value:"cosmetics",label:"Cosmetics & Makeup"},{value:"tattoo-piercing",label:"Tattoo & Piercing"},{value:"waxing",label:"Waxing & Threading"},{value:"aesthetic-clinics",label:"Aesthetic Clinics"}],"home-services":[{value:"plumbing",label:"Plumbing Services"},{value:"electrical",label:"Electrical Services"},{value:"hvac",label:"HVAC Services"},{value:"cleaning",label:"Cleaning Services"},{value:"landscaping",label:"Landscaping & Lawn Care"},{value:"pest-control",label:"Pest Control"},{value:"roofing",label:"Roofing Services"},{value:"painting",label:"Painting Services"},{value:"moving",label:"Moving Services"},{value:"handyman",label:"Handyman Services"},{value:"carpet-cleaning",label:"Carpet Cleaning"},{value:"window-cleaning",label:"Window Cleaning"}],other:[{value:"general",label:"General Business"},{value:"custom",label:"Custom Industry"},{value:"non-profit",label:"Non-Profit Organization"},{value:"government",label:"Government Services"}]},Ns=()=>I(es.businessProcess,es.industry,es.subIndustry),Cs=async()=>{if(Gt<6){const e=Gt+1;Wt(e),6===e&&await Ss()}},Ss=async()=>{ps(!0),vs(null),bs(0);const e=setInterval(()=>{bs(e=>e>=90?e:Math.min(90,e+15*Math.random()))},400);try{const t=await Pt.generateTemplates({companyName:es.companyName,businessProcess:es.businessProcess,industry:es.industry,subIndustry:es.subIndustry,websiteUrls:es.websiteUrls.filter(e=>e.trim()),additionalContext:es.aiEmployeeName?`The AI employee will be named: ${es.aiEmployeeName}`:void 0});clearInterval(e),bs(100),xs(t)}catch(t){clearInterval(e),vs(t instanceof Error?t.message:"Failed to generate templates");const s=Ns();xs(s.map(e=>({name:e.template.name,description:e.template.description,icon:e.template.icon,features:e.template.features}))),bs(100)}finally{setTimeout(()=>{ps(!1),bs(0)},500)}},As=()=>{Gt>1&&Wt(Gt-1)},Ps=()=>{Fs||(zt(!1),Wt(1),qt(0),Vt(0),Qt(0),Zt(0),xs([]),vs(null),Bs(!1),_s(null),ts({companyName:"",aiEmployeeName:"",businessProcess:"",industry:"",subIndustry:"",websiteUrls:[""],socialMediaUrls:[""],uploadedFiles:[],uploadedFileUrls:[],selectedTemplate:null}))},Es=async e=>{var t,a;if(0!==e.length){as(!0);try{ts(t=>({...t,uploadedFiles:[...t.uploadedFiles,...e]}));const l=(null==(a=null==(t=(await s.uploadKnowledgeBase(e)).data)?void 0:t.files)?void 0:a.map(e=>e.url))||[];l.length>0&&(ts(e=>({...e,uploadedFileUrls:[...e.uploadedFileUrls,...l]})),m.success(`${e.length} file(s) uploaded successfully!`))}catch(l){m.error("Failed to upload files. Please try again."),ts(t=>({...t,uploadedFiles:t.uploadedFiles.filter(t=>!e.some(e=>e.name===t.name))}))}finally{as(!1)}}},Is=()=>{ts(e=>({...e,websiteUrls:[...e.websiteUrls,""]}))},Ts=()=>{ts(e=>({...e,socialMediaUrls:[...e.socialMediaUrls,""]}))},Ms=async()=>{let e=null;if(es.selectedTemplate){const t=us.find(e=>e.name===es.selectedTemplate);if(t)e=t;else{const t=E[es.selectedTemplate];t&&(e=t)}}if(!es.selectedTemplate)return Ps(),void j("/agents/create",{state:{quickCreateData:es}});Bs(!0),_s({agentId:"",status:"pending",progress:0,message:"Creating agent..."});try{const t=["alloy","echo","fable","onyx","nova","shimmer","sage"];let a="alloy";if(null==e?void 0:e.voice){const s=e.voice.toLowerCase();a=t.includes(s)?s:t[0]}const l=es.websiteUrls.filter(e=>e.trim().length>0),r=es.socialMediaUrls.filter(e=>e.trim().length>0),n=es.uploadedFileUrls,i={name:es.aiEmployeeName,gender:"female",business_process:es.businessProcess,industry:es.industry,personality:(null==e?void 0:e.personality)||"Professional",language:"English (US)",voice:a,custom_instructions:(null==e?void 0:e.description)||"",guardrails_level:"medium",response_style:"Balanced",max_response_length:"Medium (150 words)",context_window:"Standard (8K tokens)",temperature:.5,template:e?{name:e.name,description:ys(e.description),icon:e.icon,features:e.features,systemPrompt:ys(e.systemPrompt),firstMessage:ys(e.firstMessage),openingScript:ys(e.openingScript),keyTalkingPoints:ys(e.keyTalkingPoints),closingScript:ys(e.closingScript),objections:e.objections,conversationExamples:e.conversationExamples}:void 0,website_urls:l,social_media_urls:r,knowledge_base_file_urls:n},o=await s.createAgent(i);_s({agentId:(null==o?void 0:o.id)||"",status:"processing",progress:0,message:"Agent created! Setting up knowledge base..."})}catch(t){Bs(!1),_s(null);const e=t instanceof Error?t.message:"Failed to create agent. Please try again.";m.error(e,{duration:4e3})}},Ls=()=>{switch(Gt){case 1:return es.companyName.trim().length>0&&es.aiEmployeeName.trim().length>0;case 2:return es.businessProcess.length>0;case 3:return es.industry.length>0;case 4:case 5:case 6:return!0;default:return!1}},[Ds,Rs]=e.useState(new Set),[Fs,Bs]=e.useState(!1),[Us,_s]=e.useState(null),[Os,$s]=e.useState("disconnected"),[Hs,zs]=e.useState("Ready to connect"),[Gs,Ws]=e.useState(!1),[Ks,qs]=e.useState(!1),[Js,Vs]=e.useState(!1),[Ys,Qs]=e.useState(null),[Xs,Zs]=e.useState([]),[ea,ta]=e.useState(!1),[sa,aa]=e.useState(null),[la,ra]=e.useState(!1),[na,ia]=e.useState("üìû Ready to start call");e.useEffect(()=>{const e={onMessage:e=>{Rt(t=>[...t,{id:String(e.id),text:e.text,isUser:e.isUser,timestamp:e.timestamp,source:e.source}])},onConnected:()=>{St(!0),$s("connected"),zs("Connected - Speak now!"),$t(!1)},onDisconnected:()=>{St(!1),$s("disconnected"),zs("Disconnected"),$t(!1),Mt&&(clearInterval(Mt),Lt(null)),Tt(0)},onConnectionStateChange:e=>{},onError:e=>{$s("disconnected"),zs(e),$t(!1),St(!1)},onStatusUpdate:(e,t)=>{zs(e),$s(t)}};return Et.setCallbacks(e),()=>{Et.disconnect(),Mt&&clearInterval(Mt)}},[Mt]),e.useEffect(()=>((null==Se?void 0:Se.id)&&(async()=>{if(null==Se?void 0:Se.id)try{await It.connect(Se.id)}catch(e){}})(),()=>{It.clearCallback()}),[null==Se?void 0:Se.id]),e.useEffect(()=>{if(Fs){const e=es.aiEmployeeName;It.onProgress(t=>{_s(t),"completed"===t.status?(Ne(),setTimeout(()=>{Bs(!1),_s(null),zt(!1),Wt(1),xs([]),ts({companyName:"",aiEmployeeName:"",businessProcess:"",industry:"",subIndustry:"",websiteUrls:[""],socialMediaUrls:[""],uploadedFiles:[],uploadedFileUrls:[],selectedTemplate:null}),m.success(`‚úÖ ${e} has been created successfully!`,{duration:3e3}),Fe("newest"),j("/agents?page=1")},500)):"failed"===t.status&&(Bs(!1),_s(null),zt(!1),m.error(t.error||"Knowledge base creation failed.",{duration:5e3}),Ne(),j("/agents?page=1"))})}else It.clearCallback()},[Fs]),e.useEffect(()=>{Ht&&document.activeElement instanceof HTMLElement&&document.activeElement.blur()},[Ht]),e.useEffect(()=>{if(w){const e=ge.find(e=>e.id===w);e&&(we(e),Me({name:e.name,gender:"Female",businessProcess:"",industry:"",persona:e.persona,language:e.language,voice:e.voice,customInstructions:"",guardrailsLevel:"Medium",responseStyle:"Balanced",maxResponseLength:"Medium (150 words)",contextWindow:"Standard (8K tokens)",temperature:50}),Rt([{id:"1",text:`Hello! I am ${e.name}${(null==Se?void 0:Se.company)?` from ${Se.company}`:""}, here to assist you. How can I help you today?`,isUser:!1,timestamp:new Date}]),oa(e.id))}},[w,ge,we]),e.useEffect(()=>{var e;(null==(e=k.state)?void 0:e.refresh)&&(Ne(),j(k.pathname,{replace:!0,state:{}}))},[null==(a=k.state)?void 0:a.refresh,Ne,j,k.pathname]);const oa=async e=>{ta(!0),aa(null);try{const t=await s.getAgentSessions("",e),a=(null==t?void 0:t.sessions)||[];Zs(a)}catch(t){aa(t instanceof Error?t.message:"Failed to load session history"),Zs([])}finally{ta(!1)}},da=e=>{dt(e),it(!0)},ca=async()=>{if(ot){mt(!0);try{Rs(e=>new Set(e).add(ot)),await je(ot),await Ne(),m.success("Agent published successfully!",{duration:3e3}),it(!1),dt(null)}catch(e){m.error(e.message||"Failed to publish agent. Please try again.",{duration:4e3})}finally{mt(!1),Rs(e=>{const t=new Set(e);return t.delete(ot),t})}}},ma=()=>{it(!1),dt(null)},ua=e=>{pt(e),xt(!0)},xa=async()=>{if(ht){bt(!0);try{Rs(e=>new Set(e).add(ht)),await ke(ht),await Ne(),m.success("Agent paused successfully!",{duration:3e3}),xt(!1),pt(null)}catch(e){m.error(e.message||"Failed to pause agent. Please try again.",{duration:4e3})}finally{bt(!1),Rs(e=>{const t=new Set(e);return t.delete(ht),t})}}},ha=()=>{xt(!1),pt(null)},pa=async()=>{if(st){rt(!0);try{await Ce(st),await Ne(),tt(!1),at(null),(null==ye?void 0:ye.id)===st&&j("/agents")}catch(e){alert(e.message||"Failed to delete agent. Please try again.")}finally{rt(!1)}}},ga=()=>{tt(!1),at(null)},ba=async()=>{if(!Ft.trim()||Ot)return;const e=Ft.trim(),t=Date.now();if(t-_t.current<1e3)return;const s=`user-${e}-${Math.floor(t/1e3)}`;if(Ut.current.has(s))Bt("");else{Ut.current.add(s),_t.current=t,setTimeout(()=>{Ut.current.delete(s)},1e4),Bt(""),$t(!0);try{const s={id:`user-chat-${t}-${Math.random()}`,text:e,isUser:!0,timestamp:new Date,source:"chat"};if(Rt(e=>[...e,s]),Ys&&"connected"===Os){const t=window.LivekitClient,s=JSON.stringify({type:"chat",text:e,timestamp:(new Date).toISOString(),source:"typed"}),a=(new TextEncoder).encode(s);await Ys.localParticipant.publishData(a,t.DataPacket_Kind.RELIABLE)}else setTimeout(()=>{const e=["I understand you're looking for help. Let me assist you with that based on my training and configuration.","Thank you for your message. As an AI Employee, I'm designed to help with various tasks in a professional manner.","I appreciate your question. Based on my role as your AI Employee, I'd be happy to provide assistance.","That's an interesting point. As your AI Employee, here's how I can help you.","I see what you're asking about. As an AI Employee, I'm here to provide helpful, accurate information."],t={id:`fallback-${Date.now()}-${Math.random()}`,text:e[Math.floor(Math.random()*e.length)],isUser:!1,timestamp:new Date,source:"chat"};Rt(e=>[...e,t]),$t(!1)},1e3+2e3*Math.random())}catch(a){$t(!1)}}},fa=e.useCallback(async()=>{try{if(qs(!0),ia("üé§ Requesting microphone access..."),$s("connecting"),zs("Initializing call..."),!window.isSecureContext)throw new Error("HTTPS required for microphone access");try{(await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!1,channelCount:1,sampleRate:48e3,sampleSize:16}})).getTracks().forEach(e=>e.stop()),ia("‚úÖ Microphone access granted")}catch(e){const t=e instanceof Error?e.message:"Unknown error";throw new Error(`Microphone access denied: ${t}`)}const t=null==ye?void 0:ye.id;if(!t)throw new Error("Agent ID not found");ia("üîó Getting LiveKit token...");const s=`admin_test_${Date.now()}`,a=await fetch("https://python.service.callshivai.com/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agent_id:t,language:"en-US",call_id:s,device:"desktop",user_agent:navigator.userAgent})});if(!a.ok){const e=await a.text();throw new Error(`Failed to get LiveKit token: ${a.status} - ${e}`)}const l=await a.json();if(ia("üîó Connecting to LiveKit..."),void 0===window.LivekitClient){ia("üì¶ Loading LiveKit SDK...");const e=document.createElement("script");e.src="https://unpkg.com/livekit-client@latest/dist/livekit-client.umd.js",e.onload=()=>{va(l)},e.onerror=()=>{throw new Error("Failed to load LiveKit SDK")},document.head.appendChild(e)}else await va(l)}catch(t){ia(`‚ùå Error: ${t instanceof Error?t.message:"Unknown error"}`),$s("disconnected"),zs("Connection failed"),qs(!1),Vs(!1)}},[ye]),va=e.useCallback(async e=>{try{const t=window.LivekitClient,s=new t.Room({adaptiveStream:!0,dynacast:!0,audioCaptureDefaults:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,suppressLocalAudioPlayback:!0},publishDefaults:{audioPreset:t.AudioPresets.speech,dtx:!0,red:!1,simulcast:!1}});s.on(t.RoomEvent.TrackSubscribed,e=>{if(e.kind===t.Track.Kind.Audio){const t=e.attach();t.volume=.4,t.autoplay=!0,document.body.appendChild(t),t.play().catch(e=>{})}}),s.on(t.RoomEvent.DataReceived,(e,t)=>{var a,l;try{const n=(new TextDecoder).decode(e);if(!n||0===n.trim().length)return;if(["subscribed","connected","disconnected","enabled","disabled","true","false"].some(e=>n.toLowerCase()===e))return;try{const e=JSON.parse(n);let l="";const r=["text","transcript","message","content","response"];for(const t of r)if(e[t]&&"string"==typeof e[t]&&e[t].trim()){l=e[t].trim();break}if(l){const e=(null==t?void 0:t.identity)===(null==(a=s.localParticipant)?void 0:a.identity),r=`${e?"user":"ai"}-${l}-${Math.floor(Date.now()/2e3)}`;if(Ut.current.has(r))return;Ut.current.add(r),setTimeout(()=>Ut.current.delete(r),5e3),Rt(t=>[...t,{id:`${Date.now()}-${Math.random()}`,text:l,isUser:e,timestamp:new Date,source:"voice"}]),e||$t(!1)}}catch(r){if(n.length>=2&&n.length<=1e3){const e=(null==t?void 0:t.identity)===(null==(l=s.localParticipant)?void 0:l.identity),a=`${e?"user":"ai"}-${n.trim()}-${Math.floor(Date.now()/2e3)}`;if(Ut.current.has(a))return;Ut.current.add(a),setTimeout(()=>Ut.current.delete(a),5e3),Rt(t=>[...t,{id:`${Date.now()}-${Math.random()}`,text:n.trim(),isUser:e,timestamp:new Date,source:"voice"}]),e||$t(!1)}}}catch(n){}}),"function"==typeof s.registerTextStreamHandler&&(s.registerTextStreamHandler("lk.transcription",async(e,t)=>{var a;try{const l=await e.readAll();if(l&&l.trim()){const e=t.identity===(null==(a=s.localParticipant)?void 0:a.identity),r=`${e?"user":"ai"}-transcription-${l.trim()}-${Math.floor(Date.now()/2e3)}`;if(Ut.current.has(r))return;Ut.current.add(r),setTimeout(()=>Ut.current.delete(r),5e3),Rt(t=>[...t,{id:`transcription-${Date.now()}-${Math.random()}`,text:l.trim(),isUser:e,timestamp:new Date,source:"voice"}]),e||$t(!1)}}catch(l){}}),s.registerTextStreamHandler("lk.chat",async(e,t)=>{var a;try{const l=await e.readAll();if(!(t.identity===(null==(a=s.localParticipant)?void 0:a.identity))&&l&&l.trim()){const e=`ai-chat-${l.trim()}-${Math.floor(Date.now()/2e3)}`;if(Ut.current.has(e))return;Ut.current.add(e),setTimeout(()=>Ut.current.delete(e),5e3),Rt(e=>[...e,{id:`chat-${Date.now()}-${Math.random()}`,text:l.trim(),isUser:!1,timestamp:new Date,source:"chat"}]),$t(!1)}}catch(l){}})),s.on(t.RoomEvent.ParticipantMetadataChanged,(e,t)=>{var a;if(e)try{const l=JSON.parse(e);if(l.transcript||l.text){const e=(null==t?void 0:t.identity)===(null==(a=s.localParticipant)?void 0:a.identity);Rt(t=>[...t,{id:`metadata-${Date.now()}`,text:l.transcript||l.text,isUser:e,timestamp:new Date,source:"voice"}]),e||$t(!1)}}catch(l){}}),s.on(t.RoomEvent.RoomMetadataChanged,e=>{if(e)try{const t=JSON.parse(e);(t.transcript||t.text)&&(Rt(e=>[...e,{id:`room-metadata-${Date.now()}`,text:t.transcript||t.text,isUser:!1,timestamp:new Date,source:"voice"}]),$t(!1))}catch(t){}}),s.on(t.RoomEvent.Connected,async()=>{Vs(!0),qs(!1),St(!0),$s("connected"),ia("üü¢ Connected! You can now speak with the agent."),zs("‚úÖ Connected - Speak now!");const e=setInterval(()=>{Tt(e=>e+1)},1e3);Lt(e);try{await s.localParticipant.setMicrophoneEnabled(!0,{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}),ra(!0)}catch(t){}}),s.on(t.RoomEvent.Disconnected,()=>{Vs(!1),qs(!1),St(!1),$s("disconnected"),ia("üî¥ Disconnected"),zs("‚ùå Disconnected"),Qs(null),Mt&&(clearInterval(Mt),Lt(null)),Tt(0)}),await s.connect(e.url,e.token),Qs(s)}catch(t){ia(`‚ùå Connection failed: ${t instanceof Error?t.message:"Unknown error"}`),$s("disconnected"),zs("Connection failed"),qs(!1),Vs(!1)}},[ye,Mt]),ya=e.useCallback(async()=>{if(Ys)try{await Ys.disconnect()}catch(e){}Vs(!1),qs(!1),St(!1),$s("disconnected"),ia("üìû Call ended"),zs("Ready to connect"),Qs(null),ra(!1),Mt&&(clearInterval(Mt),Lt(null)),Tt(0),Rt(e=>[...e,{id:`disconnect-${Date.now()}`,text:"Call ended",isUser:!1,timestamp:new Date,source:"system"}])},[Ys,Mt]),wa=e.useCallback(async()=>{if(Ys&&Js)try{const e=!Gs;await Ys.localParticipant.setMicrophoneEnabled(!e),Ws(e),ra(!e)}catch(e){}},[Ys,Js,Gs]),ja=e.useCallback(async()=>{if(ye)try{await navigator.mediaDevices.getUserMedia({audio:!0});const e=await fetch("https://python.service.callshivai.com/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agent_id:ye.id,language:"en-US",call_id:`test_${Date.now()}`,device:"desktop",user_agent:navigator.userAgent})});if(e.ok){await e.json();alert("‚úÖ Connection test passed! Token server is working. Try starting the call again.")}else alert(`‚ùå Token server error: ${e.status}. The voice service may be temporarily unavailable.`)}catch(e){e instanceof Error&&"NotAllowedError"===e.name?alert("‚ùå Microphone permission denied. Please allow microphone access and try again."):e instanceof Error&&e.message.includes("fetch")?alert("‚ùå Cannot reach voice service. Please check your internet connection."):alert(`‚ùå Connection test failed: ${e instanceof Error?e.message:"Unknown error"}`)}else alert("No agent selected")},[ye]),ka=fa,Na=ya,Ca=wa,Sa=e=>{const t=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},[Aa,Pa]=e.useState(Le);e.useEffect(()=>{const e=setTimeout(()=>{Pa(Le)},300);return()=>clearTimeout(e)},[Le]);const Ea=e.useCallback(async()=>{if(!Ae)return He([]),Ge(0),void Ke(0);Je(!0);try{const e=await s.getAgentsWithFilters({gender:Be,sort:Re,search:Aa||void 0,page:Ve,limit:6});He(e.agents),Ge(e.total),Ke(e.totalPages)}catch(e){const t=ge.filter(e=>{const t=e.name.toLowerCase().includes((Aa||"").toLowerCase()),s=(e.gender||"").toLowerCase(),a="all"===Be||s===Be.toLowerCase();return t&&a}).sort((e,t)=>{switch(Re){case"a-z":return e.name.localeCompare(t.name);case"z-a":return t.name.localeCompare(e.name);case"newest":return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime();case"oldest":return new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime();default:return 0}}),s=t.length,a=Math.ceil(s/6),l=6*(Ve-1),r=t.slice(l,l+6);He(r),Ge(s),Ke(a)}finally{Je(!1)}},[Ae,Be,Re,Aa,Ve,ge]);e.useEffect(()=>{Ea()},[Ea]);const Ia=$e,Ta=e=>{he({page:e.toString()}),window.scrollTo({top:0,behavior:"smooth"})};return e.useEffect(()=>{Ve>1&&he({page:"1"})},[Aa,Be,Re]),Ie?t.jsxs("div",{className:"space-y-4 lg:space-y-6 w-full max-w-full overflow-hidden",children:[t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-2 lg:gap-4 flex-1",children:[t.jsxs("div",{className:"bg-white/50 flex items-center justify-center gap-1.5 dark:bg-slate-800/50 rounded-lg px-2 lg:px-6 py-2 lg:py-2 text-center shadow-sm transition-all duration-200 hover:shadow-md",children:[t.jsx("p",{className:"text-base lg:text-2xl font-bold text-slate-800 dark:text-white",children:Ae?ge.length:0}),t.jsx("p",{className:"text-[10px] lg:text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total"})]}),t.jsxs("div",{className:"bg-white/50 flex items-center justify-center gap-1.5 dark:bg-slate-800/50 rounded-lg px-2 lg:px-6 py-2 lg:py-2 text-center shadow-sm transition-all duration-200 hover:shadow-md",children:[t.jsx("p",{className:"text-base lg:text-2xl font-bold text-green-600 dark:text-green-400",children:Ae?ge.filter(e=>"Published"===e.status||e.is_active).length:0}),t.jsx("p",{className:"text-[10px] lg:text-sm font-medium text-slate-600 dark:text-slate-400",children:"Live"})]}),t.jsxs("div",{className:"bg-white/50 flex items-center justify-center gap-1.5 dark:bg-slate-800/50 rounded-lg px-2 lg:px-6 py-2 lg:py-2 text-center shadow-sm transition-all duration-200 hover:shadow-md",children:[t.jsx("p",{className:"text-base lg:text-2xl font-bold text-orange-600 dark:text-orange-400",children:Ae?ge.filter(e=>"Published"!==e.status&&!e.is_active).length:0}),t.jsx("p",{className:"text-[10px] lg:text-sm font-medium text-slate-600 dark:text-slate-400",children:"Unpublished"})]})]}),t.jsxs("button",{onClick:()=>Ae&&zt(!0),disabled:!Ae,className:"relative overflow-hidden flex items-center justify-center gap-2 px-4 lg:px-6 py-2.5 lg:py-3 rounded-xl transition-all duration-200 shadow-sm whitespace-nowrap "+(Ae?"common-button-bg transform hover:scale-[1.02] active:scale-[0.98] cursor-pointer":"bg-gray-400 dark:bg-gray-600 text-gray-200 dark:text-gray-300 cursor-not-allowed opacity-50"),children:[Ae&&t.jsx("span",{"aria-hidden":"true",className:"absolute left-0 top-0 h-full w-full pointer-events-none z-0",children:t.jsx("span",{className:"block absolute left-[-60%] top-0 h-full w-1/2 bg-gradient-to-r from-transparent via-white/60 to-transparent opacity-70 blur-sm animate-shine"})}),t.jsx(M,{className:"w-4 h-4 lg:w-5 lg:h-5 z-10"}),t.jsx("span",{className:"text-sm lg:text-base font-medium z-10",children:"Create AI Employee"})]})]}),t.jsx(h,{children:t.jsxs("div",{className:"p-4 lg:p-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400 z-10"}),t.jsx("input",{type:"text",placeholder:"Search agents...",value:Le,onChange:e=>De(e.target.value),className:"w-full pl-10 pr-4 py-2.5 lg:py-3 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/20 text-slate-800 dark:text-white text-sm transition-all duration-200"})]}),t.jsx("div",{className:"hidden lg:block min-w-[140px]",children:t.jsx(p,{options:[{value:"all",label:"All Gender"},{value:"male",label:"Male"},{value:"female",label:"Female"}],value:Be,onChange:e=>Ue(e),placeholder:"Filter by gender..."})}),t.jsx("div",{className:"hidden lg:block min-w-[140px]",children:t.jsx(p,{options:[{value:"newest",label:"Newest"},{value:"oldest",label:"Oldest"},{value:"a-z",label:"A to Z"},{value:"z-a",label:"Z to A"}],value:Re,onChange:e=>Fe(e),placeholder:"Sort by..."})}),t.jsxs("button",{onClick:()=>Oe(!0),className:"lg:hidden flex items-center justify-center common-button-bg2 p-2.5 rounded-lg active:scale-95 relative",children:[t.jsx(f,{className:"w-4 h-4"}),("all"!==Be||"newest"!==Re)&&t.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-blue-500 rounded-full"})]})]}),(Le||"all"!==Be||"newest"!==Re)&&t.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:[t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Active filters:"}),Le&&t.jsxs("span",{className:"px-2 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-full text-xs flex items-center gap-1",children:['"',Le,'"',t.jsx("button",{onClick:()=>De(""),className:"hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full p-0.5",children:"‚úï"})]}),"all"!==Be&&t.jsxs("span",{className:"px-2 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-full text-xs flex items-center gap-1",children:["Gender: ",Be,t.jsx("button",{onClick:()=>Ue("all"),className:"hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full p-0.5",children:"‚úï"})]}),"newest"!==Re&&t.jsxs("span",{className:"px-2 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-full text-xs flex items-center gap-1",children:["Sort:"," ","a-z"===Re?"A to Z":"z-a"===Re?"Z to A":"oldest"===Re?"Oldest":Re,t.jsx("button",{onClick:()=>Fe("newest"),className:"hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full p-0.5",children:"‚úï"})]}),t.jsx("button",{onClick:()=>{De(""),Ue("all"),Fe("newest")},className:"text-xs text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 underline",children:"Clear all"})]})]})}),qe&&t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-3 sm:gap-4 lg:gap-6",children:[...Array(6)].map((e,s)=>t.jsx(h,{children:t.jsxs("div",{className:"p-4 sm:p-5 lg:p-6 animate-pulse",children:[t.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[t.jsx("div",{className:"w-10 sm:w-12 h-10 sm:h-12 bg-slate-200 dark:bg-slate-700 rounded-xl"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-3/4 mb-2"}),t.jsx("div",{className:"h-3 bg-slate-200 dark:bg-slate-700 rounded w-1/2"})]})]}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsx("div",{className:"h-3 bg-slate-200 dark:bg-slate-700 rounded w-full"}),t.jsx("div",{className:"h-3 bg-slate-200 dark:bg-slate-700 rounded w-2/3"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("div",{className:"h-8 bg-slate-200 dark:bg-slate-700 rounded flex-1"}),t.jsx("div",{className:"h-8 bg-slate-200 dark:bg-slate-700 rounded w-10"})]})]})},s))}),!qe&&Ia.length>0&&t.jsxs(t.Fragment,{children:[void 0,void 0,t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-3 sm:gap-4 lg:gap-6",children:Ia.map(e=>t.jsx(h,{hover:!0,children:t.jsxs("div",{className:"p-4 sm:p-5 lg:p-6 relative",children:[t.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[t.jsx("div",{className:"w-10 sm:w-12 h-10 sm:h-12 common-bg-icons rounded-xl flex items-center justify-center flex-shrink-0",children:t.jsx(D,{className:"w-5 sm:w-6 h-5 sm:h-6 text-slate-900 dark:text-slate-100"})}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("h3",{className:"font-semibold text-slate-800 dark:text-white text-sm sm:text-base truncate",children:e.name}),t.jsxs("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400 truncate",children:[e.language," ‚Ä¢ ",e.persona]})]}),t.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium flex-shrink-0 "+("Published"===e.status||e.is_active?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":"bg-orange-100 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400"),children:"Published"===e.status||e.is_active?"Live":"Unpublished"})]})})]}),t.jsxs("div",{className:"space-y-2 mb-4 sm:mb-5",children:[t.jsxs("div",{className:"flex items-center justify-start text-xs sm:text-sm",children:[t.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Voice:"}),t.jsx("span",{className:"text-slate-800 dark:text-white truncate ml-2 text-right",children:e.voice})]}),t.jsxs("div",{className:"flex items-center justify-start text-xs sm:text-sm",children:[t.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Created:"}),t.jsx("span",{className:"text-slate-800 dark:text-white ml-2",children:new Date(e.createdAt).toLocaleDateString()})]})]}),t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsxs("button",{onClick:()=>j(`/agents/${e.id}`),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-all duration-200 text-sm font-medium active:scale-[0.98]",children:[t.jsx(R,{className:"w-4 h-4"}),"View"]}),t.jsxs("button",{onClick:()=>j(`/agents/${e.id}/edit`),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-all duration-200 text-sm font-medium active:scale-[0.98]",children:[t.jsx(F,{className:"w-4 h-4"}),"Edit"]}),t.jsxs("button",{onClick:()=>j(`/agents/${e.id}/train`,{state:{from:"list"}}),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 rounded-lg hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-all duration-200 text-sm font-medium active:scale-[0.98]",children:[t.jsx(B,{className:"w-4 h-4"}),"Train"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:["Published"===e.status?t.jsxs("button",{onClick:()=>ua(e.id),disabled:Ds.has(e.id),className:"flex-1 flex items-center justify-center gap-1.5 common-button-bg2 transition-all duration-200 text-sm font-medium "+(Ds.has(e.id)?"opacity-50 cursor-not-allowed":"active:scale-[0.98]"),children:[Ds.has(e.id)?t.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin"}):t.jsx(U,{className:"w-4 h-4"}),Ds.has(e.id)?"Pausing...":"Pause"]}):t.jsxs("button",{onClick:()=>e.is_active?ua(e.id):da(e.id),disabled:Ds.has(e.id),className:`flex-1 flex items-center justify-center gap-1.5 transition-all duration-200 text-sm font-medium ${Ds.has(e.id)?"opacity-50 cursor-not-allowed":"active:scale-[0.98]"} ${e.is_active?"common-button-bg2":"common-button-bg"}`,children:[Ds.has(e.id)?t.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin"}):e.is_active?t.jsx(U,{className:"w-4 h-4"}):t.jsx(_,{className:"w-4 h-4"}),Ds.has(e.id)?e.is_active?"Pausing...":"Publishing...":e.is_active?"Pause":"Publish"]}),t.jsx("button",{onClick:()=>{wt(e.id),vt(!0)},className:"p-2.5 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 active:scale-95",title:"Copy integration code",children:t.jsx(A,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>{return t=e.id,at(t),void tt(!0);var t},className:"p-2.5 text-slate-400 hover:text-red-500 transition-colors rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 active:scale-95",title:"Delete agent",children:t.jsx(O,{className:"w-4 h-4"})})]})]})},e.id))})]}),ze>0&&t.jsx("div",{className:"mt-4 lg:mt-6",children:t.jsx(v,{currentPage:Ve,totalPages:We,totalItems:ze,itemsPerPage:6,onPageChange:Ta})}),0===$e.length&&!qe&&t.jsxs("div",{className:"text-center py-12 lg:py-16 px-4",children:[t.jsx(D,{className:"w-20 lg:w-24 h-20 lg:h-24 text-slate-300 dark:text-slate-600 mx-auto mb-6"}),t.jsx("h3",{className:"text-xl lg:text-2xl font-medium text-slate-600 dark:text-slate-400 mb-3",children:Le||"all"!==Be?"No agents found":"No agents created yet"}),t.jsx("p",{className:"text-sm lg:text-base text-slate-500 dark:text-slate-500 max-w-md lg:max-w-lg mx-auto mb-6 leading-relaxed",children:Le||"all"!==Be?"Try adjusting your search or filter criteria to find what you're looking for":"Create your first AI agent to get started with automated conversations and boost your business efficiency"}),!Le&&"all"===Be&&Ae&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:()=>zt(!0),className:"w-full sm:w-auto common-button-bg px-6 py-3 rounded-xl shadow-sm hover:shadow-md transform hover:scale-[1.02] active:scale-[0.98]",children:"Create your first AI Employee"}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-400 dark:text-slate-500",children:"Get started in just 2 minutes ‚ö°"})]}),(Le||"all"!==Be)&&t.jsx("button",{onClick:()=>{De(""),Ue("all")},className:"w-full sm:w-auto common-button-bg2 px-6 py-2.5 rounded-lg",children:"Clear Filters"})]}),et&&u.createPortal(t.jsx("div",{className:"fixed inset-0 bg-black/50 z-[70] flex items-center justify-center p-4",children:t.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl w-full max-w-md shadow-xl border border-slate-200 dark:border-slate-700",children:t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 dark:bg-red-900/20 rounded-full mx-auto mb-4",children:t.jsx(O,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),t.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-white text-center mb-2",children:"Delete Agent?"}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 text-center mb-6",children:"Are you sure you want to delete this agent? This action cannot be undone and all associated data will be permanently removed."}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:ga,disabled:lt,className:"flex-1 px-4 py-2.5 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-700 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),t.jsx("button",{onClick:pa,disabled:lt,className:"flex-1 px-4 py-2.5 bg-red-600 hover:bg-red-700 text-white rounded-xl transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:lt?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),t.jsx("span",{children:"Deleting..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(O,{className:"w-4 h-4"}),t.jsx("span",{children:"Delete"})]})})]})]})})}),document.body),nt&&u.createPortal(t.jsx("div",{className:"fixed inset-0 bg-black/50 z-[70] flex items-center justify-center p-4",children:t.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl w-full max-w-md shadow-xl border border-slate-200 dark:border-slate-700",children:t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-full mx-auto mb-4",children:t.jsx(be,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),t.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-white text-center mb-2",children:"Publish Agent?"}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 text-center mb-6",children:"Are you sure you want to publish this agent? It will become available to users."}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:ma,disabled:ct,className:"flex-1 h-11 px-4 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-700 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:"Cancel"}),t.jsx("button",{onClick:ca,disabled:ct,className:"flex-1 h-11 px-4 rounded-xl transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 common-button-bg",children:ct?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),t.jsx("span",{children:"Publishing..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(be,{className:"w-4 h-4"}),t.jsx("span",{children:"Publish"})]})})]})]})})}),document.body),ut&&u.createPortal(t.jsx("div",{className:"fixed inset-0 bg-black/50 z-[70] flex items-center justify-center p-4",children:t.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl w-full max-w-md shadow-xl border border-slate-200 dark:border-slate-700",children:t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-amber-100 dark:bg-amber-900/20 rounded-full mx-auto mb-4",children:t.jsx(me,{className:"w-6 h-6 text-amber-600 dark:text-amber-400"})}),t.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-white text-center mb-2",children:"Pause Agent?"}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 text-center mb-6",children:"Are you sure you want to pause this agent? It will no longer be available to users."}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:ha,disabled:gt,className:"flex-1 h-11 px-4 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-700 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:"Cancel"}),t.jsx("button",{onClick:xa,disabled:gt,className:"flex-1 h-11 px-4 rounded-xl transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 common-button-bg2",children:gt?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-slate-400 dark:border-slate-300 border-t-slate-700 dark:border-t-slate-100"}),t.jsx("span",{children:"Pausing..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(me,{className:"w-4 h-4"}),t.jsx("span",{children:"Pause"})]})})]})]})})}),document.body),ft&&yt&&u.createPortal(t.jsx("div",{className:"fixed inset-0 bg-black/50 z-[70] flex items-center justify-center p-2 sm:p-4",children:t.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl w-full max-w-2xl shadow-xl border border-slate-200 dark:border-slate-700 max-h-[95vh] sm:max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-4 sm:p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-white",children:"Widget Integration Code"}),t.jsx("button",{onClick:()=>{vt(!1),wt(null)},className:"p-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800",children:t.jsx(P,{className:"w-5 h-5"})})]}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-6",children:"Copy and paste this script tag into your website's HTML. The widget will automatically load your saved customizations."}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Script Tag"}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[t.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),"Live Configuration"]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("code",{className:"common-bg-icons block w-full p-4 rounded-lg text-xs sm:text-sm font-mono text-slate-800 dark:text-white overflow-x-auto whitespace-pre-wrap max-h-48 overflow-y-auto",children:`<script src="https://callshivai.com/widget2.js?agentId=${yt}"><\/script>`}),t.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`<script src="https://callshivai.com/widget2.js?agentId=${yt}"><\/script>`),m.success("Code copied to clipboard!",{duration:2e3})},className:"absolute top-3 right-3 p-2 common-button-bg rounded-lg hover:shadow-sm transition-all min-h-[36px] min-w-[36px] flex items-center justify-center",children:t.jsx(A,{className:"w-4 h-4 text-white"})})]})]}),t.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg",children:[t.jsx("h4",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"üìã Quick Installation:"}),t.jsxs("ol",{className:"text-xs text-slate-600 dark:text-slate-400 space-y-2 list-decimal list-inside",children:[t.jsx("li",{children:"Copy the script tag above"}),t.jsx("li",{children:"Paste it in your website's HTML, before the closing </body> tag"}),t.jsx("li",{children:"The widget will load automatically with all your custom settings"}),t.jsx("li",{children:"To update: copy new script when you change settings"})]})]}),t.jsx("div",{className:"mt-6 flex items-center justify-end",children:t.jsx("button",{onClick:()=>{vt(!1),wt(null)},className:"px-6 py-2.5 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-700 transition-all duration-200 font-medium",children:"Close"})})]})})}),document.body),_e&&u.createPortal(t.jsxs("div",{className:"lg:hidden",children:[t.jsx("div",{className:"fixed inset-0 bg-black/50 z-[50]",onClick:()=>Oe(!1)}),t.jsx("div",{className:"fixed inset-x-0 bottom-0 z-[51] animate-slide-up",children:t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-t-3xl shadow-2xl max-h-[85vh] overflow-hidden",children:[t.jsx("div",{className:"flex justify-center pt-3 pb-2",children:t.jsx("div",{className:"w-10 h-1 bg-slate-300 dark:bg-slate-600 rounded-full"})}),t.jsxs("div",{className:"flex items-center justify-between px-5 pb-4 border-b border-slate-200 dark:border-slate-700",children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:"Filters & Sort"}),t.jsx("button",{onClick:()=>Oe(!1),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition-colors",children:t.jsx(P,{className:"w-5 h-5 text-slate-500"})})]}),t.jsxs("div",{className:"px-5 py-4 space-y-5 overflow-y-auto max-h-[50vh]",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Gender"}),t.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"all",label:"All"},{value:"male",label:"Male"},{value:"female",label:"Female"}].map(e=>t.jsx("button",{onClick:()=>Ue(e.value),className:"py-2.5 px-3 rounded-xl text-sm font-medium transition-all "+(Be===e.value?"bg-blue-500 text-white shadow-md":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"),children:e.label},e.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Sort By"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"newest",label:"Newest"},{value:"oldest",label:"Oldest"},{value:"a-z",label:"A ‚Üí Z"},{value:"z-a",label:"Z ‚Üí A"}].map(e=>t.jsx("button",{onClick:()=>Fe(e.value),className:"py-2.5 px-3 rounded-xl text-sm font-medium transition-all "+(Re===e.value?"bg-blue-500 text-white shadow-md":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"),children:e.label},e.value))})]})]}),t.jsx("div",{className:"px-5 py-4 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 pb-safe",children:t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>{Ue("all"),Fe("newest")},className:"flex-1 py-3 border border-slate-300 dark:border-slate-600 rounded-xl text-slate-700 dark:text-slate-300 font-medium active:scale-[0.98] transition-transform",children:"Reset"}),t.jsx("button",{onClick:()=>Oe(!1),className:"flex-1 py-3 common-button-bg rounded-xl font-medium active:scale-[0.98] transition-transform",children:"Apply"})]})})]})})]}),document.body),Ht&&u.createPortal(t.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-2 sm:p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/60"}),t.jsxs("div",{className:"relative bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full max-w-2xl h-auto  sm:max-h-[90vh] flex flex-col overflow-hidden border border-slate-200 dark:border-slate-700",tabIndex:-1,children:[t.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-5 border-b border-slate-200 dark:border-slate-700 flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-slate-100 dark:bg-slate-800 flex items-center justify-center",children:t.jsx(D,{className:"w-5 h-5 sm:w-6 sm:h-6 text-pink-600 dark:text-pink-400"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-base sm:text-lg font-bold text-slate-800 dark:text-white",children:"Create AI Employee"}),t.jsxs("p",{className:"text-[10px] sm:text-xs text-slate-500 dark:text-slate-400",children:["Step ",Gt," of 6"]})]})]}),t.jsx("button",{onClick:Ps,disabled:Fs,className:"p-1.5 sm:p-2 rounded-lg transition-colors "+(Fs?"opacity-50 cursor-not-allowed":"hover:bg-slate-200 dark:hover:bg-slate-700"),children:t.jsx(P,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-500"})})]}),t.jsx("div",{className:"px-3 sm:px-5 pt-3 sm:pt-4 flex-shrink-0",children:t.jsx("div",{className:"flex items-center gap-1 sm:gap-2",children:[1,2,3,4,5,6].map(e=>t.jsx("div",{className:"flex-1 flex items-center",children:t.jsx("div",{className:"h-1.5 sm:h-2 w-full rounded-full transition-all duration-300 "+(e<=Gt?"bg-blue-400 dark:bg-blue-500":"bg-slate-200 dark:bg-slate-700")})},e))})}),t.jsxs("div",{className:"p-3 py-4 sm:p-5 overflow-y-auto flex-1 min-h-0 ",children:[1===Gt&&t.jsxs("div",{className:"space-y-3 sm:space-y-4 animate-fadeIn",children:[t.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[t.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3 sm:mb-4 rounded-2xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 shadow-sm flex items-center justify-center",children:t.jsx($,{className:"w-6 h-6 sm:w-8 sm:h-8 text-blue-600 dark:text-blue-400"})}),t.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-slate-800 dark:text-white mb-1 sm:mb-2",children:"Let's get started!"}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400 max-w-md mx-auto px-2",children:"Enter your company name and give your AI a friendly name. This helps personalize conversations with your customers."})]}),t.jsxs("div",{className:"space-y-1.5 sm:space-y-2",children:[t.jsxs("label",{className:"text-xs sm:text-sm font-medium text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[t.jsx($,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),"Company Name"]}),t.jsx("input",{type:"text",value:es.companyName,onChange:e=>ts(t=>({...t,companyName:e.target.value})),placeholder:"e.g., Acme Corporation",className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm sm:text-base text-slate-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500/30 transition-all"})]}),t.jsxs("div",{className:"space-y-1.5 sm:space-y-2",children:[t.jsxs("label",{className:"text-xs sm:text-sm font-medium text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[t.jsx(D,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),"AI Employee Name"]}),t.jsx("input",{type:"text",value:es.aiEmployeeName,onChange:e=>ts(t=>({...t,aiEmployeeName:e.target.value})),placeholder:"e.g., Alex, Sarah, Max",className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm sm:text-base text-slate-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500/30 transition-all"}),t.jsx("p",{className:"text-[10px] sm:text-xs text-slate-400 dark:text-slate-500",children:"This is how your AI Employee will introduce itself to callers"})]})]}),2===Gt&&t.jsxs("div",{className:"space-y-3 sm:space-y-4 animate-fadeIn",children:[t.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[t.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3 sm:mb-4 rounded-2xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 shadow-sm flex items-center justify-center",children:t.jsx(ie,{className:"w-6 h-6 sm:w-8 sm:h-8 text-purple-600 dark:text-purple-400"})}),t.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-slate-800 dark:text-white mb-1 sm:mb-2",children:"What should your AI Employee do?"}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400 max-w-md mx-auto px-2",children:"Select the main task your AI will handle. This determines how it responds and what skills it prioritizes."})]}),t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:()=>qt(Math.max(0,Kt-1)),disabled:0===Kt,className:"absolute -left-2 sm:-left-3 top-1/2 -translate-y-1/2 z-10 w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white dark:bg-slate-800 shadow-lg border border-slate-200 dark:border-slate-700 flex items-center justify-center transition-all "+(0===Kt?"opacity-40 cursor-not-allowed":"hover:bg-slate-50 dark:hover:bg-slate-700 hover:scale-110"),children:t.jsx(N,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-600 dark:text-slate-300"})}),t.jsx("button",{onClick:()=>qt(Math.min(Math.ceil(ws.length/2)-1,Kt+1)),disabled:Kt>=Math.ceil(ws.length/2)-1,className:"absolute -right-2 sm:-right-3 top-1/2 -translate-y-1/2 z-10 w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white dark:bg-slate-800 shadow-lg border border-slate-200 dark:border-slate-700 flex items-center justify-center transition-all "+(Kt>=Math.ceil(ws.length/2)-1?"opacity-40 cursor-not-allowed":"hover:bg-slate-50 dark:hover:bg-slate-700 hover:scale-110"),children:t.jsx(C,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-600 dark:text-slate-300"})}),t.jsx("div",{className:"overflow-x-auto px-1 sm:px-2 touch-pan-x snap-x [&::-webkit-scrollbar]:hidden",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:t.jsx("div",{className:"flex transition-transform duration-300 ease-out",style:{transform:`translateX(-${100*Kt}%)`},children:Array.from({length:Math.ceil(ws.length/2)}).map((e,s)=>t.jsxs("div",{className:"flex gap-2 sm:gap-4 min-w-full flex-shrink-0",children:[ws.slice(2*s,2*s+2).map(e=>t.jsxs("button",{onClick:()=>ts(t=>({...t,businessProcess:e.value})),className:"flex-1 p-3 sm:p-4 rounded-xl border-2 text-center transition-colors duration-200 relative "+(es.businessProcess===e.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 shadow-md":"border-slate-200 dark:border-slate-700 hover:border-blue-300 dark:hover:border-blue-600 bg-white dark:bg-slate-800/50"),children:[es.businessProcess===e.value&&t.jsx(z,{className:"w-4 h-4 text-blue-500 absolute top-2 right-2"}),t.jsx("span",{className:"text-2xl sm:text-3xl mb-1 sm:mb-2 block",children:e.icon}),t.jsx("span",{className:"text-xs sm:text-sm font-medium text-slate-800 dark:text-white block",children:e.label})]},e.value)),1===ws.slice(2*s,2*s+2).length&&t.jsx("div",{className:"flex-1"})]},s))})}),t.jsx("div",{className:"flex justify-center gap-1.5 sm:gap-2 mt-3 sm:mt-4",children:Array.from({length:Math.ceil(ws.length/2)}).map((e,s)=>t.jsx("button",{onClick:()=>qt(s),className:"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full transition-all "+(Kt===s?"bg-blue-500 w-4 sm:w-6":"bg-slate-300 dark:bg-slate-600 hover:bg-slate-400")},s))})]})]}),3===Gt&&t.jsxs("div",{className:"space-y-3 sm:space-y-4 animate-fadeIn",children:[t.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[t.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3 sm:mb-4 rounded-2xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 shadow-sm flex items-center justify-center",children:t.jsx(oe,{className:"w-6 h-6 sm:w-8 sm:h-8 text-green-600 dark:text-green-400"})}),t.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-slate-800 dark:text-white mb-1 sm:mb-2",children:"What industry are you in?"}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400 max-w-md mx-auto px-2",children:"Your AI will use industry-specific language, understand common terms, and follow your industry best practices."})]}),t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:()=>Vt(Math.max(0,Jt-1)),disabled:0===Jt,className:"absolute -left-2 sm:-left-3 top-1/2 -translate-y-1/2 z-10 w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white dark:bg-slate-800 shadow-lg border border-slate-200 dark:border-slate-700 flex items-center justify-center transition-all "+(0===Jt?"opacity-40 cursor-not-allowed":"hover:bg-slate-50 dark:hover:bg-slate-700 hover:scale-110"),children:t.jsx(N,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-600 dark:text-slate-300"})}),t.jsx("button",{onClick:()=>Vt(Math.min(Math.ceil(js.length/6)-1,Jt+1)),disabled:Jt>=Math.ceil(js.length/6)-1,className:"absolute -right-2 sm:-right-3 top-1/2 -translate-y-1/2 z-10 w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white dark:bg-slate-800 shadow-lg border border-slate-200 dark:border-slate-700 flex items-center justify-center transition-all "+(Jt>=Math.ceil(js.length/6)-1?"opacity-40 cursor-not-allowed":"hover:bg-slate-50 dark:hover:bg-slate-700 hover:scale-110"),children:t.jsx(C,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-600 dark:text-slate-300"})}),t.jsx("div",{className:"overflow-x-auto px-1 sm:px-2 touch-pan-x snap-x [&::-webkit-scrollbar]:hidden",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:t.jsx("div",{className:"flex transition-transform duration-300 ease-out",style:{transform:`translateX(-${100*Jt}%)`},children:Array.from({length:Math.ceil(js.length/6)}).map((e,s)=>t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-3 min-w-full",children:js.slice(6*s,6*s+6).map(e=>t.jsxs("button",{onClick:()=>ts(t=>({...t,industry:e.value,subIndustry:""})),className:"p-2 sm:p-3 rounded-xl border-2 text-center transition-colors duration-200 relative "+(es.industry===e.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 shadow-md":"border-slate-200 dark:border-slate-700 hover:border-blue-300 dark:hover:border-blue-600 bg-white dark:bg-slate-800/50"),children:[es.industry===e.value&&t.jsx(z,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5 text-blue-500 absolute top-1 right-1 sm:top-1.5 sm:right-1.5"}),t.jsx("span",{className:"text-xl sm:text-2xl mb-0.5 sm:mb-1 block",children:e.icon}),t.jsx("span",{className:"text-[10px] sm:text-xs font-medium text-slate-800 dark:text-white leading-tight",children:e.label})]},e.value))},s))})}),t.jsx("div",{className:"flex justify-center gap-1.5 sm:gap-2 mt-3 sm:mt-4",children:Array.from({length:Math.ceil(js.length/6)}).map((e,s)=>t.jsx("button",{onClick:()=>Vt(s),className:"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full transition-all "+(Jt===s?"bg-blue-500 w-4 sm:w-6":"bg-slate-300 dark:bg-slate-600 hover:bg-slate-400")},s))})]})]}),4===Gt&&t.jsxs("div",{className:"space-y-3 sm:space-y-4 animate-fadeIn",children:[t.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[t.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3 sm:mb-4 rounded-2xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 shadow-sm flex items-center justify-center",children:t.jsx(de,{className:"w-6 h-6 sm:w-8 sm:h-8 text-orange-600 dark:text-orange-400"})}),t.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-slate-800 dark:text-white mb-1 sm:mb-2",children:"Specify your niche"}),t.jsxs("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400 max-w-md mx-auto px-2",children:["Select a sub-category for"," ",t.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:null==(l=js.find(e=>e.value===es.industry))?void 0:l.label})," ","to help your AI understand specific terminology and practices."]})]}),(null==es?void 0:es.industry)&&ks[null==es?void 0:es.industry]?t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:()=>Qt(Math.max(0,Yt-1)),disabled:0===Yt,className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-2 sm:-translate-x-4 z-10 w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 shadow-lg flex items-center justify-center transition-all duration-200 "+(0===Yt?"opacity-30 cursor-not-allowed":"hover:bg-slate-50 dark:hover:bg-slate-700 hover:border-orange-300 dark:hover:border-orange-600"),children:t.jsx(N,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-600 dark:text-slate-300"})}),t.jsx("button",{onClick:()=>Qt(Math.min(Math.ceil(ks[es.industry].length/6)-1,Yt+1)),disabled:Yt>=Math.ceil(ks[es.industry].length/6)-1,className:"absolute right-0 top-1/2 -translate-y-1/2 translate-x-2 sm:translate-x-4 z-10 w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 shadow-lg flex items-center justify-center transition-all duration-200 "+(Yt>=Math.ceil(ks[es.industry].length/6)-1?"opacity-30 cursor-not-allowed":"hover:bg-slate-50 dark:hover:bg-slate-700 hover:border-orange-300 dark:hover:border-orange-600"),children:t.jsx(C,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-600 dark:text-slate-300"})}),t.jsx("div",{className:"overflow-x-auto px-1 sm:px-2 touch-pan-x snap-x [&::-webkit-scrollbar]:hidden",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:t.jsx("div",{className:"flex transition-transform duration-300 ease-out",style:{transform:`translateX(-${100*Yt}%)`},children:Array.from({length:Math.ceil(ks[es.industry].length/6)}).map((e,s)=>t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-3 min-w-full auto-rows-fr",children:ks[es.industry].slice(6*s,6*s+6).map(e=>t.jsxs("button",{onClick:()=>ts(t=>({...t,subIndustry:e.value})),className:"p-2 sm:p-3 rounded-xl border-2 text-center transition-colors duration-200 relative h-[70px] sm:h-[80px] flex items-center justify-center "+(es.subIndustry===e.value?"border-orange-500 bg-orange-50 dark:bg-orange-900/20 shadow-md":"border-slate-200 dark:border-slate-700 hover:border-orange-300 dark:hover:border-orange-600 bg-white dark:bg-slate-800/50"),children:[es.subIndustry===e.value&&t.jsx(z,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5 text-orange-500 absolute top-1 right-1 sm:top-1.5 sm:right-1.5"}),t.jsx("span",{className:"text-xs sm:text-sm font-medium text-slate-800 dark:text-white px-1 leading-tight",children:e.label})]},e.value))},s))})}),Math.ceil(ks[es.industry].length/6)>1&&t.jsx("div",{className:"flex justify-center gap-1.5 sm:gap-2 mt-3 sm:mt-4",children:Array.from({length:Math.ceil(ks[es.industry].length/6)}).map((e,s)=>t.jsx("button",{onClick:()=>Qt(s),className:"h-1.5 sm:h-2 rounded-full transition-all duration-300 "+(s===Yt?"w-6 sm:w-8 bg-orange-500":"w-1.5 sm:w-2 bg-slate-300 dark:bg-slate-600 hover:bg-slate-400")},s))})]}):t.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[t.jsx("p",{children:"No sub-industries available for selected industry"}),t.jsx("p",{className:"text-sm mt-2",children:"You can skip this step"})]})]}),5===Gt&&t.jsxs("div",{className:"space-y-3 sm:space-y-4 animate-fadeIn",children:[t.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[t.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3 sm:mb-4 rounded-2xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 shadow-sm flex items-center justify-center",children:t.jsx(G,{className:"w-6 h-6 sm:w-8 sm:h-8 text-cyan-600 dark:text-cyan-400"})}),t.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-slate-800 dark:text-white mb-1 sm:mb-2",children:"Train Your AI"}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400 max-w-lg mx-auto px-2",children:"Upload your documents, FAQs, or website links. Your AI will learn from these to give accurate, company-specific answers."})]}),t.jsxs("div",{className:" space-y-3 sm:space-y-4 [&::-webkit-scrollbar]:hidden",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[t.jsxs("div",{className:"space-y-3",children:[t.jsxs("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[t.jsx(W,{className:"w-4 h-4"}),"Upload Files"]}),t.jsxs("div",{className:"border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl p-4 sm:p-6 text-center hover:border-blue-400 dark:hover:border-blue-500 transition-colors cursor-pointer bg-slate-50/50 dark:bg-slate-800/50 "+(ss?"opacity-50 pointer-events-none":""),onClick:()=>{var e;return!ss&&(null==(e=document.getElementById("knowledge-file-input"))?void 0:e.click())},onDragOver:e=>{e.preventDefault(),ss||e.currentTarget.classList.add("border-blue-400","bg-blue-50/50")},onDragLeave:e=>{e.currentTarget.classList.remove("border-blue-400","bg-blue-50/50")},onDrop:e=>{if(e.preventDefault(),e.currentTarget.classList.remove("border-blue-400","bg-blue-50/50"),!ss){const t=Array.from(e.dataTransfer.files);Es(t)}},children:[t.jsx("input",{id:"knowledge-file-input",type:"file",multiple:!0,accept:".pdf,.doc,.docx,.txt,.csv,.xlsx,.xls,.png,.jpg,.jpeg,.gif,.webp,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,text/plain,text/csv,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,image/png,image/jpeg,image/gif,image/webp",className:"hidden",disabled:ss,onChange:e=>{const t=Array.from(e.target.files||[]);Es(t),e.target.value=""}}),t.jsx("div",{className:"flex flex-col items-center gap-1.5 sm:gap-2",children:ss?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-600 dark:text-slate-400",children:"Uploading files..."})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 text-slate-400",children:[t.jsx(G,{className:"w-6 h-6 sm:w-8 sm:h-8"}),t.jsx(K,{className:"w-6 h-6 sm:w-8 sm:h-8"}),t.jsx(q,{className:"w-6 h-6 sm:w-8 sm:h-8"})]}),t.jsxs("p",{className:"text-xs sm:text-sm text-slate-600 dark:text-slate-400",children:[t.jsx("span",{className:"text-blue-500 font-medium",children:"Click to upload"})," ","or drag and drop"]}),t.jsx("p",{className:"text-[10px] sm:text-xs text-slate-400 dark:text-slate-500",children:"PDF, DOC, TXT, CSV, Excel, Images (max 10MB each)"})]})})]}),es.uploadedFiles.length>0&&t.jsx("div",{className:"space-y-1.5 sm:space-y-2 max-h-24 sm:max-h-32 overflow-y-auto",children:es.uploadedFiles.map((e,s)=>t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 p-1.5 sm:p-2 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[e.type.includes("image")?t.jsx(K,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-green-500 flex-shrink-0"}):e.type.includes("pdf")?t.jsx(G,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-red-500 flex-shrink-0"}):t.jsx(q,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-blue-500 flex-shrink-0"}),t.jsx("span",{className:"flex-1 text-xs sm:text-sm text-slate-700 dark:text-slate-300 truncate",children:e.name}),t.jsxs("span",{className:"text-[10px] sm:text-xs text-slate-400 hidden sm:inline",children:[(e.size/1024/1024).toFixed(2)," MB"]}),es.uploadedFileUrls[s]&&t.jsx("span",{className:"text-[10px] sm:text-xs text-green-500",children:"‚úì"}),t.jsx("button",{onClick:()=>(e=>{ts(t=>({...t,uploadedFiles:t.uploadedFiles.filter((t,s)=>s!==e),uploadedFileUrls:t.uploadedFileUrls.filter((t,s)=>s!==e)}))})(s),disabled:ss,className:"p-0.5 sm:p-1 text-red-500 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors disabled:opacity-50",children:t.jsx(P,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})]},s))})]}),t.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[t.jsxs("label",{className:"text-xs sm:text-sm font-medium text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[t.jsx(J,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),"Website URLs"]}),es.websiteUrls.map((e,s)=>t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[t.jsx("input",{type:"url",value:e,onChange:e=>((e,t)=>{ts(s=>({...s,websiteUrls:s.websiteUrls.map((s,a)=>a===e?t:s)}))})(s,e.target.value),placeholder:"https://yourcompany.com",className:"flex-1 px-3 sm:px-4 py-2 sm:py-2.5 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-800 dark:text-white text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500/30 transition-all"}),es.websiteUrls.length>1&&t.jsx("button",{onClick:()=>(e=>{ts(t=>({...t,websiteUrls:t.websiteUrls.filter((t,s)=>s!==e)}))})(s),className:"p-2 sm:p-2.5 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors",children:t.jsx(P,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})]},s)),t.jsxs("button",{onClick:Is,className:"w-full py-2 sm:py-2.5 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl text-slate-500 dark:text-slate-400 hover:border-blue-400 hover:text-blue-500 transition-colors flex items-center justify-center gap-2 text-xs sm:text-sm",children:[t.jsx(M,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),"Add another URL"]})]}),t.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[t.jsxs("label",{className:"text-xs sm:text-sm font-medium text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[t.jsx(V,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),"Social Media Links"]}),es.socialMediaUrls.map((e,s)=>t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[t.jsx("input",{type:"url",value:e,onChange:e=>((e,t)=>{ts(s=>({...s,socialMediaUrls:s.socialMediaUrls.map((s,a)=>a===e?t:s)}))})(s,e.target.value),placeholder:"https://facebook.com/yourpage or https://x.com/yourhandle",className:"flex-1 px-3 sm:px-4 py-2 sm:py-2.5 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-800 dark:text-white text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500/30 transition-all"}),es.socialMediaUrls.length>1&&t.jsx("button",{onClick:()=>(e=>{ts(t=>({...t,socialMediaUrls:t.socialMediaUrls.filter((t,s)=>s!==e)}))})(s),className:"p-2 sm:p-2.5 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors",children:t.jsx(P,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})]},s)),t.jsxs("button",{onClick:Ts,className:"w-full py-2 sm:py-2.5 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl text-slate-500 dark:text-slate-400 hover:border-blue-400 hover:text-blue-500 transition-colors flex items-center justify-center gap-2 text-xs sm:text-sm",children:[t.jsx(M,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),"Add social media link"]})]}),(es.uploadedFiles.length>0||es.websiteUrls.some(e=>e.trim())||es.socialMediaUrls.some(e=>e.trim()))&&t.jsx("div",{className:"mt-3 sm:mt-4 p-2.5 sm:p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl",children:t.jsxs("p",{className:"text-[10px] sm:text-xs text-blue-600 dark:text-blue-400",children:["üìö ",es.uploadedFiles.length," file(s),"," ",es.websiteUrls.filter(e=>e.trim()).length," ","URL(s), and"," ",es.socialMediaUrls.filter(e=>e.trim()).length," ","social media link(s) will be added to knowledge base"]})})]})]}),6===Gt&&(()=>{var e,s,a,l,r,n;const i=us.length>0?us:Ns().map(e=>({name:e.template.name,description:e.template.description,icon:e.template.icon,features:e.template.features})),o=window.innerWidth<768,d=o?1:2,c=Math.ceil(i.length/d);return t.jsx("div",{className:"space-y-3 sm:space-y-4 animate-fadeIn",children:hs?t.jsx("div",{className:"h-64 sm:h-80 flex items-center justify-center",children:t.jsxs("div",{className:"text-center space-y-6 sm:space-y-8",children:[t.jsx("div",{className:"flex justify-center",children:t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-0 flex items-center justify-center animate-ping",children:t.jsx("div",{className:"w-24 h-24 sm:w-28 sm:h-28 rounded-full bg-gradient-to-r from-pink-400/10 via-purple-400/10 to-blue-400/10"})}),t.jsxs("div",{className:"relative w-20 h-20 sm:w-24 sm:h-24 mx-auto",children:[t.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-pink-500 via-purple-500 to-blue-500 animate-spin",style:{animationDuration:"3s"}}),t.jsx("div",{className:"absolute inset-1 rounded-full bg-white dark:bg-slate-900"}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-3",children:t.jsx("img",{src:"/Aimark2.png",alt:"AI Bot",className:"w-full h-full object-contain animate-pulse",style:{filter:"drop-shadow(0 0 10px rgba(168, 85, 247, 0.5))"}})}),t.jsx("div",{className:"absolute inset-0 animate-spin",style:{animationDuration:"2s"},children:t.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-2 h-2 rounded-full bg-pink-500"})}),t.jsx("div",{className:"absolute inset-0 animate-spin",style:{animationDuration:"2s",animationDelay:"0.66s"},children:t.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-2 h-2 rounded-full bg-purple-500"})}),t.jsx("div",{className:"absolute inset-0 animate-spin",style:{animationDuration:"2s",animationDelay:"1.33s"},children:t.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-2 h-2 rounded-full bg-blue-500"})})]})]})}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"h-8 sm:h-10 flex items-center justify-center overflow-hidden",children:t.jsx("div",{className:"animate-slideUp",children:t.jsxs("p",{className:"text-base sm:text-lg font-semibold bg-gradient-to-r from-pink-600 via-purple-600 to-blue-600 bg-clip-text text-transparent whitespace-nowrap",children:[gs<20&&"‚ú® Analyzing your business...",gs>=20&&gs<40&&"üéØ Understanding your industry...",gs>=40&&gs<60&&"üöÄ Creating something amazing...",gs>=60&&gs<80&&"üí° Crafting perfect templates...",gs>=80&&gs<95&&"üé® Adding final touches...",gs>=95&&"‚úÖ Almost ready!"]})})}),t.jsxs("div",{className:"max-w-xs mx-auto space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-center text-xs sm:text-sm",children:[t.jsx("span",{className:"text-slate-600 dark:text-slate-400 font-medium",children:gs<100?"Processing...":"Complete!"}),t.jsxs("span",{className:"text-slate-700 dark:text-slate-300 font-semibold",children:[Math.round(gs),"%"]})]}),t.jsx("div",{className:"relative h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:t.jsx("div",{className:"absolute inset-y-0 left-0 bg-gradient-to-r from-pink-500 via-purple-500 to-blue-500 rounded-full transition-all duration-500 ease-out",style:{width:`${gs}%`},children:t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer"})})})]}),t.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-500 animate-pulse",children:["Hang tight, we're building your AI Employee in",t.jsx("span",{className:"font-semibold text-purple-600 dark:text-purple-400",children:" 5 simple steps"})]})]})]})}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[t.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3 sm:mb-4 rounded-2xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 shadow-sm flex items-center justify-center",children:t.jsx(D,{className:"w-6 h-6 sm:w-8 sm:h-8 text-pink-600 dark:text-pink-400"})}),t.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-slate-800 dark:text-white mb-1 sm:mb-2",children:"Recommended Templates"}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400 max-w-md mx-auto px-2",children:"Based on your selections, here are the best templates for your AI Employee."})]}),(es.businessProcess||es.industry||es.subIndustry)&&t.jsxs("div",{className:"flex flex-wrap justify-center gap-1.5 sm:gap-2 mb-3 sm:mb-4",children:[es.businessProcess&&t.jsxs("span",{className:"px-2 sm:px-3 py-1 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-full text-[10px] sm:text-xs font-medium",children:[null==(e=ws.find(e=>e.value===es.businessProcess))?void 0:e.icon," ",null==(s=ws.find(e=>e.value===es.businessProcess))?void 0:s.label]}),es.industry&&t.jsxs("span",{className:"px-2 sm:px-3 py-1 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-full text-[10px] sm:text-xs font-medium",children:[null==(a=js.find(e=>e.value===es.industry))?void 0:a.icon," ",null==(l=js.find(e=>e.value===es.industry))?void 0:l.label]}),es.subIndustry&&t.jsx("span",{className:"px-2 sm:px-3 py-1 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-full text-[10px] sm:text-xs font-medium",children:null==(n=null==(r=ks[es.industry])?void 0:r.find(e=>e.value===es.subIndustry))?void 0:n.label})]}),t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:()=>Zt(Math.max(0,Xt-1)),disabled:0===Xt,className:"absolute -left-2 sm:-left-3 top-1/2 -translate-y-1/2 z-10 w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white dark:bg-slate-800 shadow-lg border border-slate-200 dark:border-slate-700 flex items-center justify-center transition-all "+(0===Xt?"opacity-40 cursor-not-allowed":"hover:bg-slate-50 dark:hover:bg-slate-700 hover:scale-110"),children:t.jsx(N,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-600 dark:text-slate-300"})}),t.jsx("button",{onClick:()=>Zt(Math.min(c-1,Xt+1)),disabled:Xt>=c-1,className:"absolute -right-2 sm:-right-3 top-1/2 -translate-y-1/2 z-10 w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white dark:bg-slate-800 shadow-lg border border-slate-200 dark:border-slate-700 flex items-center justify-center transition-all "+(Xt>=c-1?"opacity-40 cursor-not-allowed":"hover:bg-slate-50 dark:hover:bg-slate-700 hover:scale-110"),children:t.jsx(C,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-600 dark:text-slate-300"})}),t.jsx("div",{className:"overflow-x-auto px-1 sm:px-2 touch-pan-x snap-x [&::-webkit-scrollbar]:hidden",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:t.jsx("div",{className:"flex transition-transform duration-300 ease-out",style:{transform:`translateX(-${100*Xt}%)`},children:hs?t.jsx("div",{className:"w-full h-64 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-3"}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Generating templates..."})]})}):fs?t.jsx("div",{className:"w-full h-64 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mb-3",children:fs}),t.jsx("button",{onClick:()=>Ss(),className:"px-3 py-1.5 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded text-xs hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",children:"Retry"})]})}):Array.from({length:c}).map((e,s)=>{const a=i.slice(s*d,s*d+d);return t.jsx("div",{className:"flex gap-2 sm:gap-4 min-w-full flex-shrink-0 justify-center sm:justify-start",children:a.map((e,a)=>{const l=`${s}-${a}`,r=es.selectedTemplate===e.name;return t.jsxs("div",{onClick:()=>ts(t=>({...t,selectedTemplate:r?null:e.name})),className:`${o?"w-full max-w-xs":" max-w-[260px]"} p-3 sm:p-4 rounded-xl border-2 text-left transition-colors duration-200 relative cursor-pointer ${es.selectedTemplate===e.name?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 shadow-md":"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600 bg-white dark:bg-slate-800/50"}`,children:[es.selectedTemplate===e.name&&t.jsx(z,{className:"w-4 h-4 text-blue-500 absolute top-2 right-2"}),t.jsxs("div",{className:"flex flex-col h-full mt-1",children:[t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-1.5 sm:mb-2",children:[t.jsx("span",{className:"text-xl sm:text-2xl",children:e.icon}),t.jsx("h4",{className:"font-semibold text-slate-800 dark:text-white text-xs sm:text-sm flex-1",children:e.name})]}),t.jsx("p",{className:"text-[10px] sm:text-xs text-slate-500 dark:text-slate-400 mb-1.5 sm:mb-2 line-clamp-2 max-w-[260px]",children:e.description}),t.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:e.features.slice(0,2).map((e,s)=>t.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded text-[10px] sm:text-xs",children:e},s))}),t.jsxs("button",{onClick:t=>{t.stopPropagation(),is(e.name),rs(!0)},className:"mt-auto pt-2 w-full px-2.5 py-1.5 sm:py-2 bg-blue-500/10 hover:bg-blue-500/20 dark:bg-blue-500/10 dark:hover:bg-blue-500/20 text-blue-600 dark:text-blue-400 rounded-lg font-medium flex items-center justify-center gap-1.5 transition-colors border border-blue-200 dark:border-blue-900/30",children:[t.jsx(R,{className:"w-4 h-4"}),t.jsx("span",{className:"text-xs sm:text-sm",children:"View Details"})]})]})]},l)})},s)})})}),t.jsx("div",{className:"flex justify-center gap-1.5 sm:gap-2 mt-3 sm:mt-4",children:Array.from({length:c}).map((e,s)=>t.jsx("button",{onClick:()=>Zt(s),className:"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full transition-all "+(Xt===s?"bg-blue-500 w-4 sm:w-6":"bg-slate-300 dark:bg-slate-600 hover:bg-slate-400")},s))})]})]})})})()]}),t.jsxs("div",{className:"p-3 sm:p-5 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center justify-between gap-2 sm:gap-3",children:[Gt>1?t.jsxs("button",{onClick:As,className:"flex items-center gap-1 sm:gap-2 px-2.5 sm:px-4 py-2 sm:py-2.5 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-xl transition-colors text-sm",children:[t.jsx(N,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),"Back"]}):t.jsx("div",{}),t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[6===Gt&&t.jsxs("button",{onClick:()=>{Ps(),j("/agents/create",{state:{quickCreateData:es}})},className:"hidden sm:flex items-center gap-2 px-4 py-2.5 text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 transition-colors",children:[t.jsx(y,{className:"w-4 h-4"}),"Skip & Configure Manually"]}),Gt<6?t.jsxs("button",{onClick:Cs,disabled:!Ls(),className:"flex items-center gap-1.5 sm:gap-2 px-4 sm:px-6 py-2 sm:py-2.5 rounded-xl font-medium transition-all text-sm sm:text-base "+(Ls()?"common-button-bg hover:scale-[1.02] active:scale-[0.98]":"bg-slate-200 dark:bg-slate-700 text-slate-400 dark:text-slate-500 cursor-not-allowed"),children:["Continue",t.jsx(C,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})]}):t.jsx("button",{onClick:Ms,disabled:hs||!es.selectedTemplate||Fs,className:"flex items-center gap-1.5 sm:gap-2 px-4 sm:px-6 py-2 sm:py-2.5 rounded-xl font-medium transition-all text-sm sm:text-base "+(hs||!es.selectedTemplate||Fs?"bg-slate-200 dark:bg-slate-700 text-slate-400 dark:text-slate-500 cursor-not-allowed":"common-button-bg hover:scale-[1.02] active:scale-[0.98]"),children:Fs?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t.jsx("span",{children:void 0!==(null==Us?void 0:Us.progress)?`${Math.round(Us.progress)}%`:"Creating..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(Y,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Create AI Employee"}),t.jsx("span",{className:"sm:hidden",children:"Create"}),t.jsx(H,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})]})})]})]}),6===Gt&&t.jsxs("button",{onClick:()=>{Ps(),j("/agents/create",{state:{quickCreateData:es}})},className:"sm:hidden w-full mt-2 flex items-center justify-center gap-2 py-2 text-xs text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 transition-colors",children:[t.jsx(y,{className:"w-3.5 h-3.5"}),"Skip & Configure Manually"]})]})]})]}),document.body),ls&&ns&&u.createPortal(t.jsxs("div",{className:"fixed inset-0 z-[65] flex items-center justify-center p-2 sm:p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/60"}),t.jsxs("div",{className:"relative bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full max-w-2xl h-[95vh] sm:h-auto sm:max-h-[85vh] flex flex-col overflow-hidden border border-slate-200 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b border-slate-200 dark:border-slate-700 flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl bg-slate-100 dark:bg-slate-800",children:(null==(g=us.find(e=>e.name===ns))?void 0:g.icon)||(null==(b=E[ns])?void 0:b.icon)||"ü§ñ"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:ns}),t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"AI Employee Template"})]})]}),t.jsx("button",{onClick:()=>rs(!1),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:t.jsx(P,{className:"w-5 h-5 text-slate-500"})})]}),t.jsx("div",{className:"p-4 sm:p-5 overflow-y-auto flex-1 min-h-0 space-y-4",children:(()=>{var e,s,a;const l=us.find(e=>e.name===ns),r=E[ns],n=l||r;return n?t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),os?t.jsx("textarea",{value:(null==cs?void 0:cs.description)||"",onChange:e=>ms(t=>({...t,description:e.target.value})),className:"w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-700 dark:text-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3}):t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:(null==l?void 0:l.description)||(null==r?void 0:r.description)})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Key Features"}),os?t.jsx("textarea",{value:((null==cs?void 0:cs.features)||[]).join("\n"),onChange:e=>ms(t=>({...t,features:e.target.value.split("\n").filter(e=>e.trim())})),className:"w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-700 dark:text-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Enter features (one per line)"}):t.jsx("div",{className:"flex flex-wrap gap-1.5",children:((null==l?void 0:l.features)||(null==r?void 0:r.features)||[]).map((e,s)=>t.jsx("span",{className:"px-2.5 py-1 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-lg text-xs font-medium border border-slate-200 dark:border-slate-700",children:e},s))})]}),l&&t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[t.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Gender"}),t.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:l.gender||"Not specified"})]}),t.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Voice Type"}),t.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:l.voice||"Not specified"})]}),t.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Personality"}),t.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:l.personality||"Not specified"})]})]}),((null==l?void 0:l.tone)||(null==l?void 0:l.industryFocus))&&t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(null==l?void 0:l.tone)&&t.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Tone"}),t.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:l.tone})]}),(null==l?void 0:l.industryFocus)&&t.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Industry Focus"}),t.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:l.industryFocus})]})]}),((null==l?void 0:l.systemPrompt)||(null==n?void 0:n.systemPrompt))&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"System Prompt"}),os?t.jsx("textarea",{value:(null==cs?void 0:cs.systemPrompt)||"",onChange:e=>ms(t=>({...t,systemPrompt:e.target.value})),className:"w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-700 dark:text-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono",rows:16}):t.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700 max-h-[40vh] overflow-y-auto",children:t.jsx("pre",{className:"text-xs text-slate-600 dark:text-slate-400 whitespace-pre-wrap font-sans",children:(null==l?void 0:l.systemPrompt)||(null==n?void 0:n.systemPrompt)})})]}),((null==l?void 0:l.firstMessage)||(null==n?void 0:n.firstMessage))&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"First Message"}),os?t.jsx("textarea",{value:(null==cs?void 0:cs.firstMessage)||"",onChange:e=>ms(t=>({...t,firstMessage:e.target.value})),className:"w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-700 dark:text-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3}):t.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700",children:t.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 italic",children:['"',ys((null==l?void 0:l.firstMessage)||(null==n?void 0:n.firstMessage)),'"']})})]}),(null==l?void 0:l.manualKnowledge)&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Knowledge Base"}),t.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700 max-h-48 overflow-y-auto",children:t.jsx("pre",{className:"text-xs text-slate-600 dark:text-slate-400 whitespace-pre-wrap font-sans",children:l.manualKnowledge})})]}),t.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4",children:t.jsx("h3",{className:"text-sm font-bold text-slate-800 dark:text-white mb-3",children:"Call Scripts"})}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[((null==l?void 0:l.openingScript)||(null==n?void 0:n.openingScript))&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Opening Script"}),os?t.jsx("textarea",{value:(null==cs?void 0:cs.openingScript)||"",onChange:e=>ms(t=>({...t,openingScript:e.target.value})),className:"w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-700 dark:text-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3}):t.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700 max-h-40 overflow-y-auto",children:t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:(null==l?void 0:l.openingScript)||(null==n?void 0:n.openingScript)})})]}),((null==l?void 0:l.keyTalkingPoints)||(null==n?void 0:n.keyTalkingPoints))&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Key Talking Points"}),os?t.jsx("textarea",{value:(null==cs?void 0:cs.keyTalkingPoints)||"",onChange:e=>ms(t=>({...t,keyTalkingPoints:e.target.value})),className:"w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-700 dark:text-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3}):t.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700 max-h-40 overflow-y-auto",children:t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:(null==l?void 0:l.keyTalkingPoints)||(null==n?void 0:n.keyTalkingPoints)})})]}),((null==l?void 0:l.closingScript)||(null==n?void 0:n.closingScript))&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Closing Script"}),os?t.jsx("textarea",{value:(null==cs?void 0:cs.closingScript)||"",onChange:e=>ms(t=>({...t,closingScript:e.target.value})),className:"w-full px-3 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-700 dark:text-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3}):t.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700 max-h-40 overflow-y-auto",children:t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:(null==l?void 0:l.closingScript)||(null==n?void 0:n.closingScript)})})]})]}),((null==(e=null==l?void 0:l.objections)?void 0:e.length)||(null==(s=null==l?void 0:l.conversationExamples)?void 0:s.length)||(null==(a=null==l?void 0:l.intents)?void 0:a.length))&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4",children:t.jsx("h3",{className:"text-sm font-bold text-slate-800 dark:text-white mb-3",children:"Training Data"})}),(null==l?void 0:l.objections)&&l.objections.length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:["Objection Handling (",l.objections.length,")"]}),t.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:l.objections.map((e,s)=>t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700",children:[t.jsxs("p",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 mb-1",children:['"',e.objection,'"']}),t.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["‚Üí ",e.response]})]},s))})]}),(null==l?void 0:l.conversationExamples)&&l.conversationExamples.length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:["Conversation Examples (",l.conversationExamples.length,")"]}),t.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:l.conversationExamples.map((e,s)=>t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700",children:[t.jsxs("p",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 mb-1",children:['Customer: "',e.customerInput,'"']}),t.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:['Agent: "',e.expectedResponse,'"']})]},s))})]}),(null==l?void 0:l.intents)&&l.intents.length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:["Intent Training (",l.intents.length,")"]}),t.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:l.intents.map((e,s)=>t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700",children:[t.jsx("p",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 mb-1",children:e.name}),t.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:["Phrases: ",e.phrases]}),t.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Response: ",e.response]})]},s))})]})]}),r&&!l&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Best For Industries"}),t.jsx("div",{className:"flex flex-wrap gap-1.5",children:r.matchingIndustries.map((e,s)=>t.jsx("span",{className:"px-2.5 py-1 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 rounded-lg text-xs capitalize border border-emerald-200 dark:border-emerald-800",children:"all"===e?"All Industries":e.replace("-"," ")},s))})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Recommended For"}),t.jsx("div",{className:"flex flex-wrap gap-1.5",children:r.matchingProcesses.map((e,s)=>t.jsx("span",{className:"px-2.5 py-1 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 rounded-lg text-xs capitalize border border-blue-200 dark:border-blue-800",children:e.replace("-"," ")},s))})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Persona"}),t.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:r.persona})]}),t.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Guardrails"}),t.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:r.guardrailsLevel})]})]}),t.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4",children:t.jsx("h3",{className:"text-sm font-bold text-slate-800 dark:text-white mb-3",children:"Training Configuration"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Custom Instructions"}),t.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700 max-h-20 overflow-y-auto",children:t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:r.customInstructions})})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"First Message"}),t.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700",children:t.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 italic",children:['"',ys(r.firstMessage),'"']})})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Opening Script"}),t.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700 h-24 overflow-y-auto",children:t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:ys(r.openingScript)})})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Closing Script"}),t.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700 h-24 overflow-y-auto",children:t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:ys(r.closingScript)})})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Key Talking Points"}),t.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700 max-h-24 overflow-y-auto",children:t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 whitespace-pre-line",children:ys(r.keyTalkingPoints)})})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:["Objection Handling (",r.objections.length,")"]}),t.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:r.objections.map((e,s)=>t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700",children:[t.jsxs("p",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 mb-1",children:['"',e.objection,'"']}),t.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["‚Üí ",e.response]})]},s))})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:["Conversation Examples (",r.conversationExamples.length,")"]}),t.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:r.conversationExamples.map((e,s)=>t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700",children:[t.jsxs("p",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 mb-1",children:['Customer: "',e.customerInput,'"']}),t.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:['Agent: "',e.expectedResponse,'"']})]},s))})]})]})]}):null})()}),t.jsx("div",{className:"p-4 sm:p-5 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 flex-shrink-0",children:t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>{rs(!1),ds(!1),ms(null)},className:"flex-1 py-2.5 border border-slate-300 dark:border-slate-600 rounded-xl text-slate-700 dark:text-slate-300 font-medium hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:"Close"}),os?t.jsxs("button",{onClick:()=>{if(cs){const e=us.findIndex(e=>e.name===ns);if(-1!==e){const t=[...us];t[e]={...t[e],...cs},xs(t)}}ds(!1),ms(null)},className:"flex-1 py-2.5 bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-600 rounded-xl text-white font-medium transition-colors flex items-center justify-center gap-2",children:[t.jsx(z,{className:"w-4 h-4"}),"Save Changes"]}):t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>{ds(!0);const e=us.find(e=>e.name===ns)||E[ns];ms(e||{})},className:"flex-1 py-2.5 border border-orange-300 dark:border-orange-600 rounded-xl text-orange-600 dark:text-orange-400 font-medium hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors flex items-center justify-center gap-2",children:[t.jsx(ue,{className:"w-4 h-4"}),"Edit"]}),t.jsxs("button",{onClick:()=>{ts(e=>({...e,selectedTemplate:ns})),rs(!1)},className:"flex-1 py-2.5 common-button-bg rounded-xl font-medium hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[t.jsx(z,{className:"w-4 h-4"}),"Select Template"]})]})]})})]})]}),document.body)]}):Ee&&ye?t.jsxs("div",{className:"space-y-3 sm:space-y-4 lg:space-y-6 w-full",children:[t.jsx(h,{children:t.jsxs("div",{className:"p-4 sm:p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[t.jsx("button",{onClick:()=>j("/agents"),className:"common-button-bg2 p-1.5 sm:p-2.5 rounded-lg sm:rounded-xl flex-shrink-0 touch-manipulation",children:t.jsx(Q,{className:"w-4 sm:w-5 h-4 sm:h-5 text-slate-600 dark:text-slate-300"})}),t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 common-bg-icons flex items-center justify-center flex-shrink-0 rounded-lg sm:rounded-xl",children:t.jsx(D,{className:"w-5 h-5 sm:w-6 sm:h-6 text-black dark:text-white"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("h1",{className:"text-base sm:text-xl lg:text-2xl font-bold text-slate-800 dark:text-white leading-tight truncate",children:ye.name}),t.jsx("span",{className:"inline-flex items-center px-2 py-0.5 sm:px-3 sm:py-1 rounded-full text-xs font-medium mt-1 "+("Published"===ye.status||ye.is_active?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":"bg-orange-100 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400"),children:"Published"===ye.status||ye.is_active?"Live":"Unpublished"})]})]}),t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[t.jsxs("button",{onClick:()=>j(`/agents/${ye.id}/edit`),className:"common-button-bg2 flex items-center justify-center gap-1.5 px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg touch-manipulation",children:[t.jsx(F,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),t.jsx("span",{className:"hidden sm:inline text-xs sm:text-sm font-medium",children:"Edit"})]}),("Published"===ye.status||ye.is_active)&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>Ze(!0),className:"common-button-bg flex items-center justify-center gap-1.5 px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg touch-manipulation",children:[t.jsx(_,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),t.jsx("span",{className:"hidden sm:inline text-xs sm:text-sm font-medium text-white",children:"Test"})]}),t.jsxs("button",{onClick:()=>ua(ye.id),disabled:Ds.has(ye.id),className:"common-button-bg2 flex items-center justify-center gap-1.5 px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg touch-manipulation "+(Ds.has(ye.id)?"opacity-50 cursor-not-allowed":""),children:[Ds.has(ye.id)?t.jsx("div",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin"}):t.jsx(U,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),t.jsx("span",{className:"hidden sm:inline text-xs sm:text-sm font-medium",children:Ds.has(ye.id)?"...":"Pause"})]})]}),!("Published"===ye.status||ye.is_active)&&t.jsxs("button",{onClick:()=>da(ye.id),disabled:Ds.has(ye.id),className:"common-button-bg flex items-center justify-center gap-1.5 px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg touch-manipulation "+(Ds.has(ye.id)?"opacity-50 cursor-not-allowed":""),children:[Ds.has(ye.id)?t.jsx("div",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):t.jsx(_,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),t.jsx("span",{className:"text-xs sm:text-sm font-medium text-white",children:Ds.has(ye.id)?"...":"Publish"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-3 mt-4",children:[t.jsxs("div",{className:"p-2 sm:p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[t.jsx(X,{className:"w-3.5 h-3.5 text-slate-600 dark:text-slate-400"}),t.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Language"})]}),t.jsx("p",{className:"text-sm font-semibold text-slate-800 dark:text-white",children:ye.language})]}),t.jsxs("div",{className:"p-2 sm:p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[t.jsx(Z,{className:"w-3.5 h-3.5 text-slate-600 dark:text-slate-400"}),t.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Voice"})]}),t.jsx("p",{className:"text-sm font-semibold text-slate-800 dark:text-white",children:ye.voice})]}),t.jsxs("div",{className:"p-2 sm:p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[t.jsx(ee,{className:"w-3.5 h-3.5 text-slate-600 dark:text-slate-400"}),t.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Persona"})]}),t.jsx("p",{className:"text-sm font-semibold text-slate-800 dark:text-white truncate",children:ye.persona})]}),t.jsxs("div",{className:"p-2 sm:p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[t.jsx(te,{className:"w-3.5 h-3.5 text-slate-600 dark:text-slate-400"}),t.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Created"})]}),t.jsx("p",{className:"text-sm font-semibold text-slate-800 dark:text-white",children:new Date(ye.createdAt).toLocaleDateString()})]})]})]})}),t.jsx("div",{className:"sm:hidden",children:t.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 snap-x snap-mandatory scrollbar-hide",children:[t.jsx(h,{className:"flex-shrink-0 w-32 snap-start",children:t.jsx("div",{className:"p-2.5",children:t.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[t.jsx("div",{className:"w-6 h-6 bg-blue-50 dark:bg-blue-900/20 rounded-md flex items-center justify-center mb-1",children:t.jsx(Z,{className:"w-3 h-3 text-blue-600 dark:text-blue-400"})}),t.jsx("p",{className:"text-lg font-bold text-slate-800 dark:text-white",children:ye.stats.conversations.toLocaleString()}),t.jsx("p",{className:"text-[10px] text-slate-600 dark:text-slate-400 text-center leading-tight",children:"Conversations"}),ye.stats.conversations>0?t.jsx("span",{className:"text-[10px] font-medium text-green-600 dark:text-green-400",children:"No data"}):t.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-500",children:"No data"})]})})}),t.jsx(h,{className:"flex-shrink-0 w-32 snap-start",children:t.jsx("div",{className:"p-2.5",children:t.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[t.jsx("div",{className:"w-6 h-6 bg-green-50 dark:bg-green-900/20 rounded-md flex items-center justify-center mb-1",children:t.jsx(z,{className:"w-3 h-3 text-green-600 dark:text-green-400"})}),t.jsxs("p",{className:"text-lg font-bold text-slate-800 dark:text-white",children:[ye.stats.successRate,"%"]}),t.jsx("p",{className:"text-[10px] text-slate-600 dark:text-slate-400 text-center leading-tight",children:"Success Rate"}),ye.stats.successRate>0?t.jsx("span",{className:"text-[10px] font-medium text-green-600 dark:text-green-400",children:"No data"}):t.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-500",children:"No data"})]})})}),t.jsx(h,{className:"flex-shrink-0 w-32 snap-start",children:t.jsx("div",{className:"p-2.5",children:t.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[t.jsx("div",{className:"w-6 h-6 bg-purple-50 dark:bg-purple-900/20 rounded-md flex items-center justify-center mb-1",children:t.jsx(te,{className:"w-3 h-3 text-purple-600 dark:text-purple-400"})}),t.jsxs("p",{className:"text-lg font-bold text-slate-800 dark:text-white",children:[ye.stats.avgResponseTime,"s"]}),t.jsx("p",{className:"text-[10px] text-slate-600 dark:text-slate-400 text-center leading-tight",children:"Avg Response"}),ye.stats.avgResponseTime>0?t.jsx("span",{className:"text-[10px] font-medium text-green-600 dark:text-green-400",children:"No data"}):t.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-500",children:"No data"})]})})}),t.jsx(h,{className:"flex-shrink-0 w-32 snap-start",children:t.jsx("div",{className:"p-2.5",children:t.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[t.jsx("div",{className:"w-6 h-6 bg-orange-50 dark:bg-orange-900/20 rounded-md flex items-center justify-center mb-1",children:t.jsx(ee,{className:"w-3 h-3 text-orange-600 dark:text-orange-400"})}),t.jsx("p",{className:"text-lg font-bold text-slate-800 dark:text-white",children:ye.stats.activeUsers}),t.jsx("p",{className:"text-[10px] text-slate-600 dark:text-slate-400 text-center leading-tight",children:"Active Users"}),ye.stats.activeUsers>0?t.jsx("span",{className:"text-[10px] font-medium text-green-600 dark:text-green-400",children:"No data"}):t.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-500",children:"No data"})]})})})]})}),t.jsxs("div",{className:"hidden sm:grid grid-cols-2 md:grid-cols-4 gap-3",children:[t.jsx(h,{className:"hover:shadow-md transition-all duration-200",children:t.jsxs("div",{className:"p-3.5",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-50 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:t.jsx(Z,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-xl font-bold text-slate-800 dark:text-white",children:ye.stats.conversations.toLocaleString()}),t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Conversations"})]})]}),t.jsx("div",{className:"flex items-center gap-1",children:ye.stats.conversations>0?t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:"No data"}):t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:"No data yet"})})]})}),t.jsx(h,{className:"hover:shadow-md transition-all duration-200",children:t.jsxs("div",{className:"p-3.5",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("div",{className:"w-10 h-10 bg-green-50 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:t.jsx(z,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-xl font-bold text-slate-800 dark:text-white",children:[ye.stats.successRate,"%"]}),t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Success Rate"})]})]}),t.jsx("div",{className:"flex items-center gap-1",children:ye.stats.successRate>0?t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:"No data"}):t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:"No data yet"})})]})}),t.jsx(h,{className:"hover:shadow-md transition-all duration-200",children:t.jsxs("div",{className:"p-3.5",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("div",{className:"w-10 h-10 bg-purple-50 dark:bg-purple-900/20 rounded-lg flex items-center justify-center",children:t.jsx(te,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-xl font-bold text-slate-800 dark:text-white",children:[ye.stats.avgResponseTime,"s"]}),t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Avg Response"})]})]}),t.jsx("div",{className:"flex items-center gap-1",children:ye.stats.avgResponseTime>0?t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:"No data"}):t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:"No data yet"})})]})}),t.jsx(h,{className:"hover:shadow-md transition-all duration-200",children:t.jsxs("div",{className:"p-3.5",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("div",{className:"w-10 h-10 bg-orange-50 dark:bg-orange-900/20 rounded-lg flex items-center justify-center",children:t.jsx(ee,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-xl font-bold text-slate-800 dark:text-white",children:ye.stats.activeUsers}),t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Active Users"})]})]}),t.jsx("div",{className:"flex items-center gap-1",children:ye.stats.activeUsers>0?t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:"No data"}):t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:"No data yet"})})]})})]}),t.jsx("div",{className:"mt-3 sm:mt-4 lg:mt-6",children:t.jsx(fe,{agentId:ye.id,agentName:ye.name,isPublished:!0})}),("Published"===ye.status||ye.is_active)&&t.jsx("div",{className:"mt-4 sm:mt-6",children:t.jsx(ve,{currentAgent:ye})}),Ye&&ye&&t.jsx(Ct,{agent:ye,onClose:()=>Qe(!1)}),et&&t.jsx("div",{className:"fixed inset-0 bg-black/50 z-[70] flex items-center justify-center p-4",children:t.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl w-full max-w-md shadow-xl border border-slate-200 dark:border-slate-700",children:t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 dark:bg-red-900/20 rounded-full mx-auto mb-4",children:t.jsx(O,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),t.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-white text-center mb-2",children:"Delete Agent?"}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 text-center mb-6",children:"Are you sure you want to delete this agent? This action cannot be undone and all associated data will be permanently removed."}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:ga,disabled:lt,className:"flex-1 px-4 py-2.5 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-700 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),t.jsx("button",{onClick:pa,disabled:lt,className:"flex-1 px-4 py-2.5 bg-red-600 hover:bg-red-700 text-white rounded-xl transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:lt?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),t.jsx("span",{children:"Deleting..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(O,{className:"w-4 h-4"}),t.jsx("span",{children:"Delete"})]})})]})]})})}),t.jsxs("div",{className:"mt-4 sm:mt-6",children:[t.jsx("div",{className:"lg:hidden",children:t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("button",{onClick:()=>j(`/agents/${ye.id}/train`,{state:{from:"view"}}),className:"common-bg-icons hover:shadow-md transition-all duration-200 p-2 rounded-lg touch-manipulation group",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-7 h-7 bg-blue-50 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:t.jsx(se,{className:"w-3.5 h-3.5 text-blue-600 dark:text-blue-400"})}),t.jsx("p",{className:"text-xs font-medium text-slate-800 dark:text-white",children:"Train"})]})}),t.jsx("button",{className:"common-bg-icons hover:shadow-md transition-all duration-200 p-2 rounded-lg touch-manipulation group",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-7 h-7 bg-purple-50 dark:bg-purple-900/20 rounded-lg flex items-center justify-center",children:t.jsx(ae,{className:"w-3.5 h-3.5 text-purple-600 dark:text-purple-400"})}),t.jsx("p",{className:"text-xs font-medium text-slate-800 dark:text-white",children:"Export"})]})})]})}),t.jsx("div",{className:"hidden lg:block",children:t.jsx(h,{children:t.jsxs("div",{className:"p-4 lg:p-5",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-8 h-8 bg-slate-50 dark:bg-slate-800 rounded-lg flex items-center justify-center",children:t.jsx(B,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"})}),t.jsx("h3",{className:"text-base font-semibold text-slate-800 dark:text-white",children:"Quick Actions"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx("button",{onClick:()=>j(`/agents/${ye.id}/train`,{state:{from:"list"}}),className:"common-bg-icons hover:shadow-md transition-all duration-200 p-4 rounded-lg touch-manipulation group",children:t.jsxs("div",{className:"flex flex-col items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-50 dark:bg-blue-900/20 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform",children:t.jsx(se,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm font-semibold text-slate-800 dark:text-white",children:"Train Agent"}),t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-0.5",children:"Improve responses"})]})]})}),t.jsx("button",{className:"common-bg-icons hover:shadow-md transition-all duration-200 p-4 rounded-lg touch-manipulation group",children:t.jsxs("div",{className:"flex flex-col items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-purple-50 dark:bg-purple-900/20 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform",children:t.jsx(ae,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm font-semibold text-slate-800 dark:text-white",children:"Export Data"}),t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-0.5",children:"Download config"})]})]})})]})]})})})]}),Xe&&ye&&"Published"===ye.status&&t.jsx("div",{className:"fixed inset-0 bg-black/20 z-[60] flex items-center justify-center p-3 sm:p-4 -top-8",children:t.jsxs("div",{className:"bg-white/95 dark:bg-slate-900/95 backdrop-blur-md rounded-2xl w-full max-w-2xl h-[80vh] max-h-[600px] relative flex flex-col shadow-xl border border-white/20 dark:border-slate-700/50",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200/50 dark:border-slate-700/50",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),t.jsxs("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:["Test ",ye.name]})]}),t.jsx("button",{onClick:async()=>{if(Ys)try{await Ys.disconnect()}catch(e){}Ze(!1),St(!1),ra(!1),$s("disconnected"),zs("Ready to connect"),Mt&&(clearInterval(Mt),Lt(null)),Tt(0),kt("call")},className:"w-8 h-8 flex items-center justify-center hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:t.jsx(P,{className:"w-4 h-4 text-slate-400"})})]}),t.jsx("div",{className:"flex border-b border-slate-200/50 dark:border-slate-700/50",children:[{id:"call",label:"Voice",icon:le},{id:"conversation",label:"Conversation",icon:Z}].map(({id:e,label:s,icon:a})=>t.jsxs("button",{onClick:()=>kt(e),className:"flex-1 flex items-center justify-center gap-2 py-3 text-xs font-medium transition-colors "+(jt===e?"text-slate-900 dark:text-white border-b-2 border-slate-900 dark:border-white bg-slate-50/50 dark:bg-slate-800/50":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"),children:[t.jsx(a,{className:"w-4 h-4"}),t.jsx("span",{children:s})]},e))}),t.jsxs("div",{className:"flex-1 overflow-hidden",children:["call"===jt&&t.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-6",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mb-4 mx-auto transition-all "+("connected"===Os?"bg-green-100 dark:bg-green-900/20":"connecting"===Os?"bg-yellow-100 dark:bg-yellow-900/20 animate-pulse":"bg-slate-100 dark:bg-slate-800/50"),children:t.jsx(le,{className:"w-8 h-8 "+("connected"===Os?"text-green-600 dark:text-green-400":"connecting"===Os?"text-yellow-600 dark:text-yellow-400":"text-slate-400")})}),t.jsx("h3",{className:"text-lg font-medium text-slate-800 dark:text-white mb-1",children:"connected"===Os?"Connected":"connecting"===Os?"Connecting...":"Ready to Call"}),t.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:Hs}),Nt&&t.jsx("p",{className:"text-sm font-mono text-slate-600 dark:text-slate-300 mt-2",children:Sa(At)})]}),t.jsx("div",{className:"flex items-center gap-3",children:Nt||Ks?Nt?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:Ca,className:"p-3 rounded-xl transition-colors "+(Gs?"bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400":"bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400"),title:Gs?"Unmute":"Mute",children:Gs?t.jsx(ce,{className:"w-5 h-5"}):t.jsx(ne,{className:"w-5 h-5"})}),t.jsx("button",{onClick:Na,className:"p-3 bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-xl hover:bg-red-200 dark:hover:bg-red-900/40 transition-colors",title:"End Call",children:t.jsx(le,{className:"w-5 h-5"})})]}):t.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 text-sm",children:[t.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 dark:border-slate-600 border-t-slate-900 dark:border-t-white rounded-full animate-spin"}),t.jsx("span",{children:"Connecting..."})]}):t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:ka,disabled:Ot||Ks,className:"flex items-center gap-2 px-6 py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl hover:bg-slate-800 dark:hover:bg-slate-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:[t.jsx(xe,{className:"w-4 h-4"}),Ks?"Connecting...":"Start Call"]}),t.jsxs("button",{onClick:ja,className:"flex items-center gap-2 px-4 py-3 text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200 transition-colors text-sm",children:[t.jsx(re,{className:"w-4 h-4"}),"Test"]})]})}),Nt&&t.jsx("div",{className:"mt-6 text-center",children:t.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-slate-500 dark:text-slate-400",children:[t.jsx("div",{className:"w-2 h-2 rounded-full "+(Gs?"bg-red-500":"bg-green-500")}),Gs?"Muted":"Listening"]})})]}),"conversation"===jt&&t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[0===Dt.length?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(Z,{className:"w-8 h-8 text-slate-300 dark:text-slate-600 mx-auto mb-3"}),t.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Start a conversation to see messages"})]}):Dt.map(e=>t.jsx("div",{className:"flex mb-4 "+(e.isUser?"justify-end":"justify-start"),children:t.jsxs("div",{className:"flex gap-3 max-w-[80%] "+(e.isUser?"flex-row-reverse":""),children:[t.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 "+(e.isUser?"bg-blue-500 text-white":"bg-green-500 text-white"),children:e.isUser?t.jsx("span",{className:"text-sm font-medium",children:"U"}):t.jsx("span",{className:"text-sm font-medium",children:"AI"})}),t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:e.isUser?"You":"AI Employee"}),t.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),e.source&&t.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full "+("voice"===e.source?"bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400"),children:"voice"===e.source?"üéôÔ∏è":"üí¨"})]}),t.jsx("div",{className:"px-4 py-2 rounded-2xl text-sm "+(e.isUser?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200"),children:e.text})]})]})},e.id)),Ot&&t.jsx("div",{className:"flex justify-start mb-4",children:t.jsxs("div",{className:"flex gap-3 max-w-[80%]",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500 text-white flex items-center justify-center flex-shrink-0",children:t.jsx("span",{className:"text-sm font-medium",children:"AI"})}),t.jsx("div",{className:"flex flex-col",children:t.jsx("div",{className:"px-4 py-2 rounded-2xl bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200",children:t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-pulse"}),t.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-pulse",style:{animationDelay:"0.1s"}}),t.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}})]})})})]})})]}),t.jsxs("div",{className:"p-4 border-t border-slate-200/50 dark:border-slate-700/50",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:Ft,onChange:e=>Bt(e.target.value),onKeyPress:e=>{"Enter"!==e.key||Ot||ba()},placeholder:"connected"===Os?"Type a message or use voice...":"Type a message...",className:"flex-1 px-3 py-2 bg-slate-50 dark:bg-slate-800 border-0 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-900/10 dark:focus:ring-white/10 text-slate-700 dark:text-slate-300 text-sm placeholder-slate-400 dark:placeholder-slate-500",disabled:Ot}),t.jsx("button",{onClick:ba,disabled:!Ft.trim()||Ot,className:"px-3 py-2 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-lg hover:bg-slate-800 dark:hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:t.jsx(pe,{className:"w-4 h-4"})})]}),"connected"===Os&&t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2 text-center",children:"üî¥ Live conversation ‚Ä¢ Voice and text messages"})]})]})]})]})}),nt&&t.jsx("div",{className:"fixed inset-0 bg-black/50 z-[70] flex items-center justify-center p-4",children:t.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl w-full max-w-md shadow-xl border border-slate-200 dark:border-slate-700",children:t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-full mx-auto mb-4",children:t.jsx(be,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),t.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-white text-center mb-2",children:"Publish Agent?"}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 text-center mb-6",children:"Are you sure you want to publish this agent? It will become available to users."}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:ma,disabled:ct,className:"flex-1 h-11 px-4 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-700 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:"Cancel"}),t.jsx("button",{onClick:ca,disabled:ct,className:"flex-1 h-11 px-4 rounded-xl transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 common-button-bg",children:ct?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),t.jsx("span",{children:"Publishing..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(be,{className:"w-4 h-4"}),t.jsx("span",{children:"Publish"})]})})]})]})})}),ut&&t.jsx("div",{className:"fixed inset-0 bg-black/50 z-[70] flex items-center justify-center p-4",children:t.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl w-full max-w-md shadow-xl border border-slate-200 dark:border-slate-700",children:t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-amber-100 dark:bg-amber-900/20 rounded-full mx-auto mb-4",children:t.jsx(me,{className:"w-6 h-6 text-amber-600 dark:text-amber-400"})}),t.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-white text-center mb-2",children:"Pause Agent?"}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 text-center mb-6",children:"Are you sure you want to pause this agent? It will no longer be available to users."}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:ha,disabled:gt,className:"flex-1 h-11 px-4 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-700 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:"Cancel"}),t.jsx("button",{onClick:xa,disabled:gt,className:"flex-1 h-11 px-4 rounded-xl transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 common-button-bg2",children:gt?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-slate-400 dark:border-slate-300 border-t-slate-700 dark:border-t-slate-100"}),t.jsx("span",{children:"Pausing..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(me,{className:"w-4 h-4"}),t.jsx("span",{children:"Pause"})]})})]})]})})})]}):t.jsx(x,{to:"/agents",replace:!0})};export{Tt as default};
