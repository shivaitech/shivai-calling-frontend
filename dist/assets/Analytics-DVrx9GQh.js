import{r as e,j as t,k as s,e as a}from"./index-6jNFQTrW.js";import{G as l}from"./GlassCard-Gx_AgK7M.js";import{i as r}from"./utils-Cr29uOvE.js";import{S as n}from"./index-CjiCu6Xh.js";import{M as i}from"./message-square-DFh2zsUu.js";import{X as d}from"./x-DSaQH5UW.js";import{C as o}from"./clock-CiKsyhya.js";import{M as c}from"./map-pin-giCj8kNe.js";import{P as x}from"./phone-CIRKwmB1.js";import{F as m}from"./file-text-CuFXxtfK.js";import{L as h}from"./loader-2-Dq5ngpKE.js";import{U as u}from"./users-DpAUgSNk.js";import{B as g}from"./bot-B9l-7Cvk.js";import{c as p}from"./createLucideIcon-CzZCKr5P.js";import{P as b}from"./pause-DW2HjlJV.js";import{P as j}from"./play-BpfAFTsa.js";import{a as f,F as v,P as k,S as N,M as w}from"./Pagination-BFax-IAl.js";import{D as y}from"./download-CUbf3N9d.js";import{X as S}from"./x-circle-CMkGaEwA.js";import{M as D}from"./mail-Crh5A194.js";import{T as C}from"./trending-up-BW-WYyKw.js";import{C as T}from"./check-circle-CGryLMFB.js";import{C as A}from"./calendar-BVSrdZ3i.js";import{C as _}from"./chevron-down-CcCmHmok.js";import{S as M}from"./search-DF2mxqft.js";import{E as R}from"./eye-C61Jmmb1.js";import"./chevron-left-yBCNrW8-.js";import"./chevron-right-jHAKk6au.js";const L=p("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),P=p("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]),U=p("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]),E=p("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),$=p("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),I=({session:a,onClose:l})=>{var r,n,p,v,k,N,w;const[_,M]=e.useState([]),[R,U]=e.useState(!0),[I,F]=e.useState(null),[O,q]=e.useState("transcripts"),[z,V]=e.useState(null),[B,G]=e.useState(!1),[X,H]=e.useState(null),[W,Y]=e.useState(!1),[J,K]=e.useState(0),[Q,Z]=e.useState(0),[ee,te]=e.useState(1),[se,ae]=e.useState(!1),[le,re]=e.useState(1),ne=e.useRef(null),ie=e.useRef(null);e.useEffect(()=>{(async()=>{if(null==a?void 0:a.session_id){U(!0),F(null);try{const e=await s.getSessionTranscripts(a.session_id);M(e.transcripts||[])}catch(e){F(e.message||"Failed to load transcripts")}finally{U(!1)}}})(),(async()=>{var e,t;if((null==(e=null==a?void 0:a.agent)?void 0:e.id)||(null==a?void 0:a.agent_id)){G(!0),H(null);try{const e=(null==(t=a.agent)?void 0:t.id)||a.agent_id,l=await s.getCallSummary(e);V(l)}catch(l){H(l.message||"Failed to load call summary")}finally{G(!1)}}})()},[null==a?void 0:a.session_id,null==(r=null==a?void 0:a.agent)?void 0:r.id,null==a?void 0:a.agent_id]);const de=e=>{ne.current&&(ne.current.currentTime=Math.max(0,Math.min(Q,ne.current.currentTime+e)))},oe=(e,t="info")=>{const s=document.createElement("div");s.className=`fixed top-4 right-4 ${{success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500"}[t]} text-white px-4 py-3 rounded-lg shadow-lg z-[100] transition-all`,s.innerHTML=`\n      <div class="flex items-center gap-2">\n        <span class="text-sm">${e}</span>\n        <button onclick="this.parentElement.parentElement.remove()" class="ml-2 text-white/80 hover:text-white">&times;</button>\n      </div>\n    `,document.body.appendChild(s),setTimeout(()=>{s.parentElement&&(s.style.opacity="0",setTimeout(()=>s.remove(),300))},3e3)},ce=e=>{if(!e||isNaN(e))return"0:00";return`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`};if(!a)return null;const xe=e=>e?new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"N/A";return t.jsx("div",{className:"fixed inset-0 -top-8 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-2 sm:p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl sm:rounded-2xl shadow-2xl w-full max-w-3xl max-h-[95vh] sm:max-h-[90vh] overflow-hidden flex flex-col my-auto",children:[t.jsxs("div",{className:"p-3 sm:p-4 border-b border-slate-200 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2 sm:mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[t.jsx("div",{className:"w-7 h-7 sm:w-10 sm:h-10 common-bg-icons rounded-lg flex items-center justify-center flex-shrink-0",children:t.jsx(i,{className:"w-3.5 h-3.5 sm:w-5 sm:h-5 text-slate-600 dark:text-slate-400"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h2",{className:"text-sm sm:text-lg font-semibold text-slate-800 dark:text-white truncate",children:"Session Transcript"}),t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate font-mono",children:a.session_id||a.id})]})]}),t.jsx("button",{onClick:l,className:"p-1 sm:p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors flex-shrink-0",children:t.jsx(d,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-600 dark:text-slate-400"})})]}),t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-1.5 sm:gap-2 mb-2 sm:mb-3",children:[t.jsxs("div",{className:"flex items-center gap-1.5 min-w-0 bg-slate-50 dark:bg-slate-900/30 px-1.5 sm:px-2 py-1.5 rounded-md",children:[t.jsx(o,{className:"w-3 h-3 text-slate-500 dark:text-slate-400 flex-shrink-0"}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-[10px] sm:text-xs text-slate-500 dark:text-slate-400 hidden sm:block",children:"Date & Time"}),t.jsx("span",{className:"text-[10px] sm:text-xs font-medium text-slate-700 dark:text-slate-300 truncate block",children:a.start_time?new Date(a.start_time).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"})]})]}),t.jsxs("div",{className:"flex items-center gap-1.5 min-w-0 bg-slate-50 dark:bg-slate-900/30 px-1.5 sm:px-2 py-1.5 rounded-md",children:[t.jsx(c,{className:"w-3 h-3 text-slate-500 dark:text-slate-400 flex-shrink-0"}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-[10px] sm:text-xs text-slate-500 dark:text-slate-400 hidden sm:block",children:"IP Address"}),t.jsx("span",{className:"text-[10px] sm:text-xs font-medium text-slate-700 dark:text-slate-300 truncate block",children:a.user_ip||a.ip||"Unknown"})]})]}),t.jsxs("div",{className:"flex items-center gap-1.5 min-w-0 col-span-2 sm:col-span-1 bg-slate-50 dark:bg-slate-900/30 px-1.5 sm:px-2 py-1.5 rounded-md",children:[t.jsx(x,{className:"w-3 h-3 text-slate-500 dark:text-slate-400 flex-shrink-0"}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("p",{className:"text-[10px] sm:text-xs text-slate-500 dark:text-slate-400 hidden sm:block",children:"Device • Duration"}),t.jsxs("span",{className:"text-[10px] sm:text-xs font-medium text-slate-700 dark:text-slate-300 truncate block",children:[(null==(n=a.device)?void 0:n.deviceType)||(null==(p=a.device)?void 0:p.device_type)||(null==(v=a.device)?void 0:v.browser)||"Unknown"," • ",(e=>{if(!e)return"0m 0s";return`${Math.floor(e/60)}m ${Math.floor(e%60)}s`})(a.duration_seconds)]})]})]})]}),t.jsxs("div",{className:"flex gap-1 p-1 bg-slate-100 dark:bg-slate-900/30 rounded-lg",children:[t.jsxs("button",{onClick:()=>q("transcripts"),className:"flex-1 px-2 sm:px-3 py-2 text-[11px] sm:text-sm font-medium rounded-md transition-all duration-200 "+("transcripts"===O?"bg-white dark:bg-slate-700 text-slate-800 dark:text-white shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"),children:[t.jsx(i,{className:"w-3 h-3 sm:w-4 sm:h-4 inline mr-1"}),t.jsx("span",{className:"hidden xs:inline",children:"Call "}),"Transcripts"]}),t.jsxs("button",{onClick:()=>q("recording"),className:"flex-1 px-2 sm:px-3 py-2 text-[11px] sm:text-sm font-medium rounded-md transition-all duration-200 "+("recording"===O?"bg-white dark:bg-slate-700 text-slate-800 dark:text-white shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"),children:[t.jsx(m,{className:"w-3 h-3 sm:w-4 sm:h-4 inline mr-1"}),t.jsx("span",{className:"hidden xs:inline",children:"Recording & "}),"Summary"]})]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4",children:["transcripts"===O&&t.jsxs("div",{className:"common-bg-icons p-3 sm:p-4 rounded-lg sm:rounded-xl",children:[t.jsx("h3",{className:"text-sm sm:text-base font-semibold text-slate-800 dark:text-white mb-3",children:"Conversation Transcript"}),t.jsx("div",{className:"space-y-1 max-h-[250px] sm:max-h-[400px] overflow-y-auto",children:R?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx(h,{className:"w-6 h-6 sm:w-8 sm:h-8 text-blue-500 animate-spin"})}):I?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(m,{className:"w-10 h-10 sm:w-12 sm:h-12 text-red-300 dark:text-red-600 mx-auto mb-3"}),t.jsx("p",{className:"text-xs sm:text-sm text-red-500 dark:text-red-400",children:I})]}):_&&_.length>0?t.jsxs(t.Fragment,{children:[t.jsxs("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400 mb-2",children:["Conversation started on ",(me=a.start_time,me?new Date(me).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A")]}),_.map((e,s)=>t.jsx("div",{className:"flex flex-col gap-1.5 py-1.5 sm:py-2",children:"user"===e.role?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex justify-end mb-1",children:t.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["CUSTOMER • ",xe(e.timestamp||e.created_at)]})}),t.jsxs("div",{className:"flex items-start gap-1.5 sm:gap-2 justify-end",children:[t.jsx("div",{className:"max-w-[80%] bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-2xl rounded-tr-sm px-3 py-2 sm:px-4 sm:py-3 shadow-sm",children:t.jsx("p",{className:"text-xs sm:text-sm",children:e.text||e.content})}),t.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-gradient-to-br from-slate-600 to-slate-700 flex items-center justify-center flex-shrink-0",children:t.jsx(u,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-white"})})]})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex justify-start mb-1",children:t.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["AI EMPLOYEE • ",xe(e.timestamp||e.created_at)]})}),t.jsxs("div",{className:"flex items-start gap-1.5 sm:gap-2",children:[t.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center flex-shrink-0",children:t.jsx(g,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-white"})}),t.jsx("div",{className:"max-w-[80%] common-bg-icons rounded-2xl rounded-tl-sm px-3 py-2 sm:px-4 sm:py-3 border border-slate-200 dark:border-slate-700",children:t.jsx("p",{className:"text-xs sm:text-sm text-slate-800 dark:text-white",children:e.text||e.content})})]})]})},s)),t.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-3 flex items-center gap-1",children:[t.jsx(o,{className:"w-3 h-3"}),"Session ended • Resolution: Session completed"]})]}):t.jsxs("div",{className:"text-center py-8",children:[t.jsx(m,{className:"w-10 h-10 sm:w-12 sm:h-12 text-slate-300 dark:text-slate-600 mx-auto mb-3"}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400",children:"No transcripts available for this session"})]})})]}),"recording"===O&&t.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[t.jsxs("div",{className:"common-bg-icons p-3 sm:p-4 rounded-lg sm:rounded-xl",children:[t.jsxs("h3",{className:"text-sm sm:text-base font-semibold text-slate-800 dark:text-white mb-3 flex items-center gap-2",children:[t.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z"})}),"Call Recording"]}),t.jsx("div",{className:"bg-slate-50 dark:bg-slate-900/30 p-2.5 sm:p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:(null==(k=null==a?void 0:a.recording)?void 0:k.url)?t.jsxs(t.Fragment,{children:[t.jsx("audio",{ref:ne,onTimeUpdate:()=>{ne.current&&K(ne.current.currentTime)},onLoadedMetadata:()=>{ne.current&&Z(ne.current.duration)},onEnded:()=>Y(!1),src:a.recording.url}),a.recording.status&&t.jsxs("div",{className:"mb-3 flex flex-wrap items-center gap-1.5 sm:gap-2",children:[t.jsxs("span",{className:"inline-flex items-center gap-1 sm:gap-1.5 px-2 sm:px-2.5 py-0.5 sm:py-1 rounded-full text-[10px] sm:text-xs font-medium "+("completed"===a.recording.status?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":"processing"===a.recording.status?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-slate-100 text-slate-700 dark:bg-slate-900/20 dark:text-slate-400"),children:[t.jsx("div",{className:"w-1.5 h-1.5 rounded-full "+("completed"===a.recording.status?"bg-green-500":"bg-yellow-500")}),"completed"===a.recording.status?"Recording Available":"Processing"]}),a.recording.egress_id&&t.jsxs("span",{className:"text-[10px] sm:text-xs text-slate-500 dark:text-slate-400 font-mono truncate max-w-[120px] sm:max-w-none",children:["ID: ",a.recording.egress_id.substring(0,8),"..."]})]}),t.jsx("div",{ref:ie,onClick:e=>{if(!ne.current||!ie.current)return;const t=ie.current.getBoundingClientRect(),s=(e.clientX-t.left)/t.width*Q;ne.current.currentTime=s,K(s)},className:"relative h-1 bg-slate-300 dark:bg-slate-700 rounded-full cursor-pointer mb-2",children:t.jsx("div",{className:"absolute top-0 left-0 h-full bg-blue-600 rounded-full transition-all",style:{width:(Q>0?J/Q*100:0)+"%"}})}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-[10px] sm:text-xs text-slate-600 dark:text-slate-400 w-8 sm:w-10",children:ce(J)}),t.jsx("span",{className:"text-[10px] sm:text-xs text-slate-600 dark:text-slate-400 w-8 sm:w-10 text-right",children:ce(Q||a.duration_seconds||0)})]}),t.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2",children:[t.jsx("button",{onClick:()=>de(-10),className:"p-1 sm:p-1.5 hover:bg-slate-200 dark:hover:bg-slate-700 rounded transition-colors",title:"Rewind 10s",children:t.jsx(P,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-slate-600 dark:text-slate-400"})}),t.jsx("button",{onClick:()=>{ne.current&&(W?ne.current.pause():ne.current.play(),Y(!W))},className:"p-1.5 sm:p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-full transition-colors",title:W?"Pause":"Play",children:W?t.jsx(b,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4",fill:"currentColor"}):t.jsx(j,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 ml-0.5",fill:"currentColor"})}),t.jsx("button",{onClick:()=>de(10),className:"p-1 sm:p-1.5 hover:bg-slate-200 dark:hover:bg-slate-700 rounded transition-colors",title:"Forward 10s",children:t.jsx(f,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-slate-600 dark:text-slate-400"})}),t.jsx("div",{className:"w-px h-4 bg-slate-300 dark:bg-slate-600 mx-0.5 sm:mx-1 hidden xs:block"}),t.jsxs("button",{onClick:()=>{const e=[.5,.75,1,1.25,1.5,2],t=e.indexOf(le),s=e[(t+1)%e.length];re(s),ne.current&&(ne.current.playbackRate=s)},className:"px-1.5 sm:px-2 py-0.5 sm:py-1 hover:bg-slate-200 dark:hover:bg-slate-700 rounded transition-colors text-[10px] sm:text-xs text-slate-600 dark:text-slate-400",title:"Playback speed",children:[le,"x"]}),t.jsx("button",{onClick:()=>{ne.current&&(se?(ne.current.volume=ee,ae(!1)):(ne.current.volume=0,ae(!0)))},className:"p-1 sm:p-1.5 hover:bg-slate-200 dark:hover:bg-slate-700 rounded transition-colors",title:se?"Unmute":"Mute",children:se?t.jsx($,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-slate-600 dark:text-slate-400"}):t.jsx(E,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-slate-600 dark:text-slate-400"})}),t.jsx("button",{onClick:async()=>{var e;const t=null==(e=null==a?void 0:a.recording)?void 0:e.url;if(t)try{oe("Downloading recording...","info");const e=await fetch(t);if(!e.ok)throw new Error("Failed to fetch recording");const s=await e.blob(),l=window.URL.createObjectURL(s),r=document.createElement("a");r.href=l,r.download=`recording-${a.session_id||a.id}.mp3`,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(l),oe("Recording downloaded successfully","success")}catch(s){oe("Failed to download recording","error")}else oe("Recording not available for download","error")},className:"p-1 sm:p-1.5 hover:bg-slate-200 dark:hover:bg-slate-700 rounded transition-colors",title:"Download recording",children:t.jsx(y,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-slate-600 dark:text-slate-400"})}),t.jsx("button",{onClick:async()=>{var e;const t=null==(e=null==a?void 0:a.recording)?void 0:e.url;if(!t)return void oe("Recording not available for sharing","error");const s={title:`Call Recording - ${a.session_id||a.id}`,text:`Listen to this call recording from ${a.start_time?new Date(a.start_time).toLocaleDateString():"ShivAI"}`,url:t};try{navigator.share&&navigator.canShare&&navigator.canShare(s)?await navigator.share(s):(await navigator.clipboard.writeText(t),oe("Recording URL copied to clipboard","success"))}catch(l){if("AbortError"!==l.name)try{await navigator.clipboard.writeText(t),oe("Recording URL copied to clipboard","success")}catch{oe("Failed to share recording","error")}}},className:"p-1 sm:p-1.5 hover:bg-slate-200 dark:hover:bg-slate-700 rounded transition-colors",title:"Share recording",children:t.jsx(L,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-slate-600 dark:text-slate-400"})})]})]})]}):t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-12 h-12 bg-slate-200 dark:bg-slate-700 rounded-full flex items-center justify-center mx-auto mb-3",children:t.jsx("svg",{className:"w-6 h-6 text-slate-400",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z"})})}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-1",children:"Recording not available"}),t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:!1===(null==(N=null==a?void 0:a.recording)?void 0:N.enabled)?"Recording was disabled for this session":"processing"===(null==(w=null==a?void 0:a.recording)?void 0:w.status)?"Recording is being processed":"No recording found for this session"})]})})]}),t.jsxs("div",{className:"common-bg-icons p-3 sm:p-4 rounded-lg sm:rounded-xl",children:[t.jsxs("h3",{className:"text-sm sm:text-base font-semibold text-slate-800 dark:text-white mb-3 flex items-center gap-2",children:[t.jsx(m,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Call Summary"]}),B?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx(h,{className:"w-6 h-6 text-blue-500 animate-spin"})}):X?t.jsxs("div",{className:"text-center py-6",children:[t.jsx(S,{className:"w-10 h-10 text-red-300 dark:text-red-600 mx-auto mb-2"}),t.jsx("p",{className:"text-xs sm:text-sm text-red-500 dark:text-red-400",children:X})]}):(null==z?void 0:z.leads)&&z.leads.length>0?t.jsx("div",{className:"space-y-4",children:z.leads.filter(e=>e.callId===(a.session_id||a.id)).map((e,s)=>t.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-3 sm:p-4 space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-slate-200 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(x,{className:"w-3.5 h-3.5 text-blue-500"}),t.jsx("span",{className:"text-xs font-mono text-slate-600 dark:text-slate-400",children:e.callId||"N/A"})]}),e.createdAt&&t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(e.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.intent&&t.jsxs("div",{className:"space-y-2",children:[e.intent.primary&&t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-700",children:[t.jsx("p",{className:"text-xs font-medium text-blue-700 dark:text-blue-300 mb-1",children:"Primary Intent"}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-700 dark:text-slate-300 leading-relaxed",children:e.intent.primary})]}),e.intent.details&&t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/30 p-3 rounded-lg border border-slate-200 dark:border-slate-700",children:[t.jsx("p",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Details"}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-700 dark:text-slate-300 leading-relaxed",children:e.intent.details})]}),e.intent.urgency&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Urgency:"}),t.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium "+("high"===e.intent.urgency?"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400":"medium"===e.intent.urgency?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400"),children:e.intent.urgency})]}),e.intent.tags&&e.intent.tags.length>0&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Tags"}),t.jsx("div",{className:"flex flex-wrap gap-1.5",children:e.intent.tags.map((e,s)=>t.jsx("span",{className:"px-2 py-0.5 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-full text-xs border border-slate-200 dark:border-slate-700",children:e},s))})]})]}),e.leadData&&t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Lead Information"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.leadData.name&&t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(u,{className:"w-4 h-4 text-slate-500 dark:text-slate-400 mt-0.5 flex-shrink-0"}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Name"}),t.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-white truncate",children:e.leadData.name})]})]}),e.leadData.email&&t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(D,{className:"w-4 h-4 text-slate-500 dark:text-slate-400 mt-0.5 flex-shrink-0"}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Email"}),t.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-white truncate",children:e.leadData.email})]})]}),e.leadData.phone&&t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(x,{className:"w-4 h-4 text-slate-500 dark:text-slate-400 mt-0.5 flex-shrink-0"}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Phone"}),t.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-white",children:e.leadData.phone})]})]}),e.leadData.status&&t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(C,{className:"w-4 h-4 text-slate-500 dark:text-slate-400 mt-0.5 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Status"}),t.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium "+("qualified"===e.leadData.status?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":"interested"===e.leadData.status?"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400":"new"===e.leadData.status?"bg-purple-100 text-purple-700 dark:bg-purple-900/20 dark:text-purple-400":"bg-slate-100 text-slate-700 dark:bg-slate-900/20 dark:text-slate-400"),children:["qualified"===e.leadData.status&&t.jsx(T,{className:"w-3 h-3"}),e.leadData.status]})]})]}),e.leadData.group_size&&t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(u,{className:"w-4 h-4 text-slate-500 dark:text-slate-400 mt-0.5 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Group Size"}),t.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-white",children:e.leadData.group_size})]})]}),e.leadData.dates&&t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(A,{className:"w-4 h-4 text-slate-500 dark:text-slate-400 mt-0.5 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Travel Dates"}),t.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-white",children:e.leadData.dates})]})]})]})]})]},e.id||s))}):t.jsxs("div",{className:"text-center py-6",children:[t.jsx(m,{className:"w-10 h-10 text-slate-300 dark:text-slate-600 mx-auto mb-2"}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400",children:"No call summary available"})]})]})]})]})]})});var me},F=()=>{const{user:d}=a();e.useState("all");const[m,h]=e.useState("all"),[g,p]=e.useState(""),[b,j]=e.useState(""),[f,y]=e.useState(""),[D,T]=e.useState([]),[A,L]=e.useState([]),[P,E]=e.useState(!1),[$,F]=e.useState(null),[O,q]=e.useState(null),[z,V]=e.useState(1),[B,G]=e.useState(1),[X,H]=e.useState(0),[W,Y]=e.useState({startDate:"",endDate:"",preset:"all"}),J=r(null==d?void 0:d.email),K=J?D:[];e.useEffect(()=>{const e=setTimeout(()=>{j(g),1!==z&&V(1)},500);return()=>clearTimeout(e)},[g]),e.useEffect(()=>{1!==z&&V(1)},[m,W]),e.useEffect(()=>{(async()=>{if(J)try{const e=await s.getAgents();T(e||[]),e.length>0&&!f&&y(e[0].id)}catch(e){}})()},[J]);const Q=async(e,t=1)=>{if(e){E(!0),F(null);try{const a=new URLSearchParams({page:t.toString(),limit:10..toString()});"all"!==m&&a.append("deviceType",m),W.startDate&&a.append("startDate",W.startDate),W.endDate&&a.append("endDate",W.endDate),b.trim()&&a.append("q",b.trim());const l=a.toString(),r=await s.getAgentSessions(l,e),n=(null==r?void 0:r.sessions)||[],i=(null==r?void 0:r.pagination)||{};L(n),G(i.totalPages||1),H(i.total||n.length),V(i.page||t)}catch(a){F(a instanceof Error?a.message:"Failed to load session history"),L([]),G(1),H(0)}finally{E(!1)}}};e.useEffect(()=>{J&&f&&(V(1),Q(f,1))},[f,J,m,W,b]);const Z=(()=>{if(!J)return{totalSessions:0,performanceScore:0,avgDuration:0,activeAgents:0};const e=A.length>0?A.reduce((e,t)=>e+(t.duration_seconds||0),0)/A.length:0,t=e>0?Math.min(100,Math.round(e/300*100)):0;return{totalSessions:X,performanceScore:t,avgDuration:e,activeAgents:D.length}})(),ee=J?[{title:"Sessions",subtitle:"Total",value:Z.totalSessions.toString(),change:A.length>0?`${A.length} on page`:"No data",trend:"neutral",icon:i,color:"blue"},{title:"Performance",subtitle:"Score",value:`${Z.performanceScore}%`,change:Z.performanceScore>50?"Good":"Low",trend:Z.performanceScore>50?"positive":"neutral",icon:C,color:"green"},{title:"Duration",subtitle:"Average",value:(e=>{if(!e)return"0s";const t=Math.floor(e/60),s=Math.floor(e%60);return t>0?`${t}m ${s}s`:`${s}s`})(Z.avgDuration),change:A.length>0?`${A.length} sessions`:"No data",trend:"neutral",icon:o,color:"purple"},{title:"Agents",subtitle:"Active",value:Z.activeAgents.toString(),change:Z.activeAgents>0?"Online":"Offline",trend:"neutral",icon:u,color:"orange"}]:[{title:"Sessions",subtitle:"Total",value:"0",change:"No data",trend:"neutral",icon:i,color:"blue"},{title:"Performance",subtitle:"Score",value:"0%",change:"No data",trend:"neutral",icon:C,color:"green"},{title:"Duration",subtitle:"Average",value:"0s",change:"No data",trend:"neutral",icon:o,color:"purple"},{title:"Demo",subtitle:"All-Time Active",value:"",change:"",trend:"neutral",icon:u,color:"orange"}];return t.jsxs("div",{className:"space-y-4 sm:space-y-6 w-full max-w-full overflow-hidden",children:[J&&(null==K?void 0:K.length)>0&&t.jsx("div",{className:"mb-4",children:t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-wrap",children:[t.jsxs("div",{className:"relative",children:[t.jsx("select",{value:f,onChange:e=>y(e.target.value),disabled:!J,className:`text-sm sm:text-base font-semibold px-3 py-1.5 pr-8 rounded-lg border-2 appearance-none cursor-pointer transition-all ${J?"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border-blue-200 dark:border-blue-700 text-slate-800 dark:text-white hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-md":"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 dark:text-gray-500 cursor-not-allowed"} focus:outline-none focus:ring-2 focus:ring-blue-500/20`,children:null==K?void 0:K.map(e=>t.jsx("option",{value:e.id,className:"bg-white dark:bg-slate-800 text-slate-800 dark:text-white",children:e.name},e.id))}),t.jsx(_,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 pointer-events-none transition-colors "+(J?"text-blue-600 dark:text-blue-400":"text-gray-400")})]}),J&&K.length>1&&t.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400 italic",children:["(",K.length-1," more agents)"]})]})}),t.jsxs("div",{className:"stats-section",children:[t.jsx("div",{className:"block sm:hidden",children:t.jsx(n,{dots:!0,infinite:!1,speed:300,slidesToShow:2.2,slidesToScroll:1,swipeToSlide:!0,touchThreshold:10,arrows:!1,className:"mobile-stats-slider",customPaging:()=>t.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full hover:bg-gray-600 transition-colors duration-200"}),dotsClass:"slick-dots !bottom-[-20px] !flex !justify-center !gap-2",children:ee.map((e,s)=>t.jsx("div",{className:"px-1",children:t.jsx(l,{hover:!0,children:t.jsxs("div",{className:"p-3 min-h-[90px]",children:[t.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[t.jsx("div",{className:"p-1 rounded-lg common-bg-icons",children:t.jsx(e.icon,{className:"w-3.5 h-3.5 "+("blue"===e.color?"text-blue-600 dark:text-blue-400":"green"===e.color?"text-green-600 dark:text-green-400":"purple"===e.color?"text-purple-600 dark:text-purple-400":"text-orange-600 dark:text-orange-400")})}),e.change&&t.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:e.change})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-lg font-bold text-slate-800 dark:text-white mb-0.5",children:e.value}),t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 leading-tight",children:e.title}),t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 leading-tight",children:e.subtitle})]})]})})},s))})}),t.jsx("div",{className:"hidden sm:grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:ee.map((e,s)=>t.jsx(l,{hover:!0,children:t.jsxs("div",{className:"p-4 sm:p-5",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("div",{className:"p-2 rounded-lg common-bg-icons",children:t.jsx(e.icon,{className:"w-4 sm:w-5 h-4 sm:h-5 "+("blue"===e.color?"text-blue-600 dark:text-blue-400":"green"===e.color?"text-green-600 dark:text-green-400":"purple"===e.color?"text-purple-600 dark:text-purple-400":"text-orange-600 dark:text-orange-400")})}),e.change&&t.jsx("span",{className:"text-xs sm:text-sm text-green-600 dark:text-green-400",children:e.change})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xl sm:text-2xl font-bold text-slate-800 dark:text-white mb-1",children:e.value}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:e.title}),t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:e.subtitle})]})]})},s))})]}),t.jsx(l,{children:t.jsxs("div",{className:"p-3 sm:p-6",children:[t.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4",children:t.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-slate-800 dark:text-white",children:["Session History (",A.length," sessions)"]})}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-3 mb-4",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),t.jsx("input",{type:"text",placeholder:"Search sessions...",value:g,onChange:e=>p(e.target.value),disabled:!J,className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 text-sm touch-manipulation "+(J?"bg-slate-100 dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-800 dark:text-white":"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 cursor-not-allowed")})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:m,onChange:e=>{return t=e.target.value,void h(t);var t},disabled:!J,className:"px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 text-sm appearance-none pr-8 touch-manipulation "+(J?"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-800 dark:text-white":"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 cursor-not-allowed"),children:[t.jsx("option",{value:"all",children:"All Devices"}),t.jsx("option",{value:"mobile",children:"Mobile"}),t.jsx("option",{value:"desktop",children:"Desktop"}),t.jsx("option",{value:"tablet",children:"Tablet"})]}),t.jsx(_,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:W.preset,onChange:e=>(e=>{const t=new Date;let s="",a="";switch(e){case"today":s=t.toISOString().split("T")[0],a=s;break;case"week":s=new Date(t.getTime()-6048e5).toISOString().split("T")[0],a=t.toISOString().split("T")[0];break;case"month":s=new Date(t.getFullYear(),t.getMonth()-1,t.getDate()).toISOString().split("T")[0],a=t.toISOString().split("T")[0];break;default:s="",a=""}Y({startDate:s,endDate:a,preset:e})})(e.target.value),disabled:!J,className:"px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 text-sm appearance-none pr-8 touch-manipulation "+(J?"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-800 dark:text-white":"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 cursor-not-allowed"),children:[t.jsx("option",{value:"all",children:"All Time"}),t.jsx("option",{value:"today",children:"Today"}),t.jsx("option",{value:"week",children:"This Week"}),t.jsx("option",{value:"month",children:"This Month"})]}),t.jsx(_,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]}),(g||"all"!==m||"all"!==W.preset)&&t.jsx("button",{onClick:()=>{p(""),j(""),h("all"),Y({startDate:"",endDate:"",preset:"all"}),V(1)},disabled:!J,className:"p-2 rounded-lg border transition-colors "+(J?"border-slate-200 dark:border-slate-700 hover:bg-red-50 hover:border-red-300 hover:text-red-600 dark:hover:bg-red-900/20":"border-gray-300 dark:border-gray-600 bg-gray-100 dark:bg-gray-800 cursor-not-allowed opacity-50"),title:"Clear all filters",children:t.jsx(S,{className:"w-4 h-4"})}),t.jsx("button",{disabled:!J,className:"p-2 border rounded-lg transition-colors "+(J?"border-slate-200 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-700":"border-gray-300 dark:border-gray-600 bg-gray-100 dark:bg-gray-800 cursor-not-allowed opacity-50"),onClick:()=>Q(f,z),title:"Refresh sessions",children:t.jsx(v,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"})})]})]}),t.jsx("div",{className:"space-y-3",children:P?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):$?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(i,{className:"w-12 h-12 text-red-400 mx-auto mb-3"}),t.jsx("p",{className:"text-base text-red-600 dark:text-red-400 mb-1",children:"Error loading sessions"}),t.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500",children:$})]}):0===A.length?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(i,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),t.jsx("p",{className:"text-base text-slate-600 dark:text-slate-400 mb-1",children:"No sessions yet"}),t.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500",children:"Session history will appear here once agents start handling calls"})]}):A.map(e=>{var s,a,l,r,n,i,d;const o=(null==(s=null==e?void 0:e.device)?void 0:s.device_type)||e.deviceType||"",m=(e=>{const t=(null==e?void 0:e.toLowerCase())||"";return t.includes("mobile")||t.includes("phone")?N:t.includes("tablet")?U:w})(o),h=o?o.charAt(0).toUpperCase()+o.slice(1).toLowerCase():"Desktop";return t.jsx("div",{className:"group p-4 bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 hover:border-blue-300 dark:hover:border-blue-600 hover:shadow-lg transition-all duration-200",children:t.jsx("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-3",children:t.jsxs("div",{className:"flex-1 space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center",children:t.jsx(x,{className:"w-4 h-4 text-blue-500 dark:text-blue-400"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Session ID"}),t.jsx("span",{className:"text-sm font-mono font-semibold text-blue-600 dark:text-blue-400",children:e.session_id||"N/A"})]})]}),t.jsxs("button",{onClick:()=>q(e),className:"flex items-center gap-1.5 px-3 py-1.5 bg-slate-100 dark:bg-slate-700 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-slate-600 dark:text-slate-300 hover:text-blue-600 dark:hover:text-blue-400 rounded-lg transition-all duration-200 text-xs font-medium",children:[t.jsx(R,{className:"w-3.5 h-3.5"}),t.jsx("span",{className:"hidden sm:inline",children:"View Details"})]})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsxs("div",{className:"flex items-center gap-1.5 bg-slate-50 dark:bg-slate-900/30 px-3 py-1.5 rounded-lg text-xs",children:[t.jsx(m,{className:"w-3.5 h-3.5 text-slate-600 dark:text-slate-400"}),t.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:h})]}),((null==(a=e.location)?void 0:a.city)||(null==(l=e.location)?void 0:l.country))&&t.jsxs("div",{className:"flex items-center gap-1.5 bg-slate-50 dark:bg-slate-900/30 px-3 py-1.5 rounded-lg text-xs",children:[t.jsx(c,{className:"w-3.5 h-3.5 text-slate-600 dark:text-slate-400"}),t.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:(null==(r=e.location)?void 0:r.city)&&(null==(n=e.location)?void 0:n.country)?`${e.location.city}, ${e.location.country}`:(null==(i=e.location)?void 0:i.city)||(null==(d=e.location)?void 0:d.country)||"Unknown"})]})]}),t.jsx("div",{className:"flex flex-wrap items-center gap-2",children:t.jsx("span",{className:"px-2.5 py-1 bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400 rounded-full text-xs font-medium border border-green-200 dark:border-green-800",children:e.status||"Completed"})}),t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/30 p-2.5 rounded-lg",children:[t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Duration"}),t.jsx("p",{className:"text-sm text-slate-800 dark:text-white font-semibold",children:(e=>{if(!e)return"0s";const t=Math.floor(e/60),s=Math.floor(e%60);return t>0?`${t}m ${s}s`:`${s}s`})(e.duration_seconds)})]}),t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/30 p-2.5 rounded-lg",children:[t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Time"}),t.jsx("p",{className:"text-sm text-slate-800 dark:text-white font-semibold",children:(u=e.start_time,u?new Date(u).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"N/A")})]}),t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/30 p-2.5 rounded-lg",children:[t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Date"}),t.jsx("p",{className:"text-sm text-slate-800 dark:text-white font-semibold",children:(e=>e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"2-digit"}):"N/A")(e.start_time)})]}),t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/30 p-2.5 rounded-lg",children:[t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Messages"}),t.jsx("p",{className:"text-sm text-slate-800 dark:text-white font-semibold",children:e.total_messages||0})]})]})]})})},e.session_id||e.id);var u})}),!P&&!$&&B>1&&t.jsx(k,{currentPage:z,totalPages:B,totalItems:X,itemsPerPage:10,onPageChange:e=>Q(f,e),className:"mt-6 pt-4 border-t border-slate-200 dark:border-slate-700"})]})}),O&&t.jsx(I,{session:O,onClose:()=>q(null)})]})};export{F as default};
