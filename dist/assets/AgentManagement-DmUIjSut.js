import{r as e,j as t,k as s,R as a,l as n,u as r,f as l,d as i,i as o,e as d,m as c,n as m}from"./index-DmR_5-FC.js";import{G as x}from"./GlassCard-CxQCJKcs.js";import{S as h}from"./SearchableSelect-CLtVDLz8.js";import{S as u,M as g,F as p,P as f}from"./Pagination-D2GYlg3P.js";import{S as b}from"./index-CW4XxYbn.js";import{c as v}from"./createLucideIcon-BsszXWPk.js";import{R as w}from"./refresh-cw-D9rY5fWf.js";import{S as y}from"./save-FCDV5ekF.js";import{C as j}from"./chevron-left-Db7HAkQ2.js";import{C as k}from"./chevron-right-DuxRgajq.js";import{C as N}from"./copy-dv2KMxrz.js";import{X as C}from"./x-BsM49418.js";import{i as S}from"./utils-Cr29uOvE.js";import{P as E}from"./plus-BGtkPUhS.js";import{S as A}from"./search-DIf2zZKX.js";import{B as T}from"./bot-Bo7wM74n.js";import{E as L}from"./eye-BlfsYb7K.js";import{S as P}from"./square-pen-Dlk7OprD.js";import{Z as D}from"./zap-DHEN16HG.js";import{P as M}from"./pause-CJb-kRF5.js";import{P as I}from"./play-CuAI309x.js";import{T as _}from"./trash-2-BHnna3gG.js";import{A as R}from"./arrow-left-CyQclTVc.js";import{G as B}from"./globe-DHhtU0ys.js";import{M as O}from"./message-square-CP2k1_c-.js";import{C as $}from"./check-circle-D8Pz0T1b.js";import{C as U}from"./clock-DY2k0C2c.js";import{U as z}from"./users-CL4XFO3L.js";import{S as H}from"./settings-DWrbHs2S.js";import{L as F}from"./lightbulb-qrHE2iKt.js";import{D as G}from"./download-DqOLbkro.js";import{P as W}from"./phone-IW6rrbhd.js";import{M as K}from"./mic-C9Usrebq.js";import"./chevron-down-BAhUrQkP.js";import"./check-Z6I1gByp.js";const q=v("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),J=v("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]),V=v("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),Q=v("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Y=v("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),X=({agentId:a,agentName:n,isPublished:r=!1})=>{const[l,i]=e.useState("configure"),[o,d]=e.useState("mobile"),[c,m]=e.useState(!1),[h,p]=e.useState(!1),[f,v]=e.useState(null),[N,C]=e.useState(!1),[S,E]=e.useState(""),[A,T]=e.useState(0),L=e.useRef(null),P=e.useRef(null);e.useEffect(()=>{r||"install"!==l&&"advanced"!==l||i("preview")},[r,l]);const[D,M]=e.useState({theme:{primaryColor:"#4b5563",secondaryColor:"#6b7280",accentColor:"#374151",borderRadius:"16px",buttonStyle:"floating",widgetStyle:"modern"},ui:{position:"bottom-right",buttonSize:"medium",chatHeight:"320px",chatWidth:"380px",autoOpen:!1,minimizeButton:!0,draggable:!0},content:{welcomeMessage:`Hi! I'm ${n}. How can I help you today?`,companyName:n,companyDescription:"AI-Powered Support - We offer 24/7 voice support to handle your business calls effieciently and professionally.",companyLogo:"",placeholderText:"Type your message...",offlineMessage:"We're currently offline. Please leave a message."},features:{voiceEnabled:!0,soundEffects:!0,showBranding:!0,messageHistory:!0,typingIndicator:!0,fileUpload:!1},customCSS:""});e.useEffect(()=>{f||(E(""),M(e=>({...e,content:{...e.content,welcomeMessage:`Hi! I'm ${n}. How can I help you today?`,companyName:n,companyLogo:""}})))},[n,f]),e.useEffect(()=>((async()=>{var e;p(!0),E("");try{const t=await fetch(`https://nodejs.service.callshivai.com/api/v1/agents/${a}`);if(t.ok){const s=await t.json(),a=null==(e=null==s?void 0:s.data)?void 0:e.agent;if(null==a?void 0:a.widget){const e=a.widget,t={theme:{primaryColor:e.primary_color||"#4b5563",secondaryColor:e.gradient_start||"#6b7280",accentColor:e.gradient_end||"#374151",borderRadius:"16px",buttonStyle:"floating",widgetStyle:"modern"},ui:{position:e.position||"bottom-right",buttonSize:"medium",chatHeight:"320px",chatWidth:"380px",autoOpen:!1,minimizeButton:!0,draggable:!0},content:{welcomeMessage:e.welcome_message||`Hi! I'm ${n}. How can I help you today?`,companyName:e.ai_employee_name||n,companyDescription:e.ai_employee_description||"AI-Powered Support - We offer 24/7 voice support to handle your business calls effieciently and professionally.",companyLogo:e.company_logo||"",placeholderText:"Type your message...",offlineMessage:"We're currently offline. Please leave a message."},features:{voiceEnabled:!0,soundEffects:!0,showBranding:!0,messageHistory:!0,typingIndicator:!0,fileUpload:!1},customCSS:""};if(M(t),e.company_logo){E(e.company_logo);const t=new Image;t.onload=()=>{},t.onerror=e=>{},t.src=e.company_logo}else E("");v(new Date(e.updatedAt||e.createdAt||Date.now()))}else E(""),M(e=>({...e,content:{...e.content,companyLogo:"",companyName:n,companyDescription:"AI-Powered Support - We offer 24/7 voice support to handle your business calls effieciently and professionally.",welcomeMessage:`Hi! I'm ${n}. How can I help you today?`}}))}}catch(t){}finally{p(!1)}})(),()=>{P.current&&clearTimeout(P.current)}),[a,n]);const I=(e,t="info")=>{const s=document.createElement("div");s.className=`fixed top-4 right-4 ${{success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500"}[t]} text-white px-4 py-3 rounded-lg shadow-lg z-50 transition-all transform translate-x-0 opacity-100 max-w-md`,s.innerHTML=`\n      <div class="flex items-start gap-3">\n        <span class="text-lg">${{success:"‚úÖ",error:"‚ùå",info:"‚ÑπÔ∏è"}[t]}</span>\n        <div class="flex-1">\n          <div class="font-medium text-sm leading-tight">${e}</div>\n        </div>\n        <button onclick="this.parentElement.parentElement.remove()" class="ml-2 text-white/80 hover:text-white text-lg leading-none">&times;</button>\n      </div>\n    `,document.body.appendChild(s);setTimeout(()=>{s.parentElement&&(s.style.opacity="0",s.style.transform="translateX(100%)",setTimeout(()=>{s.remove()},300))},"error"===t?5e3:3e3)},_=(e,t,s)=>{const n={...D,[e]:{...D[e],[t]:s}};M(n),C(!0);const r=new CustomEvent("widgetConfigUpdated",{detail:{agentId:a,config:n}});window.dispatchEvent(r),P.current&&clearTimeout(P.current),P.current=window.setTimeout(()=>{T(e=>e+1)},500)};return t.jsx(x,{children:t.jsxs("div",{className:"p-4 sm:p-6",children:[h&&t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Loading widget configuration..."})]}),!h&&t.jsxs(t.Fragment,{children:[t.jsxs("h3",{className:"text-lg sm:text-xl font-semibold text-slate-800 dark:text-white mb-4 flex items-center gap-3",children:[t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[t.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 bg-slate-50 dark:bg-slate-800 rounded-lg flex items-center justify-center",children:t.jsx(Y,{className:"w-3 h-3 text-slate-600 dark:text-slate-400"})}),t.jsx("h3",{className:"text-xs sm:text-sm font-semibold text-slate-800 dark:text-white",children:"Widget Customization"})]}),N&&t.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400 px-2 py-1 rounded-full",children:"Unsaved changes"}),f&&t.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Last saved: ",f.toLocaleTimeString()]})]}),t.jsxs("div",{className:"flex gap-2 mb-6 border-b border-slate-200 dark:border-slate-700",children:[t.jsx("button",{onClick:()=>i("configure"),className:"px-4 py-2 text-sm font-medium transition-colors "+("configure"===l?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"),children:"Configure"}),t.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[t.jsx("button",{onClick:()=>T(e=>e+1),disabled:"preview"!==l,className:"p-2 text-slate-600 hover:text-slate-800 dark:text-slate-400 dark:hover:text-slate-200 disabled:opacity-50 transition-colors",title:"Refresh Preview",children:t.jsx(w,{className:"w-4 h-4"})}),t.jsx("button",{onClick:async()=>{var e,t,n;m(!0);try{let r=D.content.companyLogo;if(r&&r.startsWith("data:image")){const a=await fetch(r),l=await a.blob(),i=new File([l],"logo.png",{type:l.type}),o=await s.uploadLogo(i);(null==o?void 0:o.logo_url)?r=o.logo_url:(null==(e=null==o?void 0:o.data)?void 0:e.logo_url)?r=o.data.logo_url:(null==(n=null==(t=null==o?void 0:o.data)?void 0:t.data)?void 0:n.logo_url)&&(r=o.data.data.logo_url)}const l={agent_id:a,company_logo:r,ai_employee_name:D.content.companyName,ai_employee_description:D.content.companyDescription,theme:"shivai-blue",position:D.ui.position,button_text:"Call ShivAI!",welcome_message:D.content.welcomeMessage,primary_color:D.theme.primaryColor,gradient_start:D.theme.primaryColor,gradient_end:D.theme.accentColor};await s.saveWidgetConfig(l);M(e=>({...e,content:{...e.content,companyLogo:r}})),v(new Date),C(!1),T(e=>e+1);const i=new CustomEvent("widgetConfigUpdated",{detail:{agentId:a,config:D}});window.dispatchEvent(i),I("Widget configuration saved successfully!","success")}catch(r){const e=r instanceof Error?r.message:"Unknown error occurred";I(`Failed to save widget configuration: ${e}`,"error"),alert("Failed to save widget configuration. Please check the console for details and try again.")}finally{m(!1)}},disabled:c||!N,className:"common-button-bg text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",title:c?"Saving widget configuration...":"Save all changes to backend",children:c?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Uploading & Saving..."]}):t.jsxs(t.Fragment,{children:[t.jsx(y,{className:"w-4 h-4"}),"Save Changes"]})})]})]}),"configure"===l&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Company Branding"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-400 mb-2",children:["Company Logo ",t.jsx("span",{className:"text-slate-400",children:"(Max: 200KB)"})]}),t.jsxs("div",{className:"relative group w-32 h-32",children:[t.jsx("input",{type:"file",id:"logo-upload",accept:"image/*",onChange:e=>{var t;const s=null==(t=e.target.files)?void 0:t[0];if(!s)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(s.type))return I("Please select a valid image file (JPG, PNG, GIF, or WebP)","error"),void(e.target.value="");if(s.size>204800){const t=Math.round(s.size/1024);return I(`Logo file size (${t}KB) exceeds the maximum limit of 200KB. Please choose a smaller image.`,"error"),void(e.target.value="")}if(s.name.length>100)return I("Logo file name is too long. Please rename the file and try again.","error"),void(e.target.value="");const a=new FileReader;a.onloadend=()=>{const e=a.result;E(e),_("content","companyLogo",e);const t=Math.round(s.size/1024);I(`Logo uploaded successfully (${t}KB)`,"success")},a.onerror=()=>{I("Error reading the logo file. Please try again.","error"),e.target.value=""},a.readAsDataURL(s)},className:"hidden"}),t.jsx("div",{className:"relative w-full h-full bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-800 dark:to-slate-700 rounded-xl border-2 border-dashed border-slate-300 dark:border-slate-600 overflow-hidden",children:S?t.jsxs(t.Fragment,{children:[void 0,t.jsx("label",{htmlFor:"logo-upload",className:"cursor-pointer block w-full h-full",children:t.jsx("img",{src:S,alt:"Company Logo",className:"w-full h-full object-contain p-3",onLoad:()=>{},onError:e=>{E("")},crossOrigin:"anonymous"})}),t.jsx("button",{onClick:e=>{e.stopPropagation(),E(""),_("content","companyLogo","")},className:"absolute top-2 left-2 p-1.5 bg-red-500 hover:bg-red-600 text-white rounded-full shadow-lg transition-all duration-200 hover:scale-110 z-10",title:"Remove logo",children:t.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]}):t.jsxs(t.Fragment,{children:[void 0,t.jsxs("label",{htmlFor:"logo-upload",className:"absolute inset-0 flex flex-col items-center justify-center cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:[t.jsx("svg",{className:"w-10 h-10 text-slate-400 dark:text-slate-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 font-medium",children:"Upload"})]})]})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-slate-600 dark:text-slate-400 mb-2",children:"AI Employee Name *"}),t.jsx("input",{type:"text",value:D.content.companyName,onChange:e=>_("content","companyName",e.target.value),placeholder:"Enter your company name",className:"common-bg-icons w-full px-3 py-2 rounded-lg text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-slate-600 dark:text-slate-400 mb-2",children:"AI Employee Description"}),t.jsx("textarea",{value:D.content.companyDescription,onChange:e=>_("content","companyDescription",e.target.value),placeholder:"AI-Powered Support - We offer 24/7 voice support to handle your business calls...",rows:3,className:"common-bg-icons w-full px-3 py-2 rounded-lg text-sm resize-none"})]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Theme & Colors"}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-slate-600 dark:text-slate-400 mb-3",children:"Choose a Gradient Theme"}),t.jsx("div",{className:"theme-slider-container",children:t.jsx(b,{dots:!1,infinite:!1,speed:300,slidesToShow:4,slidesToScroll:1,arrows:!0,prevArrow:t.jsx("button",{className:"slick-arrow slick-prev","aria-label":"Previous",children:t.jsx(j,{className:"w-4 h-4"})}),nextArrow:t.jsx("button",{className:"slick-arrow slick-next","aria-label":"Next",children:t.jsx(k,{className:"w-4 h-4"})}),responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:640,settings:{slidesToShow:2,slidesToScroll:1}}],children:[{id:"original",name:"Original Default",primaryColor:"#4b5563",secondaryColor:"#6b7280",accentColor:"#374151",gradient:"linear-gradient(135deg, #4b5563 0%, #6b7280 30%, #374151 70%, #1f2937 100%)"},{id:"default",name:"ShivAI Blue",primaryColor:"#3b82f6",secondaryColor:"#1e40af",accentColor:"#2563eb",gradient:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)"},{id:"ocean",name:"Ocean Breeze",primaryColor:"#0ea5e9",secondaryColor:"#0284c7",accentColor:"#0369a1",gradient:"linear-gradient(135deg, #0ea5e9 0%, #0369a1 100%)"},{id:"sunset",name:"Sunset Glow",primaryColor:"#f97316",secondaryColor:"#ea580c",accentColor:"#dc2626",gradient:"linear-gradient(135deg, #f97316 0%, #dc2626 100%)"},{id:"forest",name:"Forest Green",primaryColor:"#22c55e",secondaryColor:"#16a34a",accentColor:"#15803d",gradient:"linear-gradient(135deg, #22c55e 0%, #15803d 100%)"},{id:"purple",name:"Purple Dream",primaryColor:"#a855f7",secondaryColor:"#9333ea",accentColor:"#7c3aed",gradient:"linear-gradient(135deg, #a855f7 0%, #7c3aed 100%)"},{id:"teal",name:"Teal Wave",primaryColor:"#14b8a6",secondaryColor:"#0d9488",accentColor:"#0f766e",gradient:"linear-gradient(135deg, #14b8a6 0%, #0f766e 100%)"},{id:"rose",name:"Rose Garden",primaryColor:"#f43f5e",secondaryColor:"#e11d48",accentColor:"#be123c",gradient:"linear-gradient(135deg, #f43f5e 0%, #be123c 100%)"},{id:"gradient1",name:"Cosmic Fusion",primaryColor:"#6366f1",secondaryColor:"#8b5cf6",accentColor:"#a855f7",gradient:"linear-gradient(135deg, #6366f1 0%, #a855f7 100%)"},{id:"gradient2",name:"Warm Citrus",primaryColor:"#fbbf24",secondaryColor:"#f59e0b",accentColor:"#d97706",gradient:"linear-gradient(135deg, #fbbf24 0%, #d97706 100%)"},{id:"gradient3",name:"Cool Mint",primaryColor:"#34d399",secondaryColor:"#10b981",accentColor:"#059669",gradient:"linear-gradient(135deg, #34d399 0%, #059669 100%)"}].map(e=>{const s=D.theme.primaryColor===e.primaryColor&&D.theme.accentColor===e.accentColor;return t.jsx("div",{className:"px-1",children:t.jsxs("button",{onClick:()=>(e=>{const t={...D,theme:{...D.theme,primaryColor:e.primaryColor,secondaryColor:e.secondaryColor,accentColor:e.accentColor}};M(t),C(!0);const s=new CustomEvent("widgetConfigUpdated",{detail:{agentId:a,config:t}});window.dispatchEvent(s),setTimeout(()=>{T(e=>e+1)},50)})(e),className:"relative group w-full h-14 lg:h-16 rounded-lg border-2 transition-all duration-200 "+(s?"border-blue-500 ring-2 ring-blue-200 dark:ring-blue-800":"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600"),style:{background:e.gradient},title:e.name,children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent rounded-md"}),t.jsxs("div",{className:"relative h-full flex flex-col items-center justify-center text-white",children:[t.jsx("div",{className:"text-[10px] lg:text-xs font-medium opacity-90 px-1 text-center leading-tight",children:e.name}),s&&t.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 lg:w-5 lg:h-5 bg-blue-500 rounded-full flex items-center justify-center border border-white",children:t.jsx("svg",{className:"w-2.5 h-2.5 lg:w-3 lg:h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})]})},e.id)})})}),t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-3",children:"Select a preset theme or customize individual colors below"})]})})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Live Preview"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>d("mobile"),className:"p-2 rounded-lg transition-colors "+("mobile"===o?"common-button-bg text-white":"common-bg-icons text-slate-600 dark:text-slate-400"),children:t.jsx(u,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>d("desktop"),className:"p-2 rounded-lg transition-colors "+("desktop"===o?"common-button-bg text-white":"common-bg-icons text-slate-600 dark:text-slate-400"),children:t.jsx(g,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>T(e=>e+1),className:"p-2 rounded-lg common-bg-icons text-slate-600 dark:text-slate-400 hover:opacity-90 transition-opacity",title:"Refresh Preview",children:t.jsx(w,{className:"w-4 h-4"})})]})]}),t.jsx("div",{className:"relative bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-800 dark:to-slate-900 rounded-xl overflow-hidden "+("mobile"===o?"h-[600px]":"h-[500px]"),children:t.jsx("iframe",{ref:L,srcDoc:`<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Widget Preview</title>\n    <style>\n        body {\n            margin: 0;\n            padding: 20px;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n            background: linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 100%);\n            min-height: 100vh;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            overflow: hidden;\n        }\n        .demo-content {\n            text-align: center;\n            max-width: 600px;\n            width: 100%;\n            padding: 2rem;\n            background: white;\n            border-radius: 16px;\n            box-shadow: 0 10px 25px rgba(0,0,0,0.1);\n        }\n        .company-header {\n            margin-bottom: 2rem;\n        }\n        .company-logo {\n            width: 80px;\n            height: 80px;\n            border-radius: 16px;\n            margin: 0 auto 1rem;\n            display: block;\n            object-fit: cover;\n            box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n        }\n        .company-name {\n            font-size: 2rem;\n            font-weight: 700;\n            color: #1f2937;\n            margin-bottom: 0.5rem;\n        }\n        .company-description {\n           y font-size: 1.1rem;\n            color: #6b7280;\n            line-height: 1.6;\n            margin-bottom: 2rem;\n        }\n        .demo-text {\n            color: #4b5563;\n            font-size: 1rem;\n            margin-bottom: 1rem;\n        }\n        .device-badge {\n            display: inline-block;\n            background: linear-gradient(135deg, #3b82f6, #8b5cf6);\n            color: white;\n            padding: 0.5rem 1rem;\n            border-radius: 20px;\n            font-size: 0.875rem;\n            font-weight: 600;\n            margin-bottom: 1rem;\n        }\n        @media (max-width: 768px) {\n            body { padding: 10px; }\n            .demo-content { padding: 1.5rem; }\n            .company-name { font-size: 1.5rem; }\n            .company-description { font-size: 1rem; }\n        }\n    </style>\n</head>\n<body>\n    <div class="">\n      \n        \n      \n\n                        \n\n<div class="demo-text">\n  <strong> Test Your AI Employee Widget:</strong>\n</div>\n<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 1.5rem; margin: 1rem 0; text-align: left;">\n  <div style="color: #374151; font-size: 0.9rem; line-height: 1.6;">\n    <p style="margin: 0 0 1rem 0; font-weight: 600; color: #1f2937;">\n      üìã How to test:\n    </p>\n    <ol style="margin: 0; padding-left: 1.5rem; color: #4b5563;">\n      <li style="margin-bottom: 0.75rem;">\n        <strong>Look for the call button</strong> - It should appear in the bottom-right corner\n      </li>\n      <li style="margin-bottom: 0.75rem;">\n        <strong>Click to open</strong> - Test the interface and your custom branding\n      </li>\n      <li style="margin-bottom: 0.75rem;">\n        <strong>Try voice features</strong> - Click the Start call button icon to test voice input of AI Employee\n      </li>\n      <li style="margin-bottom: 0;">\n        <strong>Check response and Other Features</strong> - Send messages, view Transcripts, and see how the AI responds\n      </li>\n    </ol>\n    <div style="margin-top: 1rem; padding: 0.75rem; background: #dbeafe; border-radius: 8px; border-left: 4px solid #3b82f6;">\n      <p style="margin: 0; font-size: 0.85rem; color: #1e40af;">\n        üí° <strong>Tip:</strong> Make changes in the customization panel and see them update in real-time!\n      </p>\n    </div>\n  </div>\n</div>\n    </div>\n\n    \x3c!-- Pass configuration to widget --\x3e\n    <script>\n        // Debug: Log agentId being passed to configure widget\n        console.log("üîç Setting configure widget agentId:", "${a}");\n        \n        window.ShivAI = window.ShivAI || {};\n        window.ShivAI.config = {\n            companyName: "${D.content.companyName}",\n            companyDescription: "${D.content.companyDescription}",\n            ${D.content.companyLogo?`companyLogo: "${D.content.companyLogo}",`:""}\n        };\n        \n        // Also set SHIVAI_CONFIG for agent ID\n        window.SHIVAI_CONFIG = {\n            agentId: "${a}",\n            theme: ${JSON.stringify(D.theme)},\n            ui: ${JSON.stringify(D.ui)},\n            content: ${JSON.stringify(D.content)},\n            features: ${JSON.stringify(D.features)}\n        };\n        \n        console.log("‚úÖ Configure widget SHIVAI_CONFIG set:", window.SHIVAI_CONFIG);\n        \n        // Refresh widget theme after config is set\n        setTimeout(() => {\n            if (window.ShivAIWidget && window.ShivAIWidget.refreshTheme) {\n                window.ShivAIWidget.refreshTheme();\n                console.log("üé® Theme refreshed in configure view");\n            }\n        }, 100);\n    <\/script>\n    \n    \x3c!-- Load the actual widget.js --\x3e\n    <script src="/widget.js?agentId=${a}&companyName=${encodeURIComponent(D.content.companyName)}&companyDescription=${encodeURIComponent(D.content.companyDescription)}&agentName=${encodeURIComponent(D.content.companyName)}&v=${Date.now()}"><\/script>\n</body>\n</html>`,className:"w-full h-full border-0",title:"Widget Preview",sandbox:"allow-scripts allow-same-origin"},`${A}-${JSON.stringify(D.content)}`)})]})]})]})]})})},Z=({currentAgent:s})=>{const[a,n]=e.useState({theme:{primaryColor:"#4b5563",secondaryColor:"#6b7280",accentColor:"#374151",borderRadius:"16px",buttonStyle:"floating",widgetStyle:"modern"},ui:{position:"bottom-right",buttonSize:"medium",chatHeight:"320px",chatWidth:"380px",autoOpen:!1,minimizeButton:!0,draggable:!0},content:{welcomeMessage:`Hi! I'm ${s.name}. How can I help you today?`,companyName:s.name,companyDescription:"AI-Powered Support - We offer 24/7 voice support to handle your business calls efficiently and professionally.",companyLogo:"",placeholderText:"Type your message...",offlineMessage:"We're currently offline. Please leave a message."},features:{voiceEnabled:!0,soundEffects:!0,showBranding:!0,messageHistory:!0,typingIndicator:!0,fileUpload:!1},customCSS:""});e.useEffect(()=>{(async()=>{try{const e=await fetch(`/api/agents/${s.id}/widget-config`);if(e.ok){const t=await e.json();n(t)}}catch(e){}})();const e=e=>{e.detail.agentId===s.id&&n(e.detail.config)};return window.addEventListener("widgetConfigUpdated",e),()=>{window.removeEventListener("widgetConfigUpdated",e)}},[s.id]);const r=`<script src="https://callshivai.com/widget2.js?agentId=${s.id}"><\/script>`;return t.jsx("div",{className:"mt-6 sm:mt-8",children:t.jsx(x,{children:t.jsxs("div",{className:"p-4 sm:p-6",children:[t.jsx("h3",{className:"text-base sm:text-lg font-semibold text-slate-800 dark:text-white mb-3 sm:mb-4",children:"Widget Integration Code"}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Copy and paste this script tag into your website's HTML. The widget will automatically load your saved customizations."}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Script Tag"}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[t.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),"Live Configuration"]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("code",{className:"common-bg-icons block w-full p-3 rounded-lg text-xs sm:text-sm font-mono text-slate-800 dark:text-white overflow-x-auto whitespace-pre-wrap max-h-64 overflow-y-auto",children:r}),t.jsx("button",{onClick:()=>{navigator.clipboard.writeText(r)},className:"absolute top-2 right-2 p-2 common-bg-icons rounded-md hover:shadow-sm transition-all touch-manipulation min-h-[36px] min-w-[36px] bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm",title:"Copy embed code",children:t.jsx(N,{className:"w-4 h-4 text-slate-600 dark:text-slate-300"})})]}),t.jsxs("div",{className:"mt-4 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg",children:[t.jsx("h4",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"üìã Quick Installation:"}),t.jsxs("ol",{className:"text-xs text-slate-600 dark:text-slate-400 space-y-1 list-decimal list-inside",children:[t.jsx("li",{children:"Copy the script tag above"}),t.jsx("li",{children:"Paste it in your website's HTML, before the closing </body> tag"}),t.jsx("li",{children:"The widget will load automatically with all your custom settings"}),t.jsx("li",{children:"To update: copy new script when you change settings"})]})]})]})]})})})};var ee={},te={exports:{}};function se(){}function ae(){}ae.resetWarningCache=se;te.exports=function(){function e(e,t,s,a,n,r){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==r){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ae,resetWarningCache:se};return s.PropTypes=s,s}();var ne=te.exports,re={L:1,M:0,Q:3,H:2},le={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},ie=le;function oe(e){this.mode=ie.MODE_8BIT_BYTE,this.data=e}oe.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var de=oe,ce=re;function me(e,t){this.totalCount=e,this.dataCount=t}me.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],me.getRSBlocks=function(e,t){var s=me.getRsBlockTable(e,t);if(null==s)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var a=s.length/3,n=new Array,r=0;r<a;r++)for(var l=s[3*r+0],i=s[3*r+1],o=s[3*r+2],d=0;d<l;d++)n.push(new me(i,o));return n},me.getRsBlockTable=function(e,t){switch(t){case ce.L:return me.RS_BLOCK_TABLE[4*(e-1)+0];case ce.M:return me.RS_BLOCK_TABLE[4*(e-1)+1];case ce.Q:return me.RS_BLOCK_TABLE[4*(e-1)+2];case ce.H:return me.RS_BLOCK_TABLE[4*(e-1)+3];default:return}};var xe=me;function he(){this.buffer=new Array,this.length=0}he.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var s=0;s<t;s++)this.putBit(1==(e>>>t-s-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};for(var ue=he,ge={glog:function(e){if(e<1)throw new Error("glog("+e+")");return ge.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return ge.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},pe=0;pe<8;pe++)ge.EXP_TABLE[pe]=1<<pe;for(pe=8;pe<256;pe++)ge.EXP_TABLE[pe]=ge.EXP_TABLE[pe-4]^ge.EXP_TABLE[pe-5]^ge.EXP_TABLE[pe-6]^ge.EXP_TABLE[pe-8];for(pe=0;pe<255;pe++)ge.LOG_TABLE[ge.EXP_TABLE[pe]]=pe;var fe=ge,be=fe;function ve(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var s=0;s<e.length&&0==e[s];)s++;this.num=new Array(e.length-s+t);for(var a=0;a<e.length-s;a++)this.num[a]=e[a+s]}ve.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),s=0;s<this.getLength();s++)for(var a=0;a<e.getLength();a++)t[s+a]^=be.gexp(be.glog(this.get(s))+be.glog(e.get(a)));return new ve(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=be.glog(this.get(0))-be.glog(e.get(0)),s=new Array(this.getLength()),a=0;a<this.getLength();a++)s[a]=this.get(a);for(a=0;a<e.getLength();a++)s[a]^=be.gexp(be.glog(e.get(a))+t);return new ve(s,0).mod(e)}};var we=le,ye=ve,je=fe,ke=0,Ne=1,Ce=2,Se=3,Ee=4,Ae=5,Te=6,Le=7,Pe={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;Pe.getBCHDigit(t)-Pe.getBCHDigit(Pe.G15)>=0;)t^=Pe.G15<<Pe.getBCHDigit(t)-Pe.getBCHDigit(Pe.G15);return(e<<10|t)^Pe.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;Pe.getBCHDigit(t)-Pe.getBCHDigit(Pe.G18)>=0;)t^=Pe.G18<<Pe.getBCHDigit(t)-Pe.getBCHDigit(Pe.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return Pe.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,s){switch(e){case ke:return(t+s)%2==0;case Ne:return t%2==0;case Ce:return s%3==0;case Se:return(t+s)%3==0;case Ee:return(Math.floor(t/2)+Math.floor(s/3))%2==0;case Ae:return t*s%2+t*s%3==0;case Te:return(t*s%2+t*s%3)%2==0;case Le:return(t*s%3+(t+s)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new ye([1],0),s=0;s<e;s++)t=t.multiply(new ye([1,je.gexp(s)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case we.MODE_NUMBER:return 10;case we.MODE_ALPHA_NUM:return 9;case we.MODE_8BIT_BYTE:case we.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case we.MODE_NUMBER:return 12;case we.MODE_ALPHA_NUM:return 11;case we.MODE_8BIT_BYTE:return 16;case we.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case we.MODE_NUMBER:return 14;case we.MODE_ALPHA_NUM:return 13;case we.MODE_8BIT_BYTE:return 16;case we.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),s=0,a=0;a<t;a++)for(var n=0;n<t;n++){for(var r=0,l=e.isDark(a,n),i=-1;i<=1;i++)if(!(a+i<0||t<=a+i))for(var o=-1;o<=1;o++)n+o<0||t<=n+o||0==i&&0==o||l==e.isDark(a+i,n+o)&&r++;r>5&&(s+=3+r-5)}for(a=0;a<t-1;a++)for(n=0;n<t-1;n++){var d=0;e.isDark(a,n)&&d++,e.isDark(a+1,n)&&d++,e.isDark(a,n+1)&&d++,e.isDark(a+1,n+1)&&d++,0!=d&&4!=d||(s+=3)}for(a=0;a<t;a++)for(n=0;n<t-6;n++)e.isDark(a,n)&&!e.isDark(a,n+1)&&e.isDark(a,n+2)&&e.isDark(a,n+3)&&e.isDark(a,n+4)&&!e.isDark(a,n+5)&&e.isDark(a,n+6)&&(s+=40);for(n=0;n<t;n++)for(a=0;a<t-6;a++)e.isDark(a,n)&&!e.isDark(a+1,n)&&e.isDark(a+2,n)&&e.isDark(a+3,n)&&e.isDark(a+4,n)&&!e.isDark(a+5,n)&&e.isDark(a+6,n)&&(s+=40);var c=0;for(n=0;n<t;n++)for(a=0;a<t;a++)e.isDark(a,n)&&c++;return s+=10*(Math.abs(100*c/t/t-50)/5)}},De=de,Me=xe,Ie=ue,_e=Pe,Re=ve;function Be(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var Oe=Be.prototype;Oe.addData=function(e){var t=new De(e);this.dataList.push(t),this.dataCache=null},Oe.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},Oe.getModuleCount=function(){return this.moduleCount},Oe.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=Me.getRSBlocks(e,this.errorCorrectLevel),s=new Ie,a=0,n=0;n<t.length;n++)a+=t[n].dataCount;for(n=0;n<this.dataList.length;n++){var r=this.dataList[n];s.put(r.mode,4),s.put(r.getLength(),_e.getLengthInBits(r.mode,e)),r.write(s)}if(s.getLengthInBits()<=8*a)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},Oe.makeImpl=function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var s=0;s<this.moduleCount;s++){this.modules[s]=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++)this.modules[s][a]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=Be.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},Oe.setupPositionProbePattern=function(e,t){for(var s=-1;s<=7;s++)if(!(e+s<=-1||this.moduleCount<=e+s))for(var a=-1;a<=7;a++)t+a<=-1||this.moduleCount<=t+a||(this.modules[e+s][t+a]=0<=s&&s<=6&&(0==a||6==a)||0<=a&&a<=6&&(0==s||6==s)||2<=s&&s<=4&&2<=a&&a<=4)},Oe.getBestMaskPattern=function(){for(var e=0,t=0,s=0;s<8;s++){this.makeImpl(!0,s);var a=_e.getLostPoint(this);(0==s||e>a)&&(e=a,t=s)}return t},Oe.createMovieClip=function(e,t,s){var a=e.createEmptyMovieClip(t,s);this.make();for(var n=0;n<this.modules.length;n++)for(var r=1*n,l=0;l<this.modules[n].length;l++){var i=1*l;this.modules[n][l]&&(a.beginFill(0,100),a.moveTo(i,r),a.lineTo(i+1,r),a.lineTo(i+1,r+1),a.lineTo(i,r+1),a.endFill())}return a},Oe.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},Oe.setupPositionAdjustPattern=function(){for(var e=_e.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var s=0;s<e.length;s++){var a=e[t],n=e[s];if(null==this.modules[a][n])for(var r=-2;r<=2;r++)for(var l=-2;l<=2;l++)this.modules[a+r][n+l]=-2==r||2==r||-2==l||2==l||0==r&&0==l}},Oe.setupTypeNumber=function(e){for(var t=_e.getBCHTypeNumber(this.typeNumber),s=0;s<18;s++){var a=!e&&1==(t>>s&1);this.modules[Math.floor(s/3)][s%3+this.moduleCount-8-3]=a}for(s=0;s<18;s++){a=!e&&1==(t>>s&1);this.modules[s%3+this.moduleCount-8-3][Math.floor(s/3)]=a}},Oe.setupTypeInfo=function(e,t){for(var s=this.errorCorrectLevel<<3|t,a=_e.getBCHTypeInfo(s),n=0;n<15;n++){var r=!e&&1==(a>>n&1);n<6?this.modules[n][8]=r:n<8?this.modules[n+1][8]=r:this.modules[this.moduleCount-15+n][8]=r}for(n=0;n<15;n++){r=!e&&1==(a>>n&1);n<8?this.modules[8][this.moduleCount-n-1]=r:n<9?this.modules[8][15-n-1+1]=r:this.modules[8][15-n-1]=r}this.modules[this.moduleCount-8][8]=!e},Oe.mapData=function(e,t){for(var s=-1,a=this.moduleCount-1,n=7,r=0,l=this.moduleCount-1;l>0;l-=2)for(6==l&&l--;;){for(var i=0;i<2;i++)if(null==this.modules[a][l-i]){var o=!1;r<e.length&&(o=1==(e[r]>>>n&1)),_e.getMask(t,a,l-i)&&(o=!o),this.modules[a][l-i]=o,-1==--n&&(r++,n=7)}if((a+=s)<0||this.moduleCount<=a){a-=s,s=-s;break}}},Be.PAD0=236,Be.PAD1=17,Be.createData=function(e,t,s){for(var a=Me.getRSBlocks(e,t),n=new Ie,r=0;r<s.length;r++){var l=s[r];n.put(l.mode,4),n.put(l.getLength(),_e.getLengthInBits(l.mode,e)),l.write(n)}var i=0;for(r=0;r<a.length;r++)i+=a[r].dataCount;if(n.getLengthInBits()>8*i)throw new Error("code length overflow. ("+n.getLengthInBits()+">"+8*i+")");for(n.getLengthInBits()+4<=8*i&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(!1);for(;!(n.getLengthInBits()>=8*i||(n.put(Be.PAD0,8),n.getLengthInBits()>=8*i));)n.put(Be.PAD1,8);return Be.createBytes(n,a)},Be.createBytes=function(e,t){for(var s=0,a=0,n=0,r=new Array(t.length),l=new Array(t.length),i=0;i<t.length;i++){var o=t[i].dataCount,d=t[i].totalCount-o;a=Math.max(a,o),n=Math.max(n,d),r[i]=new Array(o);for(var c=0;c<r[i].length;c++)r[i][c]=255&e.buffer[c+s];s+=o;var m=_e.getErrorCorrectPolynomial(d),x=new Re(r[i],m.getLength()-1).mod(m);l[i]=new Array(m.getLength()-1);for(c=0;c<l[i].length;c++){var h=c+x.getLength()-l[i].length;l[i][c]=h>=0?x.get(h):0}}var u=0;for(c=0;c<t.length;c++)u+=t[c].totalCount;var g=new Array(u),p=0;for(c=0;c<a;c++)for(i=0;i<t.length;i++)c<r[i].length&&(g[p++]=r[i][c]);for(c=0;c<n;c++)for(i=0;i<t.length;i++)c<l[i].length&&(g[p++]=l[i][c]);return g};var $e=Be,Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});var ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},He=We(ne),Fe=e,Ge=We(Fe);function We(e){return e&&e.__esModule?e:{default:e}}var Ke={bgColor:He.default.oneOfType([He.default.object,He.default.string]).isRequired,bgD:He.default.string.isRequired,fgColor:He.default.oneOfType([He.default.object,He.default.string]).isRequired,fgD:He.default.string.isRequired,size:He.default.number.isRequired,title:He.default.string,viewBoxSize:He.default.number.isRequired,xmlns:He.default.string},qe=(0,Fe.forwardRef)(function(e,t){var s=e.bgColor,a=e.bgD,n=e.fgD,r=e.fgColor,l=e.size,i=e.title,o=e.viewBoxSize,d=e.xmlns,c=void 0===d?"http://www.w3.org/2000/svg":d,m=function(e,t){var s={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=e[a]);return s}(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return Ge.default.createElement("svg",ze({},m,{height:l,ref:t,viewBox:"0 0 "+o+" "+o,width:l,xmlns:c}),i?Ge.default.createElement("title",null,i):null,Ge.default.createElement("path",{d:a,fill:s}),Ge.default.createElement("path",{d:n,fill:r}))});qe.displayName="QRCodeSvg",qe.propTypes=Ke,Ue.default=qe,Object.defineProperty(ee,"__esModule",{value:!0}),ee.QRCode=void 0;var Je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Ve=tt(ne),Qe=tt(re),Ye=tt($e),Xe=e,Ze=tt(Xe),et=tt(Ue);function tt(e){return e&&e.__esModule?e:{default:e}}var st={bgColor:Ve.default.oneOfType([Ve.default.object,Ve.default.string]),fgColor:Ve.default.oneOfType([Ve.default.object,Ve.default.string]),level:Ve.default.string,size:Ve.default.number,value:Ve.default.string.isRequired},at=(0,Xe.forwardRef)(function(e,t){var s=e.bgColor,a=void 0===s?"#FFFFFF":s,n=e.fgColor,r=void 0===n?"#000000":n,l=e.level,i=void 0===l?"L":l,o=e.size,d=void 0===o?256:o,c=e.value,m=function(e,t){var s={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=e[a]);return s}(e,["bgColor","fgColor","level","size","value"]),x=new Ye.default(-1,Qe.default[i]);x.addData(c),x.make();var h=x.modules;return Ze.default.createElement(et.default,Je({},m,{bgColor:a,bgD:h.map(function(e,t){return e.map(function(e,s){return e?"":"M "+s+" "+t+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:r,fgD:h.map(function(e,t){return e.map(function(e,s){return e?"M "+s+" "+t+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:d,viewBoxSize:h.length}))});ee.QRCode=at,at.displayName="QRCode",at.propTypes=st;var nt=ee.default=at;const rt=({agent:e,onClose:s})=>{const n=`https://widget.callshivai.com/agent/${e.id}`,[r,l]=a.useState(180);a.useEffect(()=>{const e=()=>{window.innerWidth<640?l(140):window.innerWidth<1024?l(160):l(180)},t=e=>{"Escape"===e.key&&s()};return e(),window.addEventListener("resize",e),window.addEventListener("keydown",t),()=>{window.removeEventListener("resize",e),window.removeEventListener("keydown",t)}},[s]);return t.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-3 sm:p-4 -top-8",onClick:e=>{e.target===e.currentTarget&&s()},children:t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-lg sm:max-w-2xl lg:max-w-4xl max-h-[90vh] overflow-y-auto relative border border-slate-200 dark:border-slate-700",children:[t.jsx("button",{onClick:s,className:"absolute top-3 right-3 sm:top-4 sm:right-4 p-2 hover:bg-slate-100 dark:hover:bg-slate-700 bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm rounded-lg transition-colors z-50 cursor-pointer",children:t.jsx(C,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-500 dark:text-slate-400"})}),t.jsx("div",{className:"bg-gradient-to-r from-gray-400 via-gray-500 to-gray-600 px-4 sm:px-6 py-4 text-white relative overflow-hidden",children:t.jsx("div",{className:"relative z-10",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center",children:t.jsx(V,{className:"w-4 h-4 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg sm:text-xl font-bold",children:"Share Agent"}),t.jsx("p",{className:"text-white/80 text-sm",children:"Scan to start conversation"})]})]})})}),t.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-5 lg:gap-6 p-4 sm:p-6",children:[t.jsx("div",{className:"lg:col-span-2 flex justify-center mb-6 lg:mb-0",children:t.jsxs("div",{className:"bg-white rounded-xl p-4 sm:p-6 flex items-center justify-center shadow-lg border-2 border-slate-100 dark:border-slate-700 relative max-w-xs sm:max-w-none",children:[t.jsxs("div",{className:"relative bg-white p-3 sm:p-4 rounded-lg shadow-inner",children:[t.jsx("div",{className:"bg-white p-2 sm:p-3 rounded-lg border border-slate-100",children:t.jsx(nt,{id:"qr-code-svg",value:n,size:r,style:{height:"auto",maxWidth:"100%",width:"100%"},viewBox:"0 0 256 256",bgColor:"#ffffff",fgColor:"#000000",level:"M"})}),t.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg p-1.5 shadow-xl border-2 border-white",children:t.jsxs("div",{className:"w-4 h-4 sm:w-5 sm:h-5 bg-gradient-to-br from-gray-500 to-gray-600 rounded-md flex items-center justify-center shadow-md relative overflow-hidden",children:[t.jsx("span",{className:"text-white font-bold text-xs relative z-10",children:"AI"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent"})]})})]}),t.jsx("div",{className:"absolute top-2 left-2 w-3 h-3 border-l-2 border-t-2 border-gray-400 rounded-tl-md"}),t.jsx("div",{className:"absolute top-2 right-2 w-3 h-3 border-r-2 border-t-2 border-gray-400 rounded-tr-md"}),t.jsx("div",{className:"absolute bottom-2 left-2 w-3 h-3 border-l-2 border-b-2 border-gray-400 rounded-bl-md"}),t.jsx("div",{className:"absolute bottom-2 right-2 w-3 h-3 border-r-2 border-b-2 border-gray-400 rounded-br-md"})]})}),t.jsxs("div",{className:"lg:col-span-3 flex flex-col justify-between",children:[t.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-slate-900/50 dark:to-gray-800/20 rounded-xl p-4 sm:p-5 border border-slate-200 dark:border-slate-700 mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-gray-400 to-gray-500 rounded-lg flex items-center justify-center shadow-lg flex-shrink-0",children:t.jsx("span",{className:"text-white font-bold text-lg",children:e.name.charAt(0).toUpperCase()})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-base sm:text-lg truncate",children:e.name}),t.jsx("div",{className:"flex items-center gap-2 mt-1",children:t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold "+("Published"===e.status?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"Training"===e.status?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300"),children:[t.jsx("div",{className:"w-2 h-2 rounded-full mr-1.5 "+("Published"===e.status?"bg-green-500":"Training"===e.status?"bg-yellow-500":"bg-slate-500")}),e.status]})})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-3 border border-slate-200 dark:border-slate-600",children:[t.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs font-medium mb-1 uppercase tracking-wide",children:"Widget URL"}),t.jsx("p",{className:"font-mono text-xs sm:text-sm text-gray-600 dark:text-gray-400 break-all bg-gray-100 dark:bg-gray-800/20 px-2 py-1.5 rounded",children:n})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsxs("button",{onClick:()=>{const t=document.getElementById("qr-code-svg");if(!t)return;const s=document.createElement("canvas"),a=s.getContext("2d");if(!a)return;const n=(new XMLSerializer).serializeToString(t),r=window.URL||window.webkitURL||window,l=new Image,i=new Blob([n],{type:"image/svg+xml;charset=utf-8"}),o=r.createObjectURL(i);l.onload=()=>{s.width=512,s.height=512,a.fillStyle="#ffffff",a.fillRect(0,0,s.width,s.height),a.drawImage(l,0,0,s.width,s.height),r.revokeObjectURL(o);const t=document.createElement("a");t.download=`${e.name}-qr-code.png`,t.href=s.toDataURL(),t.click()},l.src=o},className:"group bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white font-semibold py-3 px-4 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-2 touch-manipulation",children:[t.jsx("div",{className:"w-4 h-4 transition-transform group-hover:scale-110",children:t.jsxs("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z"}),t.jsx("polyline",{points:"14,2 14,8 20,8"}),t.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),t.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),t.jsx("polyline",{points:"10,9 9,9 8,9"})]})}),t.jsx("span",{className:"text-sm sm:text-base",children:"Download QR"})]}),t.jsxs("button",{id:"copy-url-btn",onClick:()=>{navigator.clipboard.writeText(n);const e=document.getElementById("copy-url-btn");if(e){const t=e.innerHTML;e.innerHTML='\n        <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>\n        </svg>\n        Copied!\n      ',setTimeout(()=>{e.innerHTML=t},2e3)}},className:"group bg-white hover:bg-slate-50 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 font-semibold py-3 px-4 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98] border-2 border-slate-200 dark:border-slate-600 flex items-center justify-center gap-2 touch-manipulation",children:[t.jsx("div",{className:"w-4 h-4 transition-transform group-hover:scale-110",children:t.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),t.jsx("span",{className:"text-sm sm:text-base",children:"Copy Link"})]})]}),t.jsx("div",{className:"mt-4 text-center",children:t.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs sm:text-sm leading-relaxed",children:"Share this QR code or link to let users instantly chat with your AI agent"})})]})]})]})})};const lt=new class{constructor(){this.room=null,this.isConnected=!1,this.isConnecting=!1,this.callbacks=null,this.lastSentMessage=null,this.localAudioTrack=null,this.remoteAudioTrack=null}async loadLiveKitSDK(){return new Promise((e,t)=>{if(void 0!==window.LivekitClient)return void e();const s=document.createElement("script");s.src="https://unpkg.com/livekit-client@latest/dist/livekit-client.umd.js",s.onload=()=>{e()},s.onerror=()=>{t(new Error("Failed to load LiveKit client"))},document.head.appendChild(s)})}setCallbacks(e){this.callbacks=e}async connect(e,t="en-US"){var s,a,n,r;try{if(this.isConnecting||this.isConnected)return;if(this.isConnecting=!0,null==(s=this.callbacks)||s.onStatusUpdate("Loading LiveKit...","connecting"),void 0===window.LivekitClient&&(await this.loadLiveKitSDK(),void 0===window.LivekitClient))throw new Error("LiveKit not available after loading");if(null==(a=this.callbacks)||a.onStatusUpdate("Connecting...","connecting"),!this.isConnecting)return;const n=/Mobile|Android|iPhone/i.test(navigator.userAgent)?"mobile":"desktop",r=`call_${Date.now()}`,l=await fetch("https://python.service.callshivai.com/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agent_id:e,language:t,call_id:r,device:n,user_agent:navigator.userAgent})});if(!l.ok){const e=await l.text();throw new Error(`Failed to get LiveKit token: ${l.status} - ${e}`)}const i=await l.json();if(!this.isConnecting)return;window.pendingAudioElement&&(window.pendingAudioElement.play().catch(e=>{}),window.pendingAudioElement=null);const o={echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,suppressLocalAudioPlayback:!0,channelCount:1,sampleRate:48e3,sampleSize:16,volume:.5,latency:.1,facingMode:"user",deviceId:"default",googEchoCancellation:!0,googAutoGainControl:!0,googNoiseSuppression:!0,googHighpassFilter:!0,googAudioMirroring:!1,googBeamforming:!1,googArrayGeometry:!1,mozAutoGainControl:!0,mozNoiseSuppression:!0},d=window.LivekitClient,c={adaptiveStream:!0,dynacast:!0,audioCaptureDefaults:{...o,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,suppressLocalAudioPlayback:!0},reconnectPolicy:{nextRetryDelayInMs:()=>2e3},publishDefaults:{audioPreset:d.AudioPresets.speech,dtx:!0,red:!1,simulcast:!1},e2eeEnabled:!1,expWebAudioMix:!1};if(this.room=new d.Room(c),this.setupRoomEvents(d,o),await this.room.connect(i.url,i.token),!this.isConnecting)return void(this.room&&(this.room.disconnect(),this.room=null))}catch(l){this.isConnecting=!1,this.isConnected=!1;let e="Connection failed";l instanceof Error&&(l.message.includes("token")?e="Authentication failed":l.message.includes("timeout")?e="Connection timeout":l.message.includes("network")&&(e="Network error")),null==(n=this.callbacks)||n.onError(e),null==(r=this.callbacks)||r.onStatusUpdate(`‚ùå ${e}`,"disconnected")}}setupRoomEvents(e,t){if(this.room){this.room.on(e.RoomEvent.TrackSubscribed,(t,s,a)=>{if(t.kind===e.Track.Kind.Audio){const e=t.attach();if(e.volume=.4,e.preload="auto",e.autoplay=!0,e.setSinkId)try{e.setSinkId("default")}catch(n){}void 0!==e.webkitAudioDecodedByteCount&&(e.webkitPreservesPitch=!1),document.body.appendChild(e),e.play().catch(t=>{window.pendingAudioElement=e}),this.remoteAudioTrack=t}}),this.room.on(e.RoomEvent.ParticipantMetadataChanged,(e,t)=>{if(e)try{const t=JSON.parse(e);(t.transcript||t.text)&&this.addMessage(!1,t.transcript||t.text,"voice")}catch(s){}}),this.room.on(e.RoomEvent.RoomMetadataChanged,e=>{if(e)try{const t=JSON.parse(e);(t.transcript||t.text)&&this.addMessage(!1,t.transcript||t.text,"voice")}catch(t){}}),this.room.on(e.RoomEvent.Connected,async()=>{var e,t,s,a;this.isConnected=!0,this.isConnecting=!1,null==(e=this.callbacks)||e.onStatusUpdate("ü§ñ AI is Initializing...","connected");try{await this.room.localParticipant.setMicrophoneEnabled(!0,{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,suppressLocalAudioPlayback:!0,channelCount:1,sampleRate:48e3,sampleSize:16,volume:.5,latency:.1,facingMode:"user"})}catch(r){try{await this.room.localParticipant.setMicrophoneEnabled(!0)}catch(l){null==(t=this.callbacks)||t.onError("Failed to enable microphone. Please check your microphone permissions and try again.")}}if(window.AudioContext||window.webkitAudioContext){const e=new(window.AudioContext||window.webkitAudioContext);"suspended"===e.state&&e.resume().then(()=>{}).catch(e=>{})}null==(s=this.callbacks)||s.onStatusUpdate("‚úÖ Connected - Speak now!","connected");const n=Array.from(this.room.localParticipant.audioTrackPublications.values());n.length>0&&(this.localAudioTrack=n[0].track),null==(a=this.callbacks)||a.onConnected()}),this.room.on(e.RoomEvent.Disconnected,e=>{var t,s;this.isConnected=!1,null==(t=this.callbacks)||t.onDisconnected(e),null==(s=this.callbacks)||s.onStatusUpdate("‚ùå Disconnected","disconnected")}),this.room.on(e.RoomEvent.ConnectionStateChanged,t=>{var s,a;null==(s=this.callbacks)||s.onConnectionStateChange(t),t===e.ConnectionState.Disconnected&&(this.isConnected=!1,null==(a=this.callbacks)||a.onStatusUpdate("‚ùå Disconnected","disconnected"))}),this.room.on(e.RoomEvent.DataReceived,(e,t,s,a)=>{var n,r;try{const s=(new TextDecoder).decode(e);if(s&&s.trim().length>0){let e=s.trim(),a=!1;null==t||t.identity;if(["subscribed","connected","disconnected","enabled","disabled","true","false","null","undefined"].some(e=>s.toLowerCase()===e))return;try{const r=JSON.parse(s),l=["text","transcript","message","content","data","response","speech","voice","audio","words","result","output"];for(const t of l)if(r[t]&&"string"==typeof r[t]&&r[t].trim().length>0){e=r[t].trim(),a=!0;break}let i=!1;if(r.role?i=r.role.includes("user")||r.role.includes("human"):r.speaker?i=r.speaker.includes("user")||r.speaker.includes("human")||r.speaker.includes("You"):t&&(i=t.identity===(null==(n=this.room.localParticipant)?void 0:n.identity)),"transcript"===r.type&&r.text)return void("user"===r.role?"chat"!==r.type&&this.addMessage(!0,r.text,"voice"):"assistant"===r.role&&this.addMessage(!1,r.text,"voice"));if(a){const t=i;(!i||i&&"chat"!==r.type||i&&"typed"!==r.source)&&this.addMessage(t,e,"voice")}}catch(l){if(s.length>=2&&s.length<=1e3){const s=t&&t.identity===(null==(r=this.room.localParticipant)?void 0:r.identity);this.addMessage(s,e,"voice")}}}}catch(i){}});try{"function"==typeof this.room.registerTextStreamHandler&&(this.room.registerTextStreamHandler("lk.transcription",async(e,t)=>{var s,a,n,r;try{const l=e.info,i=(null==(s=l.attributes)||s["lk.transcription_final"],null==(a=l.attributes)||a["lk.transcribed_track_id"],null==(n=l.attributes)||n["lk.segment_id"],await e.readAll());if(i&&i.trim()){const e=t.identity===(null==(r=this.room.localParticipant)?void 0:r.identity);if(e&&this.lastSentMessage&&i.trim()===this.lastSentMessage.trim())return;this.addMessage(e,i,"voice")}}catch(l){}}),this.room.registerTextStreamHandler("lk.chat",async(e,t)=>{var s;try{const a=await e.readAll();!(t.identity===(null==(s=this.room.localParticipant)?void 0:s.identity))&&a&&a.trim()&&this.addMessage(!1,a,"chat")}catch(a){}}))}catch(s){}}}addMessage(e,t,s="voice"){if(!this.callbacks)return;const a={id:Date.now()+Math.random(),text:t.trim(),isUser:e,timestamp:new Date,source:s};this.callbacks.onMessage(a)}async sendMessage(e){var t;if(this.room&&this.isConnected&&e.trim())try{if("function"==typeof this.room.localParticipant.sendText)await this.room.localParticipant.sendText(e,{topic:"lk.chat"});else{const t={type:"chat",text:e,timestamp:Date.now(),source:"typed"},s=(new TextEncoder).encode(JSON.stringify(t));this.room.localParticipant.publishData(s,{reliable:!0})}this.addMessage(!0,e,"chat"),this.lastSentMessage=e}catch(s){null==(t=this.callbacks)||t.onError("Failed to send message")}}async disconnect(){if(this.room){this.isConnecting=!1,this.isConnected=!1;try{await this.room.disconnect()}catch(e){}this.room=null,this.localAudioTrack=null,this.remoteAudioTrack=null}}async toggleMute(){if(!this.room||!this.isConnected)return!1;try{const e=this.room.localParticipant.isMicrophoneEnabled;return await this.room.localParticipant.setMicrophoneEnabled(!e),!e}catch(e){return!1}}getStatus(){return{isConnected:this.isConnected,isConnecting:this.isConnecting}}},it=()=>{var a;const{id:u}=n(),g=r(),b=l(),[v,w]=i(),{agents:y,currentAgent:j,setCurrentAgent:k,publishAgentStatus:Y,unpublishAgentStatus:ee,refreshAgents:te,deleteAgent:se}=o(),{user:ae}=d(),ne=S(null==ae?void 0:ae.email),re=b.pathname.includes("/train"),le=u&&!re,ie=!u,[oe,de]=e.useState({name:"",gender:"Female",businessProcess:"",industry:"",persona:"Empathetic",language:"English (US)",voice:"Sarah - Professional",customInstructions:"",guardrailsLevel:"Medium",responseStyle:"Balanced",maxResponseLength:"Medium (150 words)",contextWindow:"Standard (8K tokens)",temperature:50}),[ce,me]=e.useState(""),[xe,he]=e.useState("newest"),[ue,ge]=e.useState("all"),[pe,fe]=e.useState(!1),[be,ve]=e.useState([]),[we,ye]=e.useState(0),[je,ke]=e.useState(0),[Ne,Ce]=e.useState(!1),Se=parseInt(v.get("page")||"1",10),[Ee,Ae]=e.useState(!1),[Te,Le]=e.useState(!1),[Pe,De]=e.useState(!1),[Me,Ie]=e.useState(null),[_e,Re]=e.useState(!1),[Be,Oe]=e.useState("call"),[$e,Ue]=e.useState(!1),[ze,He]=e.useState(0),[Fe,Ge]=e.useState(null),[We,Ke]=e.useState([{id:"1",text:`Hi! I'm ${(null==j?void 0:j.name)||"your AI assistant"}. How can I help you today?`,isUser:!1,timestamp:new Date}]),[qe,Je]=e.useState(""),Ve=e.useRef(new Set),Qe=e.useRef(0),[Ye,Xe]=e.useState(!1),[Ze,et]=e.useState(new Set),[tt,st]=e.useState("disconnected"),[at,nt]=e.useState("Ready to connect"),[it,ot]=e.useState(!1),[dt,ct]=e.useState(!1),[mt,xt]=e.useState(!1),[ht,ut]=e.useState(null),[gt,pt]=e.useState([]),[ft,bt]=e.useState(!1),[vt,wt]=e.useState(null),[yt,jt]=e.useState(!1),[kt,Nt]=e.useState("üìû Ready to start call");e.useEffect(()=>{const e={onMessage:e=>{Ke(t=>[...t,{id:String(e.id),text:e.text,isUser:e.isUser,timestamp:e.timestamp,source:e.source}])},onConnected:()=>{Ue(!0),st("connected"),nt("Connected - Speak now!"),Xe(!1)},onDisconnected:()=>{Ue(!1),st("disconnected"),nt("Disconnected"),Xe(!1),Fe&&(clearInterval(Fe),Ge(null)),He(0)},onConnectionStateChange:e=>{},onError:e=>{st("disconnected"),nt(e),Xe(!1),Ue(!1)},onStatusUpdate:(e,t)=>{nt(e),st(t)}};return lt.setCallbacks(e),()=>{lt.disconnect(),Fe&&clearInterval(Fe)}},[Fe]),e.useEffect(()=>{if(u){const e=y.find(e=>e.id===u);e&&(k(e),de({name:e.name,gender:"Female",businessProcess:"",industry:"",persona:e.persona,language:e.language,voice:e.voice,customInstructions:"",guardrailsLevel:"Medium",responseStyle:"Balanced",maxResponseLength:"Medium (150 words)",contextWindow:"Standard (8K tokens)",temperature:50}),Ke([{id:"1",text:`Hi! I'm ${e.name}. How can I help you today?`,isUser:!1,timestamp:new Date}]),Ct(e.id))}},[u,y,k]),e.useEffect(()=>{var e;(null==(e=b.state)?void 0:e.refresh)&&(te(),g(b.pathname,{replace:!0,state:{}}))},[null==(a=b.state)?void 0:a.refresh,te,g,b.pathname]);const Ct=async e=>{bt(!0),wt(null);try{const t=await s.getAgentSessions("",e),a=(null==t?void 0:t.sessions)||[];pt(a)}catch(t){wt(t instanceof Error?t.message:"Failed to load session history"),pt([])}finally{bt(!1)}},St=async e=>{try{et(t=>new Set(t).add(e)),await Y(e),await te()}catch(t){alert(t.message||"Failed to publish agent. Please try again.")}finally{et(t=>{const s=new Set(t);return s.delete(e),s})}},Et=async e=>{try{et(t=>new Set(t).add(e)),await ee(e),await te()}catch(t){alert(t.message||"Failed to pause agent. Please try again.")}finally{et(t=>{const s=new Set(t);return s.delete(e),s})}},At=async()=>{if(Me){Re(!0);try{await se(Me),await te(),De(!1),Ie(null),(null==j?void 0:j.id)===Me&&g("/agents")}catch(e){alert(e.message||"Failed to delete agent. Please try again.")}finally{Re(!1)}}},Tt=()=>{De(!1),Ie(null)},Lt=async()=>{if(!qe.trim()||Ye)return;const e=qe.trim(),t=Date.now();if(t-Qe.current<1e3)return;const s=`user-${e}-${Math.floor(t/1e3)}`;if(Ve.current.has(s))Je("");else{Ve.current.add(s),Qe.current=t,setTimeout(()=>{Ve.current.delete(s)},1e4),Je(""),Xe(!0);try{const s={id:`user-chat-${t}-${Math.random()}`,text:e,isUser:!0,timestamp:new Date,source:"chat"};if(Ke(e=>[...e,s]),ht&&"connected"===tt){const t=window.LivekitClient,s=JSON.stringify({type:"chat",text:e,timestamp:(new Date).toISOString(),source:"typed"}),a=(new TextEncoder).encode(s);await ht.localParticipant.publishData(a,t.DataPacket_Kind.RELIABLE)}else setTimeout(()=>{const e=["I understand you're looking for help. Let me assist you with that based on my training and configuration.","Thank you for your message. As an AI Employee, I'm designed to help with various tasks in a professional manner.","I appreciate your question. Based on my role as your AI Employee, I'd be happy to provide assistance.","That's an interesting point. As your AI Employee, here's how I can help you.","I see what you're asking about. As an AI Employee, I'm here to provide helpful, accurate information."],t={id:`fallback-${Date.now()}-${Math.random()}`,text:e[Math.floor(Math.random()*e.length)],isUser:!1,timestamp:new Date,source:"chat"};Ke(e=>[...e,t]),Xe(!1)},1e3+2e3*Math.random())}catch(a){Xe(!1)}}},Pt=e.useCallback(async()=>{try{if(ct(!0),Nt("üé§ Requesting microphone access..."),st("connecting"),nt("Initializing call..."),!window.isSecureContext)throw new Error("HTTPS required for microphone access");try{(await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!1,channelCount:1,sampleRate:48e3,sampleSize:16}})).getTracks().forEach(e=>e.stop()),Nt("‚úÖ Microphone access granted")}catch(e){const t=e instanceof Error?e.message:"Unknown error";throw new Error(`Microphone access denied: ${t}`)}const t=null==j?void 0:j.id;if(!t)throw new Error("Agent ID not found");Nt("üîó Getting LiveKit token...");const s=`admin_test_${Date.now()}`,a=await fetch("https://python.service.callshivai.com/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agent_id:t,language:"en-US",call_id:s,device:"desktop",user_agent:navigator.userAgent})});if(!a.ok){const e=await a.text();throw new Error(`Failed to get LiveKit token: ${a.status} - ${e}`)}const n=await a.json();if(Nt("üîó Connecting to LiveKit..."),void 0===window.LivekitClient){Nt("üì¶ Loading LiveKit SDK...");const e=document.createElement("script");e.src="https://unpkg.com/livekit-client@latest/dist/livekit-client.umd.js",e.onload=()=>{Dt(n)},e.onerror=()=>{throw new Error("Failed to load LiveKit SDK")},document.head.appendChild(e)}else await Dt(n)}catch(t){Nt(`‚ùå Error: ${t instanceof Error?t.message:"Unknown error"}`),st("disconnected"),nt("Connection failed"),ct(!1),xt(!1)}},[j]),Dt=e.useCallback(async e=>{try{const t=window.LivekitClient,s=new t.Room({adaptiveStream:!0,dynacast:!0,audioCaptureDefaults:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,suppressLocalAudioPlayback:!0},publishDefaults:{audioPreset:t.AudioPresets.speech,dtx:!0,red:!1,simulcast:!1}});s.on(t.RoomEvent.TrackSubscribed,e=>{if(e.kind===t.Track.Kind.Audio){const t=e.attach();t.volume=.4,t.autoplay=!0,document.body.appendChild(t),t.play().catch(e=>{})}}),s.on(t.RoomEvent.DataReceived,(e,t)=>{var a,n;try{const l=(new TextDecoder).decode(e);if(!l||0===l.trim().length)return;if(["subscribed","connected","disconnected","enabled","disabled","true","false"].some(e=>l.toLowerCase()===e))return;try{const e=JSON.parse(l);let n="";const r=["text","transcript","message","content","response"];for(const t of r)if(e[t]&&"string"==typeof e[t]&&e[t].trim()){n=e[t].trim();break}if(n){const e=(null==t?void 0:t.identity)===(null==(a=s.localParticipant)?void 0:a.identity),r=`${e?"user":"ai"}-${n}-${Math.floor(Date.now()/2e3)}`;if(Ve.current.has(r))return;Ve.current.add(r),setTimeout(()=>Ve.current.delete(r),5e3),Ke(t=>[...t,{id:`${Date.now()}-${Math.random()}`,text:n,isUser:e,timestamp:new Date,source:"voice"}]),e||Xe(!1)}}catch(r){if(l.length>=2&&l.length<=1e3){const e=(null==t?void 0:t.identity)===(null==(n=s.localParticipant)?void 0:n.identity),a=`${e?"user":"ai"}-${l.trim()}-${Math.floor(Date.now()/2e3)}`;if(Ve.current.has(a))return;Ve.current.add(a),setTimeout(()=>Ve.current.delete(a),5e3),Ke(t=>[...t,{id:`${Date.now()}-${Math.random()}`,text:l.trim(),isUser:e,timestamp:new Date,source:"voice"}]),e||Xe(!1)}}}catch(l){}}),"function"==typeof s.registerTextStreamHandler&&(s.registerTextStreamHandler("lk.transcription",async(e,t)=>{var a;try{const n=await e.readAll();if(n&&n.trim()){const e=t.identity===(null==(a=s.localParticipant)?void 0:a.identity),r=`${e?"user":"ai"}-transcription-${n.trim()}-${Math.floor(Date.now()/2e3)}`;if(Ve.current.has(r))return;Ve.current.add(r),setTimeout(()=>Ve.current.delete(r),5e3),Ke(t=>[...t,{id:`transcription-${Date.now()}-${Math.random()}`,text:n.trim(),isUser:e,timestamp:new Date,source:"voice"}]),e||Xe(!1)}}catch(n){}}),s.registerTextStreamHandler("lk.chat",async(e,t)=>{var a;try{const n=await e.readAll();if(!(t.identity===(null==(a=s.localParticipant)?void 0:a.identity))&&n&&n.trim()){const e=`ai-chat-${n.trim()}-${Math.floor(Date.now()/2e3)}`;if(Ve.current.has(e))return;Ve.current.add(e),setTimeout(()=>Ve.current.delete(e),5e3),Ke(e=>[...e,{id:`chat-${Date.now()}-${Math.random()}`,text:n.trim(),isUser:!1,timestamp:new Date,source:"chat"}]),Xe(!1)}}catch(n){}})),s.on(t.RoomEvent.ParticipantMetadataChanged,(e,t)=>{var a;if(e)try{const n=JSON.parse(e);if(n.transcript||n.text){const e=(null==t?void 0:t.identity)===(null==(a=s.localParticipant)?void 0:a.identity);Ke(t=>[...t,{id:`metadata-${Date.now()}`,text:n.transcript||n.text,isUser:e,timestamp:new Date,source:"voice"}]),e||Xe(!1)}}catch(n){}}),s.on(t.RoomEvent.RoomMetadataChanged,e=>{if(e)try{const t=JSON.parse(e);(t.transcript||t.text)&&(Ke(e=>[...e,{id:`room-metadata-${Date.now()}`,text:t.transcript||t.text,isUser:!1,timestamp:new Date,source:"voice"}]),Xe(!1))}catch(t){}}),s.on(t.RoomEvent.Connected,async()=>{xt(!0),ct(!1),Ue(!0),st("connected"),Nt("üü¢ Connected! You can now speak with the agent."),nt("‚úÖ Connected - Speak now!");const e=setInterval(()=>{He(e=>e+1)},1e3);Ge(e);try{await s.localParticipant.setMicrophoneEnabled(!0,{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}),jt(!0)}catch(t){}}),s.on(t.RoomEvent.Disconnected,()=>{xt(!1),ct(!1),Ue(!1),st("disconnected"),Nt("üî¥ Disconnected"),nt("‚ùå Disconnected"),ut(null),Fe&&(clearInterval(Fe),Ge(null)),He(0)}),await s.connect(e.url,e.token),ut(s)}catch(t){Nt(`‚ùå Connection failed: ${t instanceof Error?t.message:"Unknown error"}`),st("disconnected"),nt("Connection failed"),ct(!1),xt(!1)}},[j,Fe]),Mt=e.useCallback(async()=>{if(ht)try{await ht.disconnect()}catch(e){}xt(!1),ct(!1),Ue(!1),st("disconnected"),Nt("üìû Call ended"),nt("Ready to connect"),ut(null),jt(!1),Fe&&(clearInterval(Fe),Ge(null)),He(0),Ke(e=>[...e,{id:`disconnect-${Date.now()}`,text:"Call ended",isUser:!1,timestamp:new Date,source:"system"}])},[ht,Fe]),It=e.useCallback(async()=>{if(ht&&mt)try{const e=!it;await ht.localParticipant.setMicrophoneEnabled(!e),ot(e),jt(!e)}catch(e){}},[ht,mt,it]),_t=e.useCallback(async()=>{if(j)try{await navigator.mediaDevices.getUserMedia({audio:!0});const e=await fetch("https://python.service.callshivai.com/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agent_id:j.id,language:"en-US",call_id:`test_${Date.now()}`,device:"desktop",user_agent:navigator.userAgent})});if(e.ok){await e.json();alert("‚úÖ Connection test passed! Token server is working. Try starting the call again.")}else alert(`‚ùå Token server error: ${e.status}. The voice service may be temporarily unavailable.`)}catch(e){e instanceof Error&&"NotAllowedError"===e.name?alert("‚ùå Microphone permission denied. Please allow microphone access and try again."):e instanceof Error&&e.message.includes("fetch")?alert("‚ùå Cannot reach voice service. Please check your internet connection."):alert(`‚ùå Connection test failed: ${e instanceof Error?e.message:"Unknown error"}`)}else alert("No agent selected")},[j]),Rt=Pt,Bt=Mt,Ot=It,$t=e=>{const t=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},[Ut,zt]=e.useState(ce);e.useEffect(()=>{const e=setTimeout(()=>{zt(ce)},300);return()=>clearTimeout(e)},[ce]);const Ht=e.useCallback(async()=>{if(!ne)return ve([]),ye(0),void ke(0);Ce(!0);try{const e=await s.getAgentsWithFilters({gender:ue,sort:xe,search:Ut||void 0,page:Se,limit:6});ve(e.agents),ye(e.total),ke(e.totalPages)}catch(e){const t=y.filter(e=>{const t=e.name.toLowerCase().includes((Ut||"").toLowerCase()),s=(e.gender||"").toLowerCase(),a="all"===ue||s===ue.toLowerCase();return t&&a}).sort((e,t)=>{switch(xe){case"a-z":return e.name.localeCompare(t.name);case"z-a":return t.name.localeCompare(e.name);case"newest":return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime();case"oldest":return new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime();default:return 0}}),s=t.length,a=Math.ceil(s/6),n=6*(Se-1),r=t.slice(n,n+6);ve(r),ye(s),ke(a)}finally{Ce(!1)}},[ne,ue,xe,Ut,Se,y]);e.useEffect(()=>{Ht()},[Ht]);const Ft=be,Gt=e=>{w({page:e.toString()}),window.scrollTo({top:0,behavior:"smooth"})};return e.useEffect(()=>{Se>1&&w({page:"1"})},[Ut,ue,xe]),ie?t.jsxs("div",{className:"space-y-4 lg:space-y-6 w-full max-w-full overflow-hidden",children:[t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-2 lg:gap-4 flex-1",children:[t.jsxs("div",{className:"bg-white/50 flex items-center justify-center gap-1.5 dark:bg-slate-800/50 rounded-lg px-2 lg:px-6 py-2 lg:py-2 text-center shadow-sm transition-all duration-200 hover:shadow-md",children:[t.jsx("p",{className:"text-base lg:text-2xl font-bold text-slate-800 dark:text-white",children:ne?y.length:0}),t.jsx("p",{className:"text-[10px] lg:text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total"})]}),t.jsxs("div",{className:"bg-white/50 flex items-center justify-center gap-1.5 dark:bg-slate-800/50 rounded-lg px-2 lg:px-6 py-2 lg:py-2 text-center shadow-sm transition-all duration-200 hover:shadow-md",children:[t.jsx("p",{className:"text-base lg:text-2xl font-bold text-green-600 dark:text-green-400",children:ne?y.filter(e=>"Published"===e.status||e.is_active).length:0}),t.jsx("p",{className:"text-[10px] lg:text-sm font-medium text-slate-600 dark:text-slate-400",children:"Live"})]}),t.jsxs("div",{className:"bg-white/50 flex items-center justify-center gap-1.5 dark:bg-slate-800/50 rounded-lg px-2 lg:px-6 py-2 lg:py-2 text-center shadow-sm transition-all duration-200 hover:shadow-md",children:[t.jsx("p",{className:"text-base lg:text-2xl font-bold text-orange-600 dark:text-orange-400",children:ne?y.filter(e=>"Published"!==e.status&&!e.is_active).length:0}),t.jsx("p",{className:"text-[10px] lg:text-sm font-medium text-slate-600 dark:text-slate-400",children:"Unpublished"})]})]}),t.jsxs("button",{onClick:()=>ne&&g("/agents/create"),disabled:!ne,className:"flex items-center justify-center gap-2 px-4 lg:px-6 py-2.5 lg:py-3 rounded-xl transition-all duration-200 shadow-sm whitespace-nowrap "+(ne?"common-button-bg transform hover:scale-[1.02] active:scale-[0.98] cursor-pointer":"bg-gray-400 dark:bg-gray-600 text-gray-200 dark:text-gray-300 cursor-not-allowed opacity-50"),children:[t.jsx(E,{className:"w-4 h-4 lg:w-5 lg:h-5"}),t.jsx("span",{className:"text-sm lg:text-base font-medium",children:"Create AI Employee"})]})]}),t.jsx(x,{children:t.jsxs("div",{className:"p-4 lg:p-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400 z-10"}),t.jsx("input",{type:"text",placeholder:"Search agents...",value:ce,onChange:e=>me(e.target.value),className:"w-full pl-10 pr-4 py-2.5 lg:py-3 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/20 text-slate-800 dark:text-white text-sm transition-all duration-200"})]}),t.jsx("div",{className:"hidden lg:block min-w-[140px]",children:t.jsx(h,{options:[{value:"all",label:"All Gender"},{value:"male",label:"Male"},{value:"female",label:"Female"}],value:ue,onChange:e=>ge(e),placeholder:"Filter by gender..."})}),t.jsx("div",{className:"hidden lg:block min-w-[140px]",children:t.jsx(h,{options:[{value:"newest",label:"Newest"},{value:"oldest",label:"Oldest"},{value:"a-z",label:"A to Z"},{value:"z-a",label:"Z to A"}],value:xe,onChange:e=>he(e),placeholder:"Sort by..."})}),t.jsxs("button",{onClick:()=>fe(!0),className:"lg:hidden flex items-center justify-center common-button-bg2 p-2.5 rounded-lg active:scale-95 relative",children:[t.jsx(p,{className:"w-4 h-4"}),("all"!==ue||"newest"!==xe)&&t.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-blue-500 rounded-full"})]})]}),(ce||"all"!==ue||"newest"!==xe)&&t.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:[t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Active filters:"}),ce&&t.jsxs("span",{className:"px-2 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-full text-xs flex items-center gap-1",children:['"',ce,'"',t.jsx("button",{onClick:()=>me(""),className:"hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full p-0.5",children:"‚úï"})]}),"all"!==ue&&t.jsxs("span",{className:"px-2 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-full text-xs flex items-center gap-1",children:["Gender: ",ue,t.jsx("button",{onClick:()=>ge("all"),className:"hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full p-0.5",children:"‚úï"})]}),"newest"!==xe&&t.jsxs("span",{className:"px-2 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-full text-xs flex items-center gap-1",children:["Sort: ","a-z"===xe?"A to Z":"z-a"===xe?"Z to A":"oldest"===xe?"Oldest":xe,t.jsx("button",{onClick:()=>he("newest"),className:"hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full p-0.5",children:"‚úï"})]}),t.jsx("button",{onClick:()=>{me(""),ge("all"),he("newest")},className:"text-xs text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 underline",children:"Clear all"})]})]})}),Ne&&t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-3 sm:gap-4 lg:gap-6",children:[...Array(6)].map((e,s)=>t.jsx(x,{children:t.jsxs("div",{className:"p-4 sm:p-5 lg:p-6 animate-pulse",children:[t.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[t.jsx("div",{className:"w-10 sm:w-12 h-10 sm:h-12 bg-slate-200 dark:bg-slate-700 rounded-xl"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-3/4 mb-2"}),t.jsx("div",{className:"h-3 bg-slate-200 dark:bg-slate-700 rounded w-1/2"})]})]}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsx("div",{className:"h-3 bg-slate-200 dark:bg-slate-700 rounded w-full"}),t.jsx("div",{className:"h-3 bg-slate-200 dark:bg-slate-700 rounded w-2/3"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("div",{className:"h-8 bg-slate-200 dark:bg-slate-700 rounded flex-1"}),t.jsx("div",{className:"h-8 bg-slate-200 dark:bg-slate-700 rounded w-10"})]})]})},s))}),!Ne&&Ft.length>0&&t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-3 sm:gap-4 lg:gap-6",children:Ft.map(e=>t.jsx(x,{hover:!0,children:t.jsxs("div",{className:"p-4 sm:p-5 lg:p-6",children:[t.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[t.jsx("div",{className:"w-10 sm:w-12 h-10 sm:h-12 common-bg-icons rounded-xl flex items-center justify-center flex-shrink-0",children:t.jsx(T,{className:"w-5 sm:w-6 h-5 sm:h-6 text-slate-900 dark:text-slate-100"})}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("h3",{className:"font-semibold text-slate-800 dark:text-white text-sm sm:text-base truncate",children:e.name}),t.jsxs("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400 truncate",children:[e.language," ‚Ä¢ ",e.persona]})]}),t.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium flex-shrink-0 "+("Published"===e.status||e.is_active?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":"bg-orange-100 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400"),children:"Published"===e.status||e.is_active?"Live":"Unpublished"})]})})]}),t.jsxs("div",{className:"space-y-2 mb-4 sm:mb-5",children:[t.jsxs("div",{className:"flex items-center justify-start text-xs sm:text-sm",children:[t.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Voice:"}),t.jsx("span",{className:"text-slate-800 dark:text-white truncate ml-2 text-right",children:e.voice})]}),t.jsxs("div",{className:"flex items-center justify-start text-xs sm:text-sm",children:[t.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Created:"}),t.jsx("span",{className:"text-slate-800 dark:text-white ml-2",children:new Date(e.createdAt).toLocaleDateString()})]})]}),t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsxs("button",{onClick:()=>g(`/agents/${e.id}`),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-all duration-200 text-sm font-medium active:scale-[0.98]",children:[t.jsx(L,{className:"w-4 h-4"}),"View"]}),t.jsxs("button",{onClick:()=>g(`/agents/${e.id}/edit`),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-all duration-200 text-sm font-medium active:scale-[0.98]",children:[t.jsx(P,{className:"w-4 h-4"}),"Edit"]}),t.jsxs("button",{onClick:()=>g(`/agents/${e.id}/train`,{state:{from:"list"}}),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 rounded-lg hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-all duration-200 text-sm font-medium active:scale-[0.98]",children:[t.jsx(D,{className:"w-4 h-4"}),"Train"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:["Published"===e.status?t.jsxs("button",{onClick:()=>Et(e.id),disabled:Ze.has(e.id),className:"flex-1 flex items-center justify-center gap-1.5 common-button-bg2 transition-all duration-200 text-sm font-medium "+(Ze.has(e.id)?"opacity-50 cursor-not-allowed":"active:scale-[0.98]"),children:[Ze.has(e.id)?t.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin"}):t.jsx(M,{className:"w-4 h-4"}),Ze.has(e.id)?"Pausing...":"Pause"]}):t.jsxs("button",{onClick:()=>e.is_active?Et(e.id):St(e.id),disabled:Ze.has(e.id),className:`flex-1 flex items-center justify-center gap-1.5 transition-all duration-200 text-sm font-medium ${Ze.has(e.id)?"opacity-50 cursor-not-allowed":"active:scale-[0.98]"} ${e.is_active?"common-button-bg2":"common-button-bg"}`,children:[Ze.has(e.id)?t.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin"}):e.is_active?t.jsx(M,{className:"w-4 h-4"}):t.jsx(I,{className:"w-4 h-4"}),Ze.has(e.id)?e.is_active?"Pausing...":"Publishing...":e.is_active?"Pause":"Publish"]}),t.jsx("button",{className:"p-2.5 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 active:scale-95",children:t.jsx(N,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>{return t=e.id,Ie(t),void De(!0);var t},className:"p-2.5 text-slate-400 hover:text-red-500 transition-colors rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 active:scale-95",title:"Delete agent",children:t.jsx(_,{className:"w-4 h-4"})})]})]})},e.id))}),we>0&&t.jsx("div",{className:"mt-4 lg:mt-6",children:t.jsx(f,{currentPage:Se,totalPages:je,totalItems:we,itemsPerPage:6,onPageChange:Gt})}),0===be.length&&!Ne&&t.jsxs("div",{className:"text-center py-12 lg:py-16 px-4",children:[t.jsx(T,{className:"w-20 lg:w-24 h-20 lg:h-24 text-slate-300 dark:text-slate-600 mx-auto mb-6"}),t.jsx("h3",{className:"text-xl lg:text-2xl font-medium text-slate-600 dark:text-slate-400 mb-3",children:ce||"all"!==ue?"No agents found":"No agents created yet"}),t.jsx("p",{className:"text-sm lg:text-base text-slate-500 dark:text-slate-500 max-w-md lg:max-w-lg mx-auto mb-6 leading-relaxed",children:ce||"all"!==ue?"Try adjusting your search or filter criteria to find what you're looking for":"Create your first AI agent to get started with automated conversations and boost your business efficiency"}),!ce&&"all"===ue&&ne&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:()=>g("/agents/create"),className:"w-full sm:w-auto common-button-bg px-6 py-3 rounded-xl shadow-sm hover:shadow-md transform hover:scale-[1.02] active:scale-[0.98]",children:"Create Your First Agent"}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-400 dark:text-slate-500",children:"Get started in just 2 minutes ‚ö°"})]}),(ce||"all"!==ue)&&t.jsx("button",{onClick:()=>{me(""),ge("all")},className:"w-full sm:w-auto common-button-bg2 px-6 py-2.5 rounded-lg",children:"Clear Filters"})]}),Pe&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[70] flex items-center justify-center p-4",children:t.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl w-full max-w-md shadow-xl border border-slate-200 dark:border-slate-700",children:t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 dark:bg-red-900/20 rounded-full mx-auto mb-4",children:t.jsx(_,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),t.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-white text-center mb-2",children:"Delete Agent?"}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 text-center mb-6",children:"Are you sure you want to delete this agent? This action cannot be undone and all associated data will be permanently removed."}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:Tt,disabled:_e,className:"flex-1 px-4 py-2.5 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-700 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),t.jsx("button",{onClick:At,disabled:_e,className:"flex-1 px-4 py-2.5 bg-red-600 hover:bg-red-700 text-white rounded-xl transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:_e?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),t.jsx("span",{children:"Deleting..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(_,{className:"w-4 h-4"}),t.jsx("span",{children:"Delete"})]})})]})]})})}),pe&&c.createPortal(t.jsxs("div",{className:"lg:hidden",children:[t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9998]",onClick:()=>fe(!1)}),t.jsx("div",{className:"fixed inset-x-0 bottom-0 z-[9999] animate-slide-up",children:t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-t-3xl shadow-2xl max-h-[85vh] overflow-hidden",children:[t.jsx("div",{className:"flex justify-center pt-3 pb-2",children:t.jsx("div",{className:"w-10 h-1 bg-slate-300 dark:bg-slate-600 rounded-full"})}),t.jsxs("div",{className:"flex items-center justify-between px-5 pb-4 border-b border-slate-200 dark:border-slate-700",children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:"Filters & Sort"}),t.jsx("button",{onClick:()=>fe(!1),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition-colors",children:t.jsx(C,{className:"w-5 h-5 text-slate-500"})})]}),t.jsxs("div",{className:"px-5 py-4 space-y-5 overflow-y-auto max-h-[50vh]",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Gender"}),t.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"all",label:"All"},{value:"male",label:"Male"},{value:"female",label:"Female"}].map(e=>t.jsx("button",{onClick:()=>ge(e.value),className:"py-2.5 px-3 rounded-xl text-sm font-medium transition-all "+(ue===e.value?"bg-blue-500 text-white shadow-md":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"),children:e.label},e.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Sort By"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"newest",label:"Newest"},{value:"oldest",label:"Oldest"},{value:"a-z",label:"A ‚Üí Z"},{value:"z-a",label:"Z ‚Üí A"}].map(e=>t.jsx("button",{onClick:()=>he(e.value),className:"py-2.5 px-3 rounded-xl text-sm font-medium transition-all "+(xe===e.value?"bg-blue-500 text-white shadow-md":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"),children:e.label},e.value))})]})]}),t.jsx("div",{className:"px-5 py-4 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 pb-safe",children:t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>{ge("all"),he("newest")},className:"flex-1 py-3 border border-slate-300 dark:border-slate-600 rounded-xl text-slate-700 dark:text-slate-300 font-medium active:scale-[0.98] transition-transform",children:"Reset"}),t.jsx("button",{onClick:()=>fe(!1),className:"flex-1 py-3 common-button-bg rounded-xl font-medium active:scale-[0.98] transition-transform",children:"Apply"})]})})]})})]}),document.body)]}):le&&j?t.jsxs("div",{className:"space-y-3 sm:space-y-4 lg:space-y-6 w-full",children:[t.jsx(x,{children:t.jsx("div",{className:"p-4 sm:p-6",children:t.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4 sm:flex-row sm:items-start sm:justify-between",children:[t.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 lg:gap-4 min-w-0 flex-1",children:[t.jsx("button",{onClick:()=>g("/agents"),className:"common-button-bg2 p-1.5 sm:p-2.5 rounded-lg sm:rounded-xl flex-shrink-0 touch-manipulation",children:t.jsx(R,{className:"w-4 sm:w-5 h-4 sm:h-5 text-slate-600 dark:text-slate-300"})}),t.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 lg:gap-4 min-w-0 flex-1",children:[t.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 lg:w-16 lg:h-16 common-bg-icons flex items-center justify-center flex-shrink-0 rounded-lg sm:rounded-xl",children:t.jsx(T,{className:"w-5 h-5 sm:w-7 sm:h-7 lg:w-8 lg:h-8 text-black dark:text-white"})}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsx("div",{className:"flex flex-col gap-1.5 sm:gap-2 sm:flex-row sm:items-start sm:justify-between",children:t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("h1",{className:"text-base sm:text-xl lg:text-2xl font-bold text-slate-800 dark:text-white leading-tight truncate",children:j.name}),t.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 sm:gap-x-3 gap-y-1 text-xs sm:text-sm text-slate-600 dark:text-slate-400 mt-1",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(B,{className:"w-3 h-3 sm:w-4 sm:h-4"}),t.jsx("span",{className:"truncate text-xs sm:text-sm",children:j.language})]}),t.jsx("div",{className:"flex items-center gap-1",children:t.jsx("span",{className:"px-2 py-0.5 sm:px-3 sm:py-1 rounded-full text-xs font-medium flex-shrink-0 "+("Published"===j.status||j.is_active?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":"bg-orange-100 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400"),children:"Published"===j.status||j.is_active?"Live":"Unpublished"})})]})]})})})]})]}),t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 lg:gap-3 flex-shrink-0",children:[t.jsxs("button",{onClick:()=>g(`/agents/${j.id}/edit`),className:"flex-1 sm:flex-none common-button-bg2 flex items-center justify-center gap-1 sm:gap-2 px-2 sm:px-3 lg:px-4 py-1.5 sm:py-2 lg:py-2.5 rounded-lg sm:rounded-xl touch-manipulation min-h-[36px] sm:min-h-[40px]",children:[t.jsx(P,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),t.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"Edit"})]}),("Published"===j.status||j.is_active)&&t.jsxs("button",{onClick:()=>Ae(!0),className:"flex-none common-button-bg2 flex items-center justify-center gap-1 sm:gap-2 px-2 sm:px-3 lg:px-4 py-1.5 sm:py-2 lg:py-2.5 rounded-lg sm:rounded-xl touch-manipulation min-h-[36px] sm:min-h-[40px]",children:[t.jsx(V,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),t.jsx("span",{className:"hidden sm:inline text-xs sm:text-sm font-medium",children:"QR"})]}),"Published"===j.status?t.jsxs("button",{onClick:()=>Et(j.id),disabled:Ze.has(j.id),className:"flex-none common-button-bg2 flex items-center justify-center gap-1 sm:gap-2 px-2 sm:px-3 lg:px-4 py-1.5 sm:py-2 lg:py-2.5 rounded-lg sm:rounded-xl touch-manipulation min-h-[36px] sm:min-h-[40px] "+(Ze.has(j.id)?"opacity-50 cursor-not-allowed":""),children:[Ze.has(j.id)?t.jsx("div",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin"}):t.jsx(M,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),t.jsx("span",{className:"text-xs sm:text-sm font-medium",children:Ze.has(j.id)?"...":"Pause"})]}):t.jsxs("button",{onClick:()=>j.is_active?Et(j.id):St(j.id),disabled:Ze.has(j.id),className:`flex-none flex items-center justify-center gap-1 sm:gap-2 px-2 sm:px-3 lg:px-4 py-1.5 sm:py-2 lg:py-2.5 rounded-lg sm:rounded-xl touch-manipulation min-h-[36px] sm:min-h-[40px] ${Ze.has(j.id)?"opacity-50 cursor-not-allowed":""} ${j.is_active?"common-button-bg2":"common-button-bg"}`,children:[Ze.has(j.id)?t.jsx("div",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin"}):j.is_active?t.jsx(M,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}):t.jsx(I,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),t.jsx("span",{className:"text-xs sm:text-sm font-medium",children:Ze.has(j.id)?"...":j.is_active?"Pause":"Publish"})]})]})]})})}),t.jsxs("div",{className:"lg:hidden grid grid-cols-2 gap-2",children:[t.jsx(x,{className:"hover:shadow-md transition-all duration-200",children:t.jsx("div",{className:"p-2",children:t.jsxs("div",{className:"flex flex-col items-center gap-1",children:[t.jsx("div",{className:"w-7 h-7 bg-blue-50 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:t.jsx(O,{className:"w-3.5 h-3.5 text-blue-600 dark:text-blue-400"})}),t.jsx("p",{className:"text-base font-bold text-slate-800 dark:text-white",children:j.stats.conversations.toLocaleString()}),t.jsx("p",{className:"text-[10px] text-slate-600 dark:text-slate-400",children:"Conversations"}),j.stats.conversations>0?t.jsx("span",{className:"text-[10px] font-medium text-green-600 dark:text-green-400",children:"+12%"}):t.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-500",children:"No data"})]})})}),t.jsx(x,{className:"hover:shadow-md transition-all duration-200",children:t.jsx("div",{className:"p-2",children:t.jsxs("div",{className:"flex flex-col items-center gap-1",children:[t.jsx("div",{className:"w-7 h-7 bg-green-50 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:t.jsx($,{className:"w-3.5 h-3.5 text-green-600 dark:text-green-400"})}),t.jsxs("p",{className:"text-base font-bold text-slate-800 dark:text-white",children:[j.stats.successRate,"%"]}),t.jsx("p",{className:"text-[10px] text-slate-600 dark:text-slate-400",children:"Success Rate"}),j.stats.successRate>0?t.jsx("span",{className:"text-[10px] font-medium text-green-600 dark:text-green-400",children:"+2.1%"}):t.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-500",children:"No data"})]})})}),t.jsx(x,{className:"hover:shadow-md transition-all duration-200",children:t.jsx("div",{className:"p-2",children:t.jsxs("div",{className:"flex flex-col items-center gap-1",children:[t.jsx("div",{className:"w-7 h-7 bg-purple-50 dark:bg-purple-900/20 rounded-lg flex items-center justify-center",children:t.jsx(U,{className:"w-3.5 h-3.5 text-purple-600 dark:text-purple-400"})}),t.jsxs("p",{className:"text-base font-bold text-slate-800 dark:text-white",children:[j.stats.avgResponseTime,"s"]}),t.jsx("p",{className:"text-[10px] text-slate-600 dark:text-slate-400",children:"Avg Response"}),j.stats.avgResponseTime>0?t.jsx("span",{className:"text-[10px] font-medium text-green-600 dark:text-green-400",children:"-0.3s"}):t.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-500",children:"No data"})]})})}),t.jsx(x,{className:"hover:shadow-md transition-all duration-200",children:t.jsx("div",{className:"p-2",children:t.jsxs("div",{className:"flex flex-col items-center gap-1",children:[t.jsx("div",{className:"w-7 h-7 bg-orange-50 dark:bg-orange-900/20 rounded-lg flex items-center justify-center",children:t.jsx(z,{className:"w-3.5 h-3.5 text-orange-600 dark:text-orange-400"})}),t.jsx("p",{className:"text-base font-bold text-slate-800 dark:text-white",children:j.stats.activeUsers}),t.jsx("p",{className:"text-[10px] text-slate-600 dark:text-slate-400",children:"Active Users"}),j.stats.activeUsers>0?t.jsx("span",{className:"text-[10px] font-medium text-green-600 dark:text-green-400",children:"+8%"}):t.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-500",children:"No data"})]})})})]}),t.jsxs("div",{className:"hidden lg:grid grid-cols-4 gap-4",children:[t.jsx(x,{className:"hover:shadow-lg transition-all duration-300",children:t.jsxs("div",{className:"p-5",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-50 dark:bg-blue-900/20 rounded-xl flex items-center justify-center",children:t.jsx(O,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:j.stats.conversations.toLocaleString()}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Conversations"})]})]}),t.jsx("div",{className:"flex items-center gap-1",children:j.stats.conversations>0?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"+12%"}),t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:"this week"})]}):t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:"No data yet"})})]})}),t.jsx(x,{className:"hover:shadow-lg transition-all duration-300",children:t.jsxs("div",{className:"p-5",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("div",{className:"w-12 h-12 bg-green-50 dark:bg-green-900/20 rounded-xl flex items-center justify-center",children:t.jsx($,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:[j.stats.successRate,"%"]}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Success Rate"})]})]}),t.jsx("div",{className:"flex items-center gap-1",children:j.stats.successRate>0?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"+2.1%"}),t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:"improved"})]}):t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:"No data yet"})})]})}),t.jsx(x,{className:"hover:shadow-lg transition-all duration-300",children:t.jsxs("div",{className:"p-5",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("div",{className:"w-12 h-12 bg-purple-50 dark:bg-purple-900/20 rounded-xl flex items-center justify-center",children:t.jsx(U,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:[j.stats.avgResponseTime,"s"]}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Avg Response"})]})]}),t.jsx("div",{className:"flex items-center gap-1",children:j.stats.avgResponseTime>0?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"-0.3s"}),t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:"faster"})]}):t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:"No data yet"})})]})}),t.jsx(x,{className:"hover:shadow-lg transition-all duration-300",children:t.jsxs("div",{className:"p-5",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("div",{className:"w-12 h-12 bg-orange-50 dark:bg-orange-900/20 rounded-xl flex items-center justify-center",children:t.jsx(z,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:j.stats.activeUsers}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Active Users"})]})]}),t.jsx("div",{className:"flex items-center gap-1",children:j.stats.activeUsers>0?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"+8%"}),t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:"today"})]}):t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:"No data yet"})})]})})]}),t.jsx("div",{className:"grid grid-cols-1 gap-3 sm:gap-4 lg:gap-6",children:t.jsx("div",{className:"order-1 lg:order-1",children:t.jsx(x,{children:t.jsxs("div",{className:"p-2 sm:p-3",children:[t.jsxs("div",{className:"flex flex-row sm:items-center sm:justify-between gap-2 mb-2",children:[t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[t.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 bg-slate-50 dark:bg-slate-800 rounded-lg flex items-center justify-center",children:t.jsx(H,{className:"w-3 h-3 text-slate-600 dark:text-slate-400"})}),t.jsx("h3",{className:"text-xs sm:text-sm font-semibold text-slate-800 dark:text-white",children:"Configuration"})]}),("Published"===j.status||j.is_active)&&t.jsxs("button",{onClick:()=>Le(!0),className:"flex items-center justify-center gap-1.5 sm:gap-2 px-3 py-1.5 sm:py-2 border border-1 dark:bg-green-900/20 text-black dark:text-green-300 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/30 transition-all duration-200 text-xs sm:text-sm font-medium shadow-sm hover:shadow-md self-start",children:[t.jsx(I,{className:"w-3 h-3 sm:w-4 sm:h-4"}),t.jsx("span",{children:"Test"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("div",{className:"p-2 bg-slate-50 border dark:bg-slate-800/50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[t.jsx(B,{className:"w-3 h-3 text-blue-600 dark:text-blue-400"}),t.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Language"})]}),t.jsx("p",{className:"text-sm font-semibold text-slate-800 dark:text-white",children:j.language})]}),t.jsxs("div",{className:"p-2 bg-slate-50 border dark:bg-slate-800/50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[t.jsx(O,{className:"w-3 h-3 text-purple-600 dark:text-purple-400"}),t.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Voice"})]}),t.jsx("p",{className:"text-sm font-semibold text-slate-800 dark:text-white",children:j.voice})]}),t.jsxs("div",{className:"p-2 bg-slate-50 border dark:bg-slate-800/50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[t.jsx(z,{className:"w-3 h-3 text-green-600 dark:text-green-400"}),t.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Persona"})]}),t.jsx("p",{className:"text-sm font-semibold text-slate-800 dark:text-white",children:j.persona})]}),t.jsxs("div",{className:"p-2 bg-slate-50 border dark:bg-slate-800/50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[t.jsx(U,{className:"w-3 h-3 text-orange-600 dark:text-orange-400"}),t.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Created"})]}),t.jsx("p",{className:"text-sm font-semibold text-slate-800 dark:text-white",children:new Date(j.createdAt).toLocaleDateString()})]})]})]})})})}),t.jsx("div",{className:"mt-3 sm:mt-4 lg:mt-6",children:t.jsx(X,{agentId:j.id,agentName:j.name,isPublished:!0})}),("Published"===j.status||j.is_active)&&t.jsx("div",{className:"mt-4 sm:mt-6",children:t.jsx(Z,{currentAgent:j})}),Ee&&j&&t.jsx(rt,{agent:j,onClose:()=>Ae(!1)}),Pe&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[70] flex items-center justify-center p-4",children:t.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl w-full max-w-md shadow-xl border border-slate-200 dark:border-slate-700",children:t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 dark:bg-red-900/20 rounded-full mx-auto mb-4",children:t.jsx(_,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),t.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-white text-center mb-2",children:"Delete Agent?"}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 text-center mb-6",children:"Are you sure you want to delete this agent? This action cannot be undone and all associated data will be permanently removed."}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:Tt,disabled:_e,className:"flex-1 px-4 py-2.5 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-700 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),t.jsx("button",{onClick:At,disabled:_e,className:"flex-1 px-4 py-2.5 bg-red-600 hover:bg-red-700 text-white rounded-xl transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:_e?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),t.jsx("span",{children:"Deleting..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(_,{className:"w-4 h-4"}),t.jsx("span",{children:"Delete"})]})})]})]})})}),t.jsxs("div",{className:"mt-4 sm:mt-6",children:[t.jsx("div",{className:"lg:hidden",children:t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("button",{onClick:()=>g(`/agents/${j.id}/train`),className:"common-bg-icons hover:shadow-md transition-all duration-200 p-2 rounded-lg touch-manipulation group",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-7 h-7 bg-blue-50 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:t.jsx(F,{className:"w-3.5 h-3.5 text-blue-600 dark:text-blue-400"})}),t.jsx("p",{className:"text-xs font-medium text-slate-800 dark:text-white",children:"Train"})]})}),t.jsx("button",{onClick:()=>g(`/agents/${j.id}/edit`),className:"common-bg-icons hover:shadow-md transition-all duration-200 p-2 rounded-lg touch-manipulation group",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-7 h-7 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg flex items-center justify-center",children:t.jsx(P,{className:"w-3.5 h-3.5 text-yellow-600 dark:text-yellow-400"})}),t.jsx("p",{className:"text-xs font-medium text-slate-800 dark:text-white",children:"Edit"})]})}),t.jsx("button",{className:"common-bg-icons hover:shadow-md transition-all duration-200 p-2 rounded-lg touch-manipulation group",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-7 h-7 bg-green-50 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:t.jsx(N,{className:"w-3.5 h-3.5 text-green-600 dark:text-green-400"})}),t.jsx("p",{className:"text-xs font-medium text-slate-800 dark:text-white",children:"Clone"})]})}),t.jsx("button",{className:"common-bg-icons hover:shadow-md transition-all duration-200 p-2 rounded-lg touch-manipulation group",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-7 h-7 bg-purple-50 dark:bg-purple-900/20 rounded-lg flex items-center justify-center",children:t.jsx(G,{className:"w-3.5 h-3.5 text-purple-600 dark:text-purple-400"})}),t.jsx("p",{className:"text-xs font-medium text-slate-800 dark:text-white",children:"Export"})]})})]})}),t.jsx("div",{className:"hidden lg:block",children:t.jsx(x,{children:t.jsxs("div",{className:"p-3 sm:p-4 lg:p-6",children:[t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-3 sm:mb-4",children:[t.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-slate-50 dark:bg-slate-800 rounded-lg sm:rounded-xl flex items-center justify-center",children:t.jsx(D,{className:"w-3 h-3 sm:w-4 sm:h-4 text-slate-600 dark:text-slate-400"})}),t.jsx("h3",{className:"text-sm sm:text-base lg:text-lg font-semibold text-slate-800 dark:text-white",children:"Quick Actions"})]}),t.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-2 sm:gap-3",children:[t.jsx("button",{onClick:()=>g(`/agents/${j.id}/train`),className:"common-bg-icons hover:shadow-md transition-all duration-200 p-3 sm:p-4 rounded-lg touch-manipulation group",children:t.jsxs("div",{className:"flex flex-col items-center gap-2 sm:gap-3",children:[t.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-blue-50 dark:bg-blue-900/20 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform",children:t.jsx(F,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm sm:text-base font-medium text-slate-800 dark:text-white",children:"Train Agent"}),t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Improve responses"})]})]})}),t.jsx("button",{onClick:()=>g(`/agents/${j.id}/edit`),className:"common-bg-icons hover:shadow-md transition-all duration-200 p-3 sm:p-4 rounded-lg touch-manipulation group",children:t.jsxs("div",{className:"flex flex-col items-center gap-2 sm:gap-3",children:[t.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform",children:t.jsx(P,{className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-600 dark:text-yellow-400"})}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm sm:text-base font-medium text-slate-800 dark:text-white",children:"Edit Agent"}),t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Modify settings"})]})]})}),t.jsx("button",{className:"common-bg-icons hover:shadow-md transition-all duration-200 p-3 sm:p-4 rounded-lg touch-manipulation group",children:t.jsxs("div",{className:"flex flex-col items-center gap-2 sm:gap-3",children:[t.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-green-50 dark:bg-green-900/20 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform",children:t.jsx(N,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600 dark:text-green-400"})}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm sm:text-base font-medium text-slate-800 dark:text-white",children:"Clone Agent"}),t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Create duplicate"})]})]})}),t.jsx("button",{className:"common-bg-icons hover:shadow-md transition-all duration-200 p-3 sm:p-4 rounded-lg touch-manipulation group",children:t.jsxs("div",{className:"flex flex-col items-center gap-2 sm:gap-3",children:[t.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-purple-50 dark:bg-purple-900/20 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform",children:t.jsx(G,{className:"w-4 h-4 sm:w-5 sm:h-5 text-purple-600 dark:text-purple-400"})}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm sm:text-base font-medium text-slate-800 dark:text-white",children:"Export Data"}),t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Download config"})]})]})})]})]})})})]}),Te&&j&&"Published"===j.status&&t.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-[60] flex items-center justify-center p-3 sm:p-4 -top-8",children:t.jsxs("div",{className:"bg-white/95 dark:bg-slate-900/95 backdrop-blur-md rounded-2xl w-full max-w-2xl h-[80vh] max-h-[600px] relative flex flex-col shadow-xl border border-white/20 dark:border-slate-700/50",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200/50 dark:border-slate-700/50",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),t.jsxs("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:["Test ",j.name]})]}),t.jsx("button",{onClick:async()=>{if(ht)try{await ht.disconnect()}catch(e){}Le(!1),Ue(!1),jt(!1),st("disconnected"),nt("Ready to connect"),Fe&&(clearInterval(Fe),Ge(null)),He(0),Oe("call")},className:"w-8 h-8 flex items-center justify-center hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:t.jsx(C,{className:"w-4 h-4 text-slate-400"})})]}),t.jsx("div",{className:"flex border-b border-slate-200/50 dark:border-slate-700/50",children:[{id:"call",label:"Voice",icon:W},{id:"conversation",label:"Conversation",icon:O}].map(({id:e,label:s,icon:a})=>t.jsxs("button",{onClick:()=>Oe(e),className:"flex-1 flex items-center justify-center gap-2 py-3 text-xs font-medium transition-colors "+(Be===e?"text-slate-900 dark:text-white border-b-2 border-slate-900 dark:border-white bg-slate-50/50 dark:bg-slate-800/50":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"),children:[t.jsx(a,{className:"w-4 h-4"}),t.jsx("span",{children:s})]},e))}),t.jsxs("div",{className:"flex-1 overflow-hidden",children:["call"===Be&&t.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-6",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mb-4 mx-auto transition-all "+("connected"===tt?"bg-green-100 dark:bg-green-900/20":"connecting"===tt?"bg-yellow-100 dark:bg-yellow-900/20 animate-pulse":"bg-slate-100 dark:bg-slate-800/50"),children:t.jsx(W,{className:"w-8 h-8 "+("connected"===tt?"text-green-600 dark:text-green-400":"connecting"===tt?"text-yellow-600 dark:text-yellow-400":"text-slate-400")})}),t.jsx("h3",{className:"text-lg font-medium text-slate-800 dark:text-white mb-1",children:"connected"===tt?"Connected":"connecting"===tt?"Connecting...":"Ready to Call"}),t.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:at}),$e&&t.jsx("p",{className:"text-sm font-mono text-slate-600 dark:text-slate-300 mt-2",children:$t(ze)})]}),t.jsx("div",{className:"flex items-center gap-3",children:$e||dt?$e?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:Ot,className:"p-3 rounded-xl transition-colors "+(it?"bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400":"bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400"),title:it?"Unmute":"Mute",children:it?t.jsx(q,{className:"w-5 h-5"}):t.jsx(K,{className:"w-5 h-5"})}),t.jsx("button",{onClick:Bt,className:"p-3 bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-xl hover:bg-red-200 dark:hover:bg-red-900/40 transition-colors",title:"End Call",children:t.jsx(W,{className:"w-5 h-5"})})]}):t.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 text-sm",children:[t.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 dark:border-slate-600 border-t-slate-900 dark:border-t-white rounded-full animate-spin"}),t.jsx("span",{children:"Connecting..."})]}):t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:Rt,disabled:Ye||dt,className:"flex items-center gap-2 px-6 py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl hover:bg-slate-800 dark:hover:bg-slate-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:[t.jsx(J,{className:"w-4 h-4"}),dt?"Connecting...":"Start Call"]}),t.jsxs("button",{onClick:_t,className:"flex items-center gap-2 px-4 py-3 text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200 transition-colors text-sm",children:[t.jsx(H,{className:"w-4 h-4"}),"Test"]})]})}),$e&&t.jsx("div",{className:"mt-6 text-center",children:t.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-slate-500 dark:text-slate-400",children:[t.jsx("div",{className:"w-2 h-2 rounded-full "+(it?"bg-red-500":"bg-green-500")}),it?"Muted":"Listening"]})})]}),"conversation"===Be&&t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[0===We.length?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(O,{className:"w-8 h-8 text-slate-300 dark:text-slate-600 mx-auto mb-3"}),t.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Start a conversation to see messages"})]}):We.map(e=>t.jsx("div",{className:"flex mb-4 "+(e.isUser?"justify-end":"justify-start"),children:t.jsxs("div",{className:"flex gap-3 max-w-[80%] "+(e.isUser?"flex-row-reverse":""),children:[t.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 "+(e.isUser?"bg-blue-500 text-white":"bg-green-500 text-white"),children:e.isUser?t.jsx("span",{className:"text-sm font-medium",children:"U"}):t.jsx("span",{className:"text-sm font-medium",children:"AI"})}),t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:e.isUser?"You":"AI Employee"}),t.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),e.source&&t.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full "+("voice"===e.source?"bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400"),children:"voice"===e.source?"üéôÔ∏è":"üí¨"})]}),t.jsx("div",{className:"px-4 py-2 rounded-2xl text-sm "+(e.isUser?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200"),children:e.text})]})]})},e.id)),Ye&&t.jsx("div",{className:"flex justify-start mb-4",children:t.jsxs("div",{className:"flex gap-3 max-w-[80%]",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500 text-white flex items-center justify-center flex-shrink-0",children:t.jsx("span",{className:"text-sm font-medium",children:"AI"})}),t.jsx("div",{className:"flex flex-col",children:t.jsx("div",{className:"px-4 py-2 rounded-2xl bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200",children:t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-pulse"}),t.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-pulse",style:{animationDelay:"0.1s"}}),t.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}})]})})})]})})]}),t.jsxs("div",{className:"p-4 border-t border-slate-200/50 dark:border-slate-700/50",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:qe,onChange:e=>Je(e.target.value),onKeyPress:e=>{"Enter"!==e.key||Ye||Lt()},placeholder:"connected"===tt?"Type a message or use voice...":"Type a message...",className:"flex-1 px-3 py-2 bg-slate-50 dark:bg-slate-800 border-0 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-900/10 dark:focus:ring-white/10 text-slate-700 dark:text-slate-300 text-sm placeholder-slate-400 dark:placeholder-slate-500",disabled:Ye}),t.jsx("button",{onClick:Lt,disabled:!qe.trim()||Ye,className:"px-3 py-2 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-lg hover:bg-slate-800 dark:hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:t.jsx(Q,{className:"w-4 h-4"})})]}),"connected"===tt&&t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2 text-center",children:"üî¥ Live conversation ‚Ä¢ Voice and text messages"})]})]})]})]})})]}):t.jsx(m,{to:"/agents",replace:!0})};export{it as default};
