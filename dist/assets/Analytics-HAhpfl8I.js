import{r as l,j as e,l as Z,e as he}from"./index-C7Tdk3bR.js";import{G as le}from"./GlassCard-CMEFW1kK.js";import{i as ue}from"./utils-D55my28o.js";import{S as ge}from"./index-BpVyZTmx.js";import{M as F}from"./message-square-BL0Mqabw.js";import{X as pe}from"./x-BKkhrq7D.js";import{C as ee}from"./clock-DSA9AJb3.js";import{M as ie}from"./map-pin-Dc5Z9y7S.js";import{P as K}from"./phone-DkhDoZdb.js";import{F as X}from"./file-text-C2X2-aqO.js";import{L as ce,X as xe}from"./x-circle-C_T-Ot0y.js";import{U as G}from"./users-DVbwqpHW.js";import{B as be}from"./bot-CI0Nmtag.js";import{c as I}from"./createLucideIcon-BdU3MQb6.js";import{P as fe}from"./pause-BWClTHNF.js";import{P as ke}from"./play-Dd5CNMOP.js";import{D as je}from"./download-CfpUoI7M.js";import{M as Ne}from"./mail-Bbmq_4Wf.js";import{T as de}from"./trending-up-BCUAR61i.js";import{C as ve}from"./check-circle-Bz4KgH8E.js";import{C as we}from"./calendar---WTIDU2.js";import{C as ye}from"./chevron-left-DeasVJBy.js";import{C as Se}from"./chevron-right-DmVKVZnq.js";import{C as ne}from"./chevron-down-CfyZklSG.js";import{S as De}from"./search-vRU4rdcb.js";import{F as Te}from"./filter-D9Pxpe-T.js";import{E as Ce}from"./eye-CUPUaJDh.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=I("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=I("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=I("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=I("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=I("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=I("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),Fe=({session:a,onClose:o})=>{var b,N,x,q;const[v,w]=l.useState([]),[j,S]=l.useState(!0),[T,p]=l.useState(null),[D,C]=l.useState("transcripts"),[i,h]=l.useState(null),[c,R]=l.useState(!1),[U,_]=l.useState(null),[A,O]=l.useState(!1),[V,M]=l.useState(0),[f,H]=l.useState(0),[Q,te]=l.useState(1),[L,P]=l.useState(!1),[k,Y]=l.useState(1),r=l.useRef(null),$=l.useRef(null);l.useEffect(()=>{const t=async()=>{if(a!=null&&a.session_id){S(!0),p(null);try{const m=await Z.getSessionTranscripts(a.session_id);w(m.transcripts||[])}catch(m){console.error("Failed to fetch transcripts:",m),p(m.message||"Failed to load transcripts")}finally{S(!1)}}},g=async()=>{var m,B;if(!(!((m=a==null?void 0:a.agent)!=null&&m.id)&&!(a!=null&&a.agent_id))){R(!0),_(null);try{const E=((B=a.agent)==null?void 0:B.id)||a.agent_id,me=await Z.getCallSummary(E);h(me)}catch(E){console.error("Failed to fetch call summary:",E),_(E.message||"Failed to load call summary")}finally{R(!1)}}};t(),g()},[a==null?void 0:a.session_id,(b=a==null?void 0:a.agent)==null?void 0:b.id,a==null?void 0:a.agent_id]);const z=()=>{r.current&&(A?r.current.pause():r.current.play(),O(!A))},se=()=>{r.current&&M(r.current.currentTime)},ae=()=>{r.current&&H(r.current.duration)},re=t=>{if(!r.current||!$.current)return;const g=$.current.getBoundingClientRect(),E=(t.clientX-g.left)/g.width*f;r.current.currentTime=E,M(E)},oe=()=>{r.current&&(L?(r.current.volume=Q,P(!1)):(r.current.volume=0,P(!0)))},y=()=>{const t=[.5,.75,1,1.25,1.5,2],g=t.indexOf(k),m=t[(g+1)%t.length];Y(m),r.current&&(r.current.playbackRate=m)},W=t=>{r.current&&(r.current.currentTime=Math.max(0,Math.min(f,r.current.currentTime+t)))},J=()=>{const t=document.createElement("a");t.href="#",t.download=`recording-${a.session_id}.mp3`,t.click()},s=t=>{if(!t||isNaN(t))return"0:00";const g=Math.floor(t/60),m=Math.floor(t%60);return`${g}:${m.toString().padStart(2,"0")}`};if(!a)return null;const n=t=>{if(!t)return"0m 0s";const g=Math.floor(t/60),m=Math.floor(t%60);return`${g}m ${m}s`},d=t=>t?new Date(t).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"N/A",u=t=>t?new Date(t).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return e.jsx("div",{className:"fixed inset-0 -top-8 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-2 sm:p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl sm:rounded-2xl shadow-2xl w-full max-w-3xl max-h-[95vh] sm:max-h-[90vh] overflow-hidden flex flex-col my-auto",children:[e.jsxs("div",{className:"p-3 sm:p-4 border-b border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2 sm:mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx("div",{className:"w-7 h-7 sm:w-10 sm:h-10 common-bg-icons rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(F,{className:"w-3.5 h-3.5 sm:w-5 sm:h-5 text-slate-600 dark:text-slate-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-sm sm:text-lg font-semibold text-slate-800 dark:text-white truncate",children:"Session Transcript"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate font-mono",children:a.session_id||a.id})]})]}),e.jsx("button",{onClick:o,className:"p-1 sm:p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors flex-shrink-0",children:e.jsx(pe,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-600 dark:text-slate-400"})})]}),e.jsxs("div",{className:"flex flex-wrap gap-1.5 sm:gap-2 mb-2 sm:mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5 min-w-0 flex-1 min-w-[calc(50%-0.375rem)] sm:min-w-0 bg-slate-50 dark:bg-slate-900/30 px-2 py-1.5 rounded-md",children:[e.jsx(ee,{className:"w-3 h-3 text-slate-500 dark:text-slate-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 hidden sm:block",children:"Date & Time"}),e.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 truncate block",children:a.start_time?new Date(a.start_time).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 min-w-0 flex-1 min-w-[calc(50%-0.375rem)] sm:min-w-0 bg-slate-50 dark:bg-slate-900/30 px-2 py-1.5 rounded-md",children:[e.jsx(ie,{className:"w-3 h-3 text-slate-500 dark:text-slate-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 hidden sm:block",children:"IP Address"}),e.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 truncate block",children:a.user_ip||a.ip||"Unknown"})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 min-w-0 flex-1 min-w-[calc(50%-0.375rem)] sm:min-w-0 bg-slate-50 dark:bg-slate-900/30 px-2 py-1.5 rounded-md",children:[e.jsx(K,{className:"w-3 h-3 text-slate-500 dark:text-slate-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 hidden sm:block",children:"Device â€¢ Duration"}),e.jsxs("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 truncate block",children:[((N=a.device)==null?void 0:N.deviceType)||((x=a.device)==null?void 0:x.device_type)||((q=a.device)==null?void 0:q.browser)||"Unknown"," â€¢ ",n(a.duration_seconds)]})]})]})]}),e.jsxs("div",{className:"flex gap-1 p-1 bg-slate-100 dark:bg-slate-900/30 rounded-lg",children:[e.jsxs("button",{onClick:()=>C("transcripts"),className:`flex-1 px-3 py-2 text-xs sm:text-sm font-medium rounded-md transition-all duration-200 ${D==="transcripts"?"bg-white dark:bg-slate-700 text-slate-800 dark:text-white shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:[e.jsx(F,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 inline mr-1.5"}),"Call Transcripts"]}),e.jsxs("button",{onClick:()=>C("recording"),className:`flex-1 px-3 py-2 text-xs sm:text-sm font-medium rounded-md transition-all duration-200 ${D==="recording"?"bg-white dark:bg-slate-700 text-slate-800 dark:text-white shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white"}`,children:[e.jsx(X,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 inline mr-1.5"}),"Recording & Summary"]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4",children:[D==="transcripts"&&e.jsxs("div",{className:"common-bg-icons p-3 sm:p-4 rounded-lg sm:rounded-xl",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-slate-800 dark:text-white mb-3",children:"Conversation Transcript"}),e.jsx("div",{className:"space-y-1 max-h-[250px] sm:max-h-[400px] overflow-y-auto",children:j?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(ce,{className:"w-6 h-6 sm:w-8 sm:h-8 text-blue-500 animate-spin"})}):T?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(X,{className:"w-10 h-10 sm:w-12 sm:h-12 text-red-300 dark:text-red-600 mx-auto mb-3"}),e.jsx("p",{className:"text-xs sm:text-sm text-red-500 dark:text-red-400",children:T})]}):v&&v.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400 mb-2",children:["Conversation started on ",u(a.start_time)]}),v.map((t,g)=>e.jsx("div",{className:"flex flex-col gap-1.5 py-1.5 sm:py-2",children:t.role==="user"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["CUSTOMER â€¢ ",d(t.timestamp||t.created_at)]})}),e.jsxs("div",{className:"flex items-start gap-1.5 sm:gap-2 justify-end",children:[e.jsx("div",{className:"max-w-[80%] bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-2xl rounded-tr-sm px-3 py-2 sm:px-4 sm:py-3 shadow-sm",children:e.jsx("p",{className:"text-xs sm:text-sm",children:t.text||t.content})}),e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-gradient-to-br from-slate-600 to-slate-700 flex items-center justify-center flex-shrink-0",children:e.jsx(G,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-white"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-start mb-1",children:e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["AI EMPLOYEE â€¢ ",d(t.timestamp||t.created_at)]})}),e.jsxs("div",{className:"flex items-start gap-1.5 sm:gap-2",children:[e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center flex-shrink-0",children:e.jsx(be,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-white"})}),e.jsx("div",{className:"max-w-[80%] common-bg-icons rounded-2xl rounded-tl-sm px-3 py-2 sm:px-4 sm:py-3 border border-slate-200 dark:border-slate-700",children:e.jsx("p",{className:"text-xs sm:text-sm text-slate-800 dark:text-white",children:t.text||t.content})})]})]})},g)),e.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-3 flex items-center gap-1",children:[e.jsx(ee,{className:"w-3 h-3"}),"Session ended â€¢ Resolution: Session completed"]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(X,{className:"w-10 h-10 sm:w-12 sm:h-12 text-slate-300 dark:text-slate-600 mx-auto mb-3"}),e.jsx("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400",children:"No transcripts available for this session"})]})})]}),D==="recording"&&e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"common-bg-icons p-3 sm:p-4 rounded-lg sm:rounded-xl",children:[e.jsxs("h3",{className:"text-sm sm:text-base font-semibold text-slate-800 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z"})}),"Call Recording"]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/30 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[e.jsx("audio",{ref:r,onTimeUpdate:se,onLoadedMetadata:ae,onEnded:()=>O(!1),src:"#"}),e.jsx("div",{ref:$,onClick:re,className:"relative h-1 bg-slate-300 dark:bg-slate-700 rounded-full cursor-pointer mb-2",children:e.jsx("div",{className:"absolute top-0 left-0 h-full bg-blue-600 rounded-full transition-all",style:{width:`${f>0?V/f*100:0}%`}})}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400 w-10",children:s(V)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>W(-10),className:"p-1.5 hover:bg-slate-200 dark:hover:bg-slate-700 rounded transition-colors",title:"Rewind 10s",children:e.jsx($e,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"})}),e.jsx("button",{onClick:z,className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-full transition-colors",title:A?"Pause":"Play",children:A?e.jsx(fe,{className:"w-4 h-4",fill:"currentColor"}):e.jsx(ke,{className:"w-4 h-4 ml-0.5",fill:"currentColor"})}),e.jsx("button",{onClick:()=>W(10),className:"p-1.5 hover:bg-slate-200 dark:hover:bg-slate-700 rounded transition-colors",title:"Forward 10s",children:e.jsx(Ee,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"})}),e.jsxs("button",{onClick:y,className:"px-2 py-1 hover:bg-slate-200 dark:hover:bg-slate-700 rounded transition-colors text-xs text-slate-600 dark:text-slate-400",title:"Playback speed",children:[k,"x"]}),e.jsx("button",{onClick:oe,className:"p-1.5 hover:bg-slate-200 dark:hover:bg-slate-700 rounded transition-colors",title:L?"Unmute":"Mute",children:L?e.jsx(Le,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"}):e.jsx(_e,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"})}),e.jsx("button",{onClick:J,className:"p-1.5 hover:bg-slate-200 dark:hover:bg-slate-700 rounded transition-colors",title:"Download recording",children:e.jsx(je,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"})})]}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400 w-10 text-right",children:s(f||a.duration_seconds||0)})]})]})]}),e.jsxs("div",{className:"common-bg-icons p-3 sm:p-4 rounded-lg sm:rounded-xl",children:[e.jsxs("h3",{className:"text-sm sm:text-base font-semibold text-slate-800 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Call Summary"]}),c?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(ce,{className:"w-6 h-6 text-blue-500 animate-spin"})}):U?e.jsxs("div",{className:"text-center py-6",children:[e.jsx(xe,{className:"w-10 h-10 text-red-300 dark:text-red-600 mx-auto mb-2"}),e.jsx("p",{className:"text-xs sm:text-sm text-red-500 dark:text-red-400",children:U})]}):i!=null&&i.leads&&i.leads.length>0?e.jsx("div",{className:"space-y-4",children:i.leads.filter(t=>t.callId===(a.session_id||a.id)).map((t,g)=>e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-3 sm:p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-3.5 h-3.5 text-blue-500"}),e.jsx("span",{className:"text-xs font-mono text-slate-600 dark:text-slate-400",children:t.callId||"N/A"})]}),t.createdAt&&e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(t.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),t.intent&&e.jsxs("div",{className:"space-y-2",children:[t.intent.primary&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-700",children:[e.jsx("p",{className:"text-xs font-medium text-blue-700 dark:text-blue-300 mb-1",children:"Primary Intent"}),e.jsx("p",{className:"text-xs sm:text-sm text-slate-700 dark:text-slate-300 leading-relaxed",children:t.intent.primary})]}),t.intent.details&&e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/30 p-3 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("p",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Details"}),e.jsx("p",{className:"text-xs sm:text-sm text-slate-700 dark:text-slate-300 leading-relaxed",children:t.intent.details})]}),t.intent.urgency&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Urgency:"}),e.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${t.intent.urgency==="high"?"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400":t.intent.urgency==="medium"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400"}`,children:t.intent.urgency})]}),t.intent.tags&&t.intent.tags.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.intent.tags.map((m,B)=>e.jsx("span",{className:"px-2 py-0.5 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-full text-xs border border-slate-200 dark:border-slate-700",children:m},B))})]})]}),t.leadData&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Lead Information"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.leadData.name&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(G,{className:"w-4 h-4 text-slate-500 dark:text-slate-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Name"}),e.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-white truncate",children:t.leadData.name})]})]}),t.leadData.email&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ne,{className:"w-4 h-4 text-slate-500 dark:text-slate-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Email"}),e.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-white truncate",children:t.leadData.email})]})]}),t.leadData.phone&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(K,{className:"w-4 h-4 text-slate-500 dark:text-slate-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Phone"}),e.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-white",children:t.leadData.phone})]})]}),t.leadData.status&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(de,{className:"w-4 h-4 text-slate-500 dark:text-slate-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Status"}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${t.leadData.status==="qualified"?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":t.leadData.status==="interested"?"bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400":t.leadData.status==="new"?"bg-purple-100 text-purple-700 dark:bg-purple-900/20 dark:text-purple-400":"bg-slate-100 text-slate-700 dark:bg-slate-900/20 dark:text-slate-400"}`,children:[t.leadData.status==="qualified"&&e.jsx(ve,{className:"w-3 h-3"}),t.leadData.status]})]})]}),t.leadData.group_size&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(G,{className:"w-4 h-4 text-slate-500 dark:text-slate-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Group Size"}),e.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-white",children:t.leadData.group_size})]})]}),t.leadData.dates&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(we,{className:"w-4 h-4 text-slate-500 dark:text-slate-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Travel Dates"}),e.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-white",children:t.leadData.dates})]})]})]})]})]},t.id||g))}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(X,{className:"w-10 h-10 text-slate-300 dark:text-slate-600 mx-auto mb-2"}),e.jsx("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400",children:"No call summary available"})]})]})]})]})]})})},Ie=({currentPage:a,totalPages:o,totalItems:v,itemsPerPage:w,onPageChange:j,className:S=""})=>{if(o<=1)return null;const T=(a-1)*w+1,p=Math.min(a*w,v),C=(()=>{const i=[];if(o<=5)for(let c=1;c<=o;c++)i.push(c);else if(i.push(1),a<=3){for(let c=2;c<=4;c++)i.push(c);i.push(-1),i.push(o)}else if(a>=o-2){i.push(-1);for(let c=o-3;c<=o;c++)i.push(c)}else{i.push(-1);for(let c=a-1;c<=a+1;c++)i.push(c);i.push(-1),i.push(o)}return i})();return e.jsxs("div",{className:`flex flex-col sm:flex-row items-center justify-between gap-3 ${S}`,children:[e.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Showing ",e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:T})," to"," ",e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:p})," of"," ",e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:v})," results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>j(1),disabled:a===1,className:`p-2 rounded-lg border transition-colors ${a===1?"border-slate-200 dark:border-slate-700 text-slate-400 dark:text-slate-600 cursor-not-allowed":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,title:"First page",children:e.jsx(Ae,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>j(a-1),disabled:a===1,className:`p-2 rounded-lg border transition-colors ${a===1?"border-slate-200 dark:border-slate-700 text-slate-400 dark:text-slate-600 cursor-not-allowed":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,title:"Previous page",children:e.jsx(ye,{className:"w-4 h-4"})}),e.jsx("div",{className:"flex items-center gap-1",children:C.map((i,h)=>i===-1?e.jsx("span",{className:"px-2 text-slate-400 dark:text-slate-600",children:"..."},`ellipsis-${h}`):e.jsx("button",{onClick:()=>j(i),className:`min-w-[2rem] h-8 px-3 text-sm rounded-lg border transition-colors ${a===i?"bg-blue-500 border-blue-500 text-white font-medium":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:i},i))}),e.jsx("button",{onClick:()=>j(a+1),disabled:a===o,className:`p-2 rounded-lg border transition-colors ${a===o?"border-slate-200 dark:border-slate-700 text-slate-400 dark:text-slate-600 cursor-not-allowed":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,title:"Next page",children:e.jsx(Se,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>j(o),disabled:a===o,className:`p-2 rounded-lg border transition-colors ${a===o?"border-slate-200 dark:border-slate-700 text-slate-400 dark:text-slate-600 cursor-not-allowed":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,title:"Last page",children:e.jsx(Me,{className:"w-4 h-4"})})]})]})},ct=()=>{const{user:a}=he();l.useState("all");const[o,v]=l.useState("all"),[w,j]=l.useState(""),[S,T]=l.useState(""),[p,D]=l.useState(""),[C,i]=l.useState([]),[h,c]=l.useState([]),[R,U]=l.useState(!1),[_,A]=l.useState(null),[O,V]=l.useState(null),[M,f]=l.useState(1),[H,Q]=l.useState(1),[te,L]=l.useState(0),P=10,[k,Y]=l.useState({startDate:"",endDate:"",preset:"all"}),r=ue(a==null?void 0:a.email),$=r?C:[];l.useEffect(()=>{const s=setTimeout(()=>{T(w),M!==1&&f(1)},500);return()=>clearTimeout(s)},[w]),l.useEffect(()=>{M!==1&&f(1)},[o,k]),l.useEffect(()=>{(async()=>{if(r)try{console.log("ðŸš€ Fetching agents...");const n=await Z.getAgents();i(n||[]),console.log("âœ… Agents loaded:",n.length),n.length>0&&!p&&(console.log("âœ… Setting default agent:",n[0].id,n[0].name),D(n[0].id))}catch(n){console.error("âŒ Error fetching agents:",n)}})()},[r]);const z=async(s,n=1)=>{if(!s){console.log("âš ï¸ No agent ID provided, skipping fetch");return}U(!0),A(null);try{console.log("ðŸ”„ Fetching sessions for agent:",s,"page:",n);const d=new URLSearchParams({page:n.toString(),limit:P.toString()});o!=="all"&&d.append("deviceType",o),k.startDate&&d.append("startDate",k.startDate),k.endDate&&d.append("endDate",k.endDate),S.trim()&&d.append("q",S.trim());const u=d.toString();console.log("API Query Params:",u);const b=await Z.getAgentSessions(u,s),N=(b==null?void 0:b.sessions)||[],x=(b==null?void 0:b.pagination)||{};c(N),Q(x.totalPages||1),L(x.total||N.length),f(x.page||n),console.log("âœ… Session history loaded:",N.length,"sessions"),console.log("ðŸ“Š Pagination:",x)}catch(d){console.error("âŒ Error fetching session history:",d),A(d instanceof Error?d.message:"Failed to load session history"),c([]),Q(1),L(0)}finally{U(!1)}};l.useEffect(()=>{console.log("ðŸ“Š Analytics useEffect triggered - isDeveloper:",r,"selectedEmployee:",p),r&&p&&(f(1),z(p,1))},[p,r,o,k,S]);const se=s=>{v(s)},ae=s=>{const n=new Date;let d="",u="";switch(s){case"today":d=n.toISOString().split("T")[0],u=d;break;case"week":d=new Date(n.getTime()-7*24*60*60*1e3).toISOString().split("T")[0],u=n.toISOString().split("T")[0];break;case"month":d=new Date(n.getFullYear(),n.getMonth()-1,n.getDate()).toISOString().split("T")[0],u=n.toISOString().split("T")[0];break;case"all":default:d="",u="";break}Y({startDate:d,endDate:u,preset:s})},re=()=>{j(""),T(""),v("all"),Y({startDate:"",endDate:"",preset:"all"}),f(1)},y=(()=>{if(!r)return{totalSessions:0,performanceScore:0,avgDuration:0,activeAgents:0};const s=h.length>0?h.reduce((d,u)=>d+(u.duration_seconds||0),0)/h.length:0,n=s>0?Math.min(100,Math.round(s/300*100)):0;return{totalSessions:te,performanceScore:n,avgDuration:s,activeAgents:C.length}})(),W=s=>{if(!s)return"0s";const n=Math.floor(s/60),d=Math.floor(s%60);return n>0?`${n}m ${d}s`:`${d}s`},J=r?[{title:"Sessions",subtitle:"Total",value:y.totalSessions.toString(),change:h.length>0?`${h.length} on page`:"No data",trend:"neutral",icon:F,color:"blue"},{title:"Performance",subtitle:"Score",value:`${y.performanceScore}%`,change:y.performanceScore>50?"Good":"Low",trend:y.performanceScore>50?"positive":"neutral",icon:de,color:"green"},{title:"Duration",subtitle:"Average",value:W(y.avgDuration),change:h.length>0?`${h.length} sessions`:"No data",trend:"neutral",icon:ee,color:"purple"},{title:"Agents",subtitle:"Active",value:y.activeAgents.toString(),change:y.activeAgents>0?"Online":"Offline",trend:"neutral",icon:G,color:"orange"}]:[{title:"Sessions",subtitle:"Total",value:"0",change:"No data",trend:"neutral",icon:F,color:"blue"},{title:"Performance",subtitle:"Score",value:"0%",change:"No data",trend:"neutral",icon:de,color:"green"},{title:"Duration",subtitle:"Average",value:"0s",change:"No data",trend:"neutral",icon:ee,color:"purple"},{title:"Demo",subtitle:"All-Time Active",value:"",change:"",trend:"neutral",icon:G,color:"orange"}];return e.jsxs("div",{className:"space-y-4 sm:space-y-6 w-full max-w-full overflow-hidden",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-wrap",children:[e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:p,onChange:s=>D(s.target.value),disabled:!r,className:`text-sm sm:text-base font-semibold px-3 py-1.5 pr-8 rounded-lg border-2 appearance-none cursor-pointer transition-all ${r?"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border-blue-200 dark:border-blue-700 text-slate-800 dark:text-white hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-md":"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 dark:text-gray-500 cursor-not-allowed"} focus:outline-none focus:ring-2 focus:ring-blue-500/20`,children:$.map(s=>e.jsx("option",{value:s.id,className:"bg-white dark:bg-slate-800 text-slate-800 dark:text-white",children:s.name},s.id))}),e.jsx(ne,{className:`absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 pointer-events-none transition-colors ${r?"text-blue-600 dark:text-blue-400":"text-gray-400"}`})]}),r&&$.length>1&&e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400 italic",children:["(",$.length," more agents)"]})]})}),e.jsxs("div",{className:"stats-section",children:[e.jsx("div",{className:"block sm:hidden",children:e.jsx(ge,{dots:!0,infinite:!1,speed:300,slidesToShow:2.2,slidesToScroll:1,swipeToSlide:!0,touchThreshold:10,arrows:!1,className:"mobile-stats-slider",customPaging:()=>e.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full hover:bg-gray-600 transition-colors duration-200"}),dotsClass:"slick-dots !bottom-[-20px] !flex !justify-center !gap-2",children:J.map((s,n)=>e.jsx("div",{className:"px-1",children:e.jsx(le,{hover:!0,children:e.jsxs("div",{className:"p-3 min-h-[90px]",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[e.jsx("div",{className:"p-1 rounded-lg common-bg-icons",children:e.jsx(s.icon,{className:`w-3.5 h-3.5 ${s.color==="blue"?"text-blue-600 dark:text-blue-400":s.color==="green"?"text-green-600 dark:text-green-400":s.color==="purple"?"text-purple-600 dark:text-purple-400":"text-orange-600 dark:text-orange-400"}`})}),s.change&&e.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:s.change})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-slate-800 dark:text-white mb-0.5",children:s.value}),e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 leading-tight",children:s.title}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 leading-tight",children:s.subtitle})]})]})})},n))})}),e.jsx("div",{className:"hidden sm:grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:J.map((s,n)=>e.jsx(le,{hover:!0,children:e.jsxs("div",{className:"p-4 sm:p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"p-2 rounded-lg common-bg-icons",children:e.jsx(s.icon,{className:`w-4 sm:w-5 h-4 sm:h-5 ${s.color==="blue"?"text-blue-600 dark:text-blue-400":s.color==="green"?"text-green-600 dark:text-green-400":s.color==="purple"?"text-purple-600 dark:text-purple-400":"text-orange-600 dark:text-orange-400"}`})}),s.change&&e.jsx("span",{className:"text-xs sm:text-sm text-green-600 dark:text-green-400",children:s.change})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-slate-800 dark:text-white mb-1",children:s.value}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:s.title}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:s.subtitle})]})]})},n))})]}),e.jsx(le,{children:e.jsxs("div",{className:"p-3 sm:p-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4",children:e.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-slate-800 dark:text-white",children:["Session History (",h.length," sessions)"]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-3 mb-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(De,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search sessions...",value:w,onChange:s=>j(s.target.value),disabled:!r,className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 text-sm touch-manipulation ${r?"bg-slate-100 dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-800 dark:text-white":"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:o,onChange:s=>se(s.target.value),disabled:!r,className:`px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 text-sm appearance-none pr-8 touch-manipulation ${r?"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-800 dark:text-white":"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"all",children:"All Devices"}),e.jsx("option",{value:"mobile",children:"Mobile"}),e.jsx("option",{value:"desktop",children:"Desktop"}),e.jsx("option",{value:"tablet",children:"Tablet"})]}),e.jsx(ne,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:k.preset,onChange:s=>ae(s.target.value),disabled:!r,className:`px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 text-sm appearance-none pr-8 touch-manipulation ${r?"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-800 dark:text-white":"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"})]}),e.jsx(ne,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]}),(w||o!=="all"||k.preset!=="all")&&e.jsx("button",{onClick:re,disabled:!r,className:`p-2 rounded-lg border transition-colors ${r?"border-slate-200 dark:border-slate-700 hover:bg-red-50 hover:border-red-300 hover:text-red-600 dark:hover:bg-red-900/20":"border-gray-300 dark:border-gray-600 bg-gray-100 dark:bg-gray-800 cursor-not-allowed opacity-50"}`,title:"Clear all filters",children:e.jsx(xe,{className:"w-4 h-4"})}),e.jsx("button",{disabled:!r,className:`p-2 border rounded-lg transition-colors ${r?"border-slate-200 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-700":"border-gray-300 dark:border-gray-600 bg-gray-100 dark:bg-gray-800 cursor-not-allowed opacity-50"}`,onClick:()=>z(p,M),title:"Refresh sessions",children:e.jsx(Te,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"})})]})]}),e.jsx("div",{className:"space-y-3",children:R?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):_?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(F,{className:"w-12 h-12 text-red-400 mx-auto mb-3"}),e.jsx("p",{className:"text-base text-red-600 dark:text-red-400 mb-1",children:"Error loading sessions"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500",children:_})]}):h.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(F,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-base text-slate-600 dark:text-slate-400 mb-1",children:"No sessions yet"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500",children:"Session history will appear here once agents start handling calls"})]}):h.map(s=>{var b,N;const n=x=>{if(!x)return"0s";const q=Math.floor(x/60),t=Math.floor(x%60);return q>0?`${q}m ${t}s`:`${t}s`},d=x=>x?new Date(x).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"N/A",u=x=>x?new Date(x).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"2-digit"}):"N/A";return e.jsx("div",{className:"group p-4 bg-white dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700 hover:border-blue-300 dark:hover:border-blue-600 hover:shadow-lg transition-all duration-200",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-3",children:e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center",children:e.jsx(K,{className:"w-4 h-4 text-blue-500 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Session ID"}),e.jsx("span",{className:"text-sm font-mono font-semibold text-blue-600 dark:text-blue-400",children:s.session_id||"N/A"})]})]}),e.jsxs("button",{onClick:()=>V(s),className:"flex items-center gap-1.5 px-3 py-1.5 bg-slate-100 dark:bg-slate-700 hover:bg-blue-50 dark:hover:bg-blue-900/20 text-slate-600 dark:text-slate-300 hover:text-blue-600 dark:hover:text-blue-400 rounded-lg transition-all duration-200 text-xs font-medium",children:[e.jsx(Ce,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:"View Details"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-900/30 px-3 py-1.5 rounded-lg",children:[((b=s.agent)==null?void 0:b.name)&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-medium",children:s.agent.name}),e.jsx("span",{children:"â€¢"})]}),e.jsx(ie,{className:"w-3 h-3"}),e.jsx("span",{children:s.user_ip||"Unknown IP"})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:e.jsx("span",{className:"px-2.5 py-1 bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400 rounded-full text-xs font-medium border border-green-200 dark:border-green-800",children:s.status||"Completed"})}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/30 p-2.5 rounded-lg",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Duration"}),e.jsx("p",{className:"text-sm text-slate-800 dark:text-white font-semibold",children:n(s.duration_seconds)})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/30 p-2.5 rounded-lg",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Time"}),e.jsx("p",{className:"text-sm text-slate-800 dark:text-white font-semibold",children:d(s.start_time)})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/30 p-2.5 rounded-lg",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Date"}),e.jsx("p",{className:"text-sm text-slate-800 dark:text-white font-semibold",children:u(s.start_time)})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/30 p-2.5 rounded-lg",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Messages"}),e.jsx("p",{className:"text-sm text-slate-800 dark:text-white font-semibold",children:s.total_messages||0})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-slate-600 dark:text-slate-400 pt-2 border-t border-slate-200 dark:border-slate-700",children:[e.jsx(ie,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:((N=s.location)==null?void 0:N.city)||s.user_ip||"Unknown"})]})]})})},s.session_id||s.id)})}),!R&&!_&&H>1&&e.jsx(Ie,{currentPage:M,totalPages:H,totalItems:te,itemsPerPage:P,onPageChange:s=>z(p,s),className:"mt-6 pt-4 border-t border-slate-200 dark:border-slate-700"})]})}),O&&e.jsx(Fe,{session:O,onClose:()=>V(null)})]})};export{ct as default};
