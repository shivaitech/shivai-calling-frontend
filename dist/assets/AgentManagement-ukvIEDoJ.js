import{r as e,j as t,k as s,R as a,l,u as r,f as n,d as i,i as o,e as d,m as c,n as m}from"./index-6jNFQTrW.js";import{G as x}from"./GlassCard-Gx_AgK7M.js";import{S as h}from"./SearchableSelect-D18XnGNQ.js";import{S as u,M as g,F as p,P as b,a as f}from"./Pagination-BFax-IAl.js";import{S as v}from"./index-CjiCu6Xh.js";import{c as w}from"./createLucideIcon-CzZCKr5P.js";import{R as j}from"./refresh-cw-udYk8QHe.js";import{S as y}from"./save-DGlalePs.js";import{C as k}from"./chevron-left-yBCNrW8-.js";import{C as N}from"./chevron-right-jHAKk6au.js";import{C}from"./copy-vaQbXWHE.js";import{X as S}from"./x-DSaQH5UW.js";import{g as E,a as A,b as T,c as M}from"./aiEmployeeTemplates-DOz-_95b.js";import{i as L}from"./utils-Cr29uOvE.js";import{P}from"./plus-DbAQQOPt.js";import{S as I}from"./search-DF2mxqft.js";import{B as D}from"./bot-B9l-7Cvk.js";import{E as _}from"./eye-C61Jmmb1.js";import{S as R}from"./square-pen-D_Dxdewa.js";import{Z as B}from"./zap-BNMMok7A.js";import{P as U}from"./pause-DW2HjlJV.js";import{P as O}from"./play-BpfAFTsa.js";import{T as z}from"./trash-2-Co5LvEi-.js";import{B as $,A as F}from"./building-2-DnfUDoq2.js";import{C as H}from"./check-circle-CGryLMFB.js";import{F as G}from"./file-text-CuFXxtfK.js";import{U as W}from"./upload-BoX06G2o.js";import{L as K}from"./link-B1ln2r6u.js";import{S as q}from"./sparkles-NetKhjvL.js";import{A as V}from"./arrow-left-BhwH9f-z.js";import{G as J}from"./globe-B7-2Z-rY.js";import{M as Y}from"./message-square-DFh2zsUu.js";import{C as X}from"./clock-CiKsyhya.js";import{U as Q}from"./users-DpAUgSNk.js";import{S as Z}from"./settings-CiGuBphA.js";import{L as ee}from"./lightbulb-UEVEVEUF.js";import{D as te}from"./download-CUbf3N9d.js";import{P as se}from"./phone-CIRKwmB1.js";import{M as ae}from"./mic-piUeypq5.js";import"./chevron-down-CcCmHmok.js";import"./check-UVjWZUKy.js";const le=w("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),re=w("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]),ne=w("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),ie=w("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),oe=w("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),de=w("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),ce=w("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]),me=w("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),xe=w("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),he=w("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),ue=({agentId:a,agentName:l,isPublished:r=!1})=>{const[n,i]=e.useState("configure"),[o,d]=e.useState("mobile"),[c,m]=e.useState(!1),[h,p]=e.useState(!1),[b,f]=e.useState(null),[w,C]=e.useState(!1),[S,E]=e.useState(""),[A,T]=e.useState(0),M=e.useRef(null),L=e.useRef(null);e.useEffect(()=>{r||"install"!==n&&"advanced"!==n||i("preview")},[r,n]);const[P,I]=e.useState({theme:{primaryColor:"#4b5563",secondaryColor:"#6b7280",accentColor:"#374151",borderRadius:"16px",buttonStyle:"floating",widgetStyle:"modern"},ui:{position:"bottom-right",buttonSize:"medium",chatHeight:"320px",chatWidth:"380px",autoOpen:!1,minimizeButton:!0,draggable:!0},content:{welcomeMessage:`Hi! I'm ${l}. How can I help you today?`,companyName:l,companyDescription:"AI-Powered Support - We offer 24/7 voice support to handle your business calls effieciently and professionally.",companyLogo:"",placeholderText:"Type your message...",offlineMessage:"We're currently offline. Please leave a message."},features:{voiceEnabled:!0,soundEffects:!0,showBranding:!0,messageHistory:!0,typingIndicator:!0,fileUpload:!1},customCSS:""});e.useEffect(()=>{b||(E(""),I(e=>({...e,content:{...e.content,welcomeMessage:`Hi! I'm ${l}. How can I help you today?`,companyName:l,companyLogo:""}})))},[l,b]),e.useEffect(()=>((async()=>{var e;p(!0),E("");try{const t=await fetch(`https://nodejs.service.callshivai.com/api/v1/agents/${a}`);if(t.ok){const s=await t.json(),a=null==(e=null==s?void 0:s.data)?void 0:e.agent;if(null==a?void 0:a.widget){const e=a.widget,t={theme:{primaryColor:e.primary_color||"#4b5563",secondaryColor:e.gradient_start||"#6b7280",accentColor:e.gradient_end||"#374151",borderRadius:"16px",buttonStyle:"floating",widgetStyle:"modern"},ui:{position:e.position||"bottom-right",buttonSize:"medium",chatHeight:"320px",chatWidth:"380px",autoOpen:!1,minimizeButton:!0,draggable:!0},content:{welcomeMessage:e.welcome_message||`Hi! I'm ${l}. How can I help you today?`,companyName:e.ai_employee_name||l,companyDescription:e.ai_employee_description||"AI-Powered Support - We offer 24/7 voice support to handle your business calls effieciently and professionally.",companyLogo:e.company_logo||"",placeholderText:"Type your message...",offlineMessage:"We're currently offline. Please leave a message."},features:{voiceEnabled:!0,soundEffects:!0,showBranding:!0,messageHistory:!0,typingIndicator:!0,fileUpload:!1},customCSS:""};if(I(t),e.company_logo){E(e.company_logo);const t=new Image;t.onload=()=>{},t.onerror=e=>{},t.src=e.company_logo}else E("");f(new Date(e.updatedAt||e.createdAt||Date.now()))}else E(""),I(e=>({...e,content:{...e.content,companyLogo:"",companyName:l,companyDescription:"AI-Powered Support - We offer 24/7 voice support to handle your business calls effieciently and professionally.",welcomeMessage:`Hi! I'm ${l}. How can I help you today?`}}))}}catch(t){}finally{p(!1)}})(),()=>{L.current&&clearTimeout(L.current)}),[a,l]);const D=(e,t="info")=>{const s=document.createElement("div");s.className=`fixed top-4 right-4 ${{success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500"}[t]} text-white px-4 py-3 rounded-lg shadow-lg z-50 transition-all transform translate-x-0 opacity-100 max-w-md`,s.innerHTML=`\n      <div class="flex items-start gap-3">\n        <span class="text-lg">${{success:"‚úÖ",error:"‚ùå",info:"‚ÑπÔ∏è"}[t]}</span>\n        <div class="flex-1">\n          <div class="font-medium text-sm leading-tight">${e}</div>\n        </div>\n        <button onclick="this.parentElement.parentElement.remove()" class="ml-2 text-white/80 hover:text-white text-lg leading-none">&times;</button>\n      </div>\n    `,document.body.appendChild(s);setTimeout(()=>{s.parentElement&&(s.style.opacity="0",s.style.transform="translateX(100%)",setTimeout(()=>{s.remove()},300))},"error"===t?5e3:3e3)},_=(e,t,s)=>{const l={...P,[e]:{...P[e],[t]:s}};I(l),C(!0);const r=new CustomEvent("widgetConfigUpdated",{detail:{agentId:a,config:l}});window.dispatchEvent(r),L.current&&clearTimeout(L.current),L.current=window.setTimeout(()=>{T(e=>e+1)},500)};return t.jsx(x,{children:t.jsxs("div",{className:"p-4 sm:p-6",children:[h&&t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Loading widget configuration..."})]}),!h&&t.jsxs(t.Fragment,{children:[t.jsxs("h3",{className:"text-lg sm:text-xl font-semibold text-slate-800 dark:text-white mb-4 flex items-center gap-3",children:[t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[t.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 bg-slate-50 dark:bg-slate-800 rounded-lg flex items-center justify-center",children:t.jsx(he,{className:"w-3 h-3 text-slate-600 dark:text-slate-400"})}),t.jsx("h3",{className:"text-xs sm:text-sm font-semibold text-slate-800 dark:text-white",children:"Widget Customization"})]}),w&&t.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400 px-2 py-1 rounded-full",children:"Unsaved changes"}),b&&t.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Last saved: ",b.toLocaleTimeString()]})]}),t.jsxs("div",{className:"flex gap-2 mb-6 border-b border-slate-200 dark:border-slate-700",children:[t.jsx("button",{onClick:()=>i("configure"),className:"px-4 py-2 text-sm font-medium transition-colors "+("configure"===n?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"),children:"Configure"}),t.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[t.jsx("button",{onClick:()=>T(e=>e+1),disabled:"preview"!==n,className:"p-2 text-slate-600 hover:text-slate-800 dark:text-slate-400 dark:hover:text-slate-200 disabled:opacity-50 transition-colors",title:"Refresh Preview",children:t.jsx(j,{className:"w-4 h-4"})}),t.jsx("button",{onClick:async()=>{var e,t,l;m(!0);try{let r=P.content.companyLogo;if(r&&r.startsWith("data:image")){const a=await fetch(r),n=await a.blob(),i=new File([n],"logo.png",{type:n.type}),o=await s.uploadLogo(i);(null==o?void 0:o.logo_url)?r=o.logo_url:(null==(e=null==o?void 0:o.data)?void 0:e.logo_url)?r=o.data.logo_url:(null==(l=null==(t=null==o?void 0:o.data)?void 0:t.data)?void 0:l.logo_url)&&(r=o.data.data.logo_url)}const n={agent_id:a,company_logo:r,ai_employee_name:P.content.companyName,ai_employee_description:P.content.companyDescription,theme:"shivai-blue",position:P.ui.position,button_text:"Call ShivAI!",welcome_message:P.content.welcomeMessage,primary_color:P.theme.primaryColor,gradient_start:P.theme.primaryColor,gradient_end:P.theme.accentColor};await s.saveWidgetConfig(n);I(e=>({...e,content:{...e.content,companyLogo:r}})),f(new Date),C(!1),T(e=>e+1);const i=new CustomEvent("widgetConfigUpdated",{detail:{agentId:a,config:P}});window.dispatchEvent(i),D("Widget configuration saved successfully!","success")}catch(r){const e=r instanceof Error?r.message:"Unknown error occurred";D(`Failed to save widget configuration: ${e}`,"error"),alert("Failed to save widget configuration. Please check the console for details and try again.")}finally{m(!1)}},disabled:c||!w,className:"common-button-bg text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",title:c?"Saving widget configuration...":"Save all changes to backend",children:c?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Uploading & Saving..."]}):t.jsxs(t.Fragment,{children:[t.jsx(y,{className:"w-4 h-4"}),"Save Changes"]})})]})]}),"configure"===n&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Company Branding"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-400 mb-2",children:["Company Logo ",t.jsx("span",{className:"text-slate-400",children:"(Max: 200KB)"})]}),t.jsxs("div",{className:"relative group w-32 h-32",children:[t.jsx("input",{type:"file",id:"logo-upload",accept:"image/*",onChange:e=>{var t;const s=null==(t=e.target.files)?void 0:t[0];if(!s)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(s.type))return D("Please select a valid image file (JPG, PNG, GIF, or WebP)","error"),void(e.target.value="");if(s.size>204800){const t=Math.round(s.size/1024);return D(`Logo file size (${t}KB) exceeds the maximum limit of 200KB. Please choose a smaller image.`,"error"),void(e.target.value="")}if(s.name.length>100)return D("Logo file name is too long. Please rename the file and try again.","error"),void(e.target.value="");const a=new FileReader;a.onloadend=()=>{const e=a.result;E(e),_("content","companyLogo",e);const t=Math.round(s.size/1024);D(`Logo uploaded successfully (${t}KB)`,"success")},a.onerror=()=>{D("Error reading the logo file. Please try again.","error"),e.target.value=""},a.readAsDataURL(s)},className:"hidden"}),t.jsx("div",{className:"relative w-full h-full bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-800 dark:to-slate-700 rounded-xl border-2 border-dashed border-slate-300 dark:border-slate-600 overflow-hidden",children:S?t.jsxs(t.Fragment,{children:[void 0,t.jsx("label",{htmlFor:"logo-upload",className:"cursor-pointer block w-full h-full",children:t.jsx("img",{src:S,alt:"Company Logo",className:"w-full h-full object-contain p-3",onLoad:()=>{},onError:e=>{E("")},crossOrigin:"anonymous"})}),t.jsx("button",{onClick:e=>{e.stopPropagation(),E(""),_("content","companyLogo","")},className:"absolute top-2 left-2 p-1.5 bg-red-500 hover:bg-red-600 text-white rounded-full shadow-lg transition-all duration-200 hover:scale-110 z-10",title:"Remove logo",children:t.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})})]}):t.jsxs(t.Fragment,{children:[void 0,t.jsxs("label",{htmlFor:"logo-upload",className:"absolute inset-0 flex flex-col items-center justify-center cursor-pointer hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:[t.jsx("svg",{className:"w-10 h-10 text-slate-400 dark:text-slate-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 font-medium",children:"Upload"})]})]})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-slate-600 dark:text-slate-400 mb-2",children:"AI Employee Name *"}),t.jsx("input",{type:"text",value:P.content.companyName,onChange:e=>_("content","companyName",e.target.value),placeholder:"Enter your company name",className:"common-bg-icons w-full px-3 py-2 rounded-lg text-sm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-slate-600 dark:text-slate-400 mb-2",children:"AI Employee Description"}),t.jsx("textarea",{value:P.content.companyDescription,onChange:e=>_("content","companyDescription",e.target.value),placeholder:"AI-Powered Support - We offer 24/7 voice support to handle your business calls...",rows:3,className:"common-bg-icons w-full px-3 py-2 rounded-lg text-sm resize-none"})]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Theme & Colors"}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-slate-600 dark:text-slate-400 mb-3",children:"Choose a Gradient Theme"}),t.jsx("div",{className:"theme-slider-container",children:t.jsx(v,{dots:!1,infinite:!1,speed:300,slidesToShow:4,slidesToScroll:1,arrows:!0,prevArrow:t.jsx("button",{className:"slick-arrow slick-prev","aria-label":"Previous",children:t.jsx(k,{className:"w-4 h-4"})}),nextArrow:t.jsx("button",{className:"slick-arrow slick-next","aria-label":"Next",children:t.jsx(N,{className:"w-4 h-4"})}),responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:640,settings:{slidesToShow:2,slidesToScroll:1}}],children:[{id:"original",name:"Original Default",primaryColor:"#4b5563",secondaryColor:"#6b7280",accentColor:"#374151",gradient:"linear-gradient(135deg, #4b5563 0%, #6b7280 30%, #374151 70%, #1f2937 100%)"},{id:"default",name:"ShivAI Blue",primaryColor:"#3b82f6",secondaryColor:"#1e40af",accentColor:"#2563eb",gradient:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)"},{id:"ocean",name:"Ocean Breeze",primaryColor:"#0ea5e9",secondaryColor:"#0284c7",accentColor:"#0369a1",gradient:"linear-gradient(135deg, #0ea5e9 0%, #0369a1 100%)"},{id:"sunset",name:"Sunset Glow",primaryColor:"#f97316",secondaryColor:"#ea580c",accentColor:"#dc2626",gradient:"linear-gradient(135deg, #f97316 0%, #dc2626 100%)"},{id:"forest",name:"Forest Green",primaryColor:"#22c55e",secondaryColor:"#16a34a",accentColor:"#15803d",gradient:"linear-gradient(135deg, #22c55e 0%, #15803d 100%)"},{id:"purple",name:"Purple Dream",primaryColor:"#a855f7",secondaryColor:"#9333ea",accentColor:"#7c3aed",gradient:"linear-gradient(135deg, #a855f7 0%, #7c3aed 100%)"},{id:"teal",name:"Teal Wave",primaryColor:"#14b8a6",secondaryColor:"#0d9488",accentColor:"#0f766e",gradient:"linear-gradient(135deg, #14b8a6 0%, #0f766e 100%)"},{id:"rose",name:"Rose Garden",primaryColor:"#f43f5e",secondaryColor:"#e11d48",accentColor:"#be123c",gradient:"linear-gradient(135deg, #f43f5e 0%, #be123c 100%)"},{id:"gradient1",name:"Cosmic Fusion",primaryColor:"#6366f1",secondaryColor:"#8b5cf6",accentColor:"#a855f7",gradient:"linear-gradient(135deg, #6366f1 0%, #a855f7 100%)"},{id:"gradient2",name:"Warm Citrus",primaryColor:"#fbbf24",secondaryColor:"#f59e0b",accentColor:"#d97706",gradient:"linear-gradient(135deg, #fbbf24 0%, #d97706 100%)"},{id:"gradient3",name:"Cool Mint",primaryColor:"#34d399",secondaryColor:"#10b981",accentColor:"#059669",gradient:"linear-gradient(135deg, #34d399 0%, #059669 100%)"}].map(e=>{const s=P.theme.primaryColor===e.primaryColor&&P.theme.accentColor===e.accentColor;return t.jsx("div",{className:"px-1",children:t.jsxs("button",{onClick:()=>(e=>{const t={...P,theme:{...P.theme,primaryColor:e.primaryColor,secondaryColor:e.secondaryColor,accentColor:e.accentColor}};I(t),C(!0);const s=new CustomEvent("widgetConfigUpdated",{detail:{agentId:a,config:t}});window.dispatchEvent(s),setTimeout(()=>{T(e=>e+1)},50)})(e),className:"relative group w-full h-14 lg:h-16 rounded-lg border-2 transition-all duration-200 "+(s?"border-blue-500 ring-2 ring-blue-200 dark:ring-blue-800":"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600"),style:{background:e.gradient},title:e.name,children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent rounded-md"}),t.jsxs("div",{className:"relative h-full flex flex-col items-center justify-center text-white",children:[t.jsx("div",{className:"text-[10px] lg:text-xs font-medium opacity-90 px-1 text-center leading-tight",children:e.name}),s&&t.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 lg:w-5 lg:h-5 bg-blue-500 rounded-full flex items-center justify-center border border-white",children:t.jsx("svg",{className:"w-2.5 h-2.5 lg:w-3 lg:h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})]})},e.id)})})}),t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-3",children:"Select a preset theme or customize individual colors below"})]})})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Live Preview"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>d("mobile"),className:"p-2 rounded-lg transition-colors "+("mobile"===o?"common-button-bg text-white":"common-bg-icons text-slate-600 dark:text-slate-400"),children:t.jsx(u,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>d("desktop"),className:"p-2 rounded-lg transition-colors "+("desktop"===o?"common-button-bg text-white":"common-bg-icons text-slate-600 dark:text-slate-400"),children:t.jsx(g,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>T(e=>e+1),className:"p-2 rounded-lg common-bg-icons text-slate-600 dark:text-slate-400 hover:opacity-90 transition-opacity",title:"Refresh Preview",children:t.jsx(j,{className:"w-4 h-4"})})]})]}),t.jsx("div",{className:"relative bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-800 dark:to-slate-900 rounded-xl overflow-hidden "+("mobile"===o?"h-[600px]":"h-[500px]"),children:t.jsx("iframe",{ref:M,srcDoc:`<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Widget Preview</title>\n    <style>\n        body {\n            margin: 0;\n            padding: 20px;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n            background: linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 100%);\n            min-height: 100vh;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            overflow: hidden;\n        }\n        .demo-content {\n            text-align: center;\n            max-width: 600px;\n            width: 100%;\n            padding: 2rem;\n            background: white;\n            border-radius: 16px;\n            box-shadow: 0 10px 25px rgba(0,0,0,0.1);\n        }\n        .company-header {\n            margin-bottom: 2rem;\n        }\n        .company-logo {\n            width: 80px;\n            height: 80px;\n            border-radius: 16px;\n            margin: 0 auto 1rem;\n            display: block;\n            object-fit: cover;\n            box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n        }\n        .company-name {\n            font-size: 2rem;\n            font-weight: 700;\n            color: #1f2937;\n            margin-bottom: 0.5rem;\n        }\n        .company-description {\n           y font-size: 1.1rem;\n            color: #6b7280;\n            line-height: 1.6;\n            margin-bottom: 2rem;\n        }\n        .demo-text {\n            color: #4b5563;\n            font-size: 1rem;\n            margin-bottom: 1rem;\n        }\n        .device-badge {\n            display: inline-block;\n            background: linear-gradient(135deg, #3b82f6, #8b5cf6);\n            color: white;\n            padding: 0.5rem 1rem;\n            border-radius: 20px;\n            font-size: 0.875rem;\n            font-weight: 600;\n            margin-bottom: 1rem;\n        }\n        @media (max-width: 768px) {\n            body { padding: 10px; }\n            .demo-content { padding: 1.5rem; }\n            .company-name { font-size: 1.5rem; }\n            .company-description { font-size: 1rem; }\n        }\n    </style>\n</head>\n<body>\n    <div class="">\n      \n        \n      \n\n                        \n\n<div class="demo-text">\n  <strong> Test Your AI Employee Widget:</strong>\n</div>\n<div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 1.5rem; margin: 1rem 0; text-align: left;">\n  <div style="color: #374151; font-size: 0.9rem; line-height: 1.6;">\n    <p style="margin: 0 0 1rem 0; font-weight: 600; color: #1f2937;">\n      üìã How to test:\n    </p>\n    <ol style="margin: 0; padding-left: 1.5rem; color: #4b5563;">\n      <li style="margin-bottom: 0.75rem;">\n        <strong>Look for the call button</strong> - It should appear in the bottom-right corner\n      </li>\n      <li style="margin-bottom: 0.75rem;">\n        <strong>Click to open</strong> - Test the interface and your custom branding\n      </li>\n      <li style="margin-bottom: 0.75rem;">\n        <strong>Try voice features</strong> - Click the Start call button icon to test voice input of AI Employee\n      </li>\n      <li style="margin-bottom: 0;">\n        <strong>Check response and Other Features</strong> - Send messages, view Transcripts, and see how the AI responds\n      </li>\n    </ol>\n    <div style="margin-top: 1rem; padding: 0.75rem; background: #dbeafe; border-radius: 8px; border-left: 4px solid #3b82f6;">\n      <p style="margin: 0; font-size: 0.85rem; color: #1e40af;">\n        üí° <strong>Tip:</strong> Make changes in the customization panel and see them update in real-time!\n      </p>\n    </div>\n  </div>\n</div>\n    </div>\n\n    \x3c!-- Pass configuration to widget --\x3e\n    <script>\n        // Debug: Log agentId being passed to configure widget\n        console.log("üîç Setting configure widget agentId:", "${a}");\n        \n        window.ShivAI = window.ShivAI || {};\n        window.ShivAI.config = {\n            companyName: "${P.content.companyName}",\n            companyDescription: "${P.content.companyDescription}",\n            ${P.content.companyLogo?`companyLogo: "${P.content.companyLogo}",`:""}\n        };\n        \n        // Also set SHIVAI_CONFIG for agent ID\n        window.SHIVAI_CONFIG = {\n            agentId: "${a}",\n            theme: ${JSON.stringify(P.theme)},\n            ui: ${JSON.stringify(P.ui)},\n            content: ${JSON.stringify(P.content)},\n            features: ${JSON.stringify(P.features)}\n        };\n        \n        console.log("‚úÖ Configure widget SHIVAI_CONFIG set:", window.SHIVAI_CONFIG);\n        \n        // Refresh widget theme after config is set\n        setTimeout(() => {\n            if (window.ShivAIWidget && window.ShivAIWidget.refreshTheme) {\n                window.ShivAIWidget.refreshTheme();\n                console.log("üé® Theme refreshed in configure view");\n            }\n        }, 100);\n    <\/script>\n    \n    \x3c!-- Load the actual widget.js --\x3e\n    <script src="/widget.js?agentId=${a}&companyName=${encodeURIComponent(P.content.companyName)}&companyDescription=${encodeURIComponent(P.content.companyDescription)}&agentName=${encodeURIComponent(P.content.companyName)}&v=${Date.now()}"><\/script>\n</body>\n</html>`,className:"w-full h-full border-0",title:"Widget Preview",sandbox:"allow-scripts allow-same-origin"},`${A}-${JSON.stringify(P.content)}`)})]})]})]})]})})},ge=({currentAgent:s})=>{const[a,l]=e.useState({theme:{primaryColor:"#4b5563",secondaryColor:"#6b7280",accentColor:"#374151",borderRadius:"16px",buttonStyle:"floating",widgetStyle:"modern"},ui:{position:"bottom-right",buttonSize:"medium",chatHeight:"320px",chatWidth:"380px",autoOpen:!1,minimizeButton:!0,draggable:!0},content:{welcomeMessage:`Hi! I'm ${s.name}. How can I help you today?`,companyName:s.name,companyDescription:"AI-Powered Support - We offer 24/7 voice support to handle your business calls efficiently and professionally.",companyLogo:"",placeholderText:"Type your message...",offlineMessage:"We're currently offline. Please leave a message."},features:{voiceEnabled:!0,soundEffects:!0,showBranding:!0,messageHistory:!0,typingIndicator:!0,fileUpload:!1},customCSS:""});e.useEffect(()=>{(async()=>{try{const e=await fetch(`/api/agents/${s.id}/widget-config`);if(e.ok){const t=await e.json();l(t)}}catch(e){}})();const e=e=>{e.detail.agentId===s.id&&l(e.detail.config)};return window.addEventListener("widgetConfigUpdated",e),()=>{window.removeEventListener("widgetConfigUpdated",e)}},[s.id]);const r=`<script src="https://callshivai.com/widget2.js?agentId=${s.id}"><\/script>`;return t.jsx("div",{className:"mt-6 sm:mt-8",children:t.jsx(x,{children:t.jsxs("div",{className:"p-4 sm:p-6",children:[t.jsx("h3",{className:"text-base sm:text-lg font-semibold text-slate-800 dark:text-white mb-3 sm:mb-4",children:"Widget Integration Code"}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Copy and paste this script tag into your website's HTML. The widget will automatically load your saved customizations."}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Script Tag"}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[t.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),"Live Configuration"]})]}),t.jsxs("div",{className:"relative",children:[t.jsx("code",{className:"common-bg-icons block w-full p-3 rounded-lg text-xs sm:text-sm font-mono text-slate-800 dark:text-white overflow-x-auto whitespace-pre-wrap max-h-64 overflow-y-auto",children:r}),t.jsx("button",{onClick:()=>{navigator.clipboard.writeText(r)},className:"absolute top-2 right-2 p-2 common-bg-icons rounded-md hover:shadow-sm transition-all touch-manipulation min-h-[36px] min-w-[36px] bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm",title:"Copy embed code",children:t.jsx(C,{className:"w-4 h-4 text-slate-600 dark:text-slate-300"})})]}),t.jsxs("div",{className:"mt-4 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg",children:[t.jsx("h4",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"üìã Quick Installation:"}),t.jsxs("ol",{className:"text-xs text-slate-600 dark:text-slate-400 space-y-1 list-decimal list-inside",children:[t.jsx("li",{children:"Copy the script tag above"}),t.jsx("li",{children:"Paste it in your website's HTML, before the closing </body> tag"}),t.jsx("li",{children:"The widget will load automatically with all your custom settings"}),t.jsx("li",{children:"To update: copy new script when you change settings"})]})]})]})]})})})};var pe={},be={exports:{}};function fe(){}function ve(){}ve.resetWarningCache=fe;be.exports=function(){function e(e,t,s,a,l,r){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==r){var n=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw n.name="Invariant Violation",n}}function t(){return e}e.isRequired=e;var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ve,resetWarningCache:fe};return s.PropTypes=s,s}();var we=be.exports,je={L:1,M:0,Q:3,H:2},ye={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},ke=ye;function Ne(e){this.mode=ke.MODE_8BIT_BYTE,this.data=e}Ne.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var Ce=Ne,Se=je;function Ee(e,t){this.totalCount=e,this.dataCount=t}Ee.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],Ee.getRSBlocks=function(e,t){var s=Ee.getRsBlockTable(e,t);if(null==s)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var a=s.length/3,l=new Array,r=0;r<a;r++)for(var n=s[3*r+0],i=s[3*r+1],o=s[3*r+2],d=0;d<n;d++)l.push(new Ee(i,o));return l},Ee.getRsBlockTable=function(e,t){switch(t){case Se.L:return Ee.RS_BLOCK_TABLE[4*(e-1)+0];case Se.M:return Ee.RS_BLOCK_TABLE[4*(e-1)+1];case Se.Q:return Ee.RS_BLOCK_TABLE[4*(e-1)+2];case Se.H:return Ee.RS_BLOCK_TABLE[4*(e-1)+3];default:return}};var Ae=Ee;function Te(){this.buffer=new Array,this.length=0}Te.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var s=0;s<t;s++)this.putBit(1==(e>>>t-s-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};for(var Me=Te,Le={glog:function(e){if(e<1)throw new Error("glog("+e+")");return Le.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return Le.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},Pe=0;Pe<8;Pe++)Le.EXP_TABLE[Pe]=1<<Pe;for(Pe=8;Pe<256;Pe++)Le.EXP_TABLE[Pe]=Le.EXP_TABLE[Pe-4]^Le.EXP_TABLE[Pe-5]^Le.EXP_TABLE[Pe-6]^Le.EXP_TABLE[Pe-8];for(Pe=0;Pe<255;Pe++)Le.LOG_TABLE[Le.EXP_TABLE[Pe]]=Pe;var Ie=Le,De=Ie;function _e(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var s=0;s<e.length&&0==e[s];)s++;this.num=new Array(e.length-s+t);for(var a=0;a<e.length-s;a++)this.num[a]=e[a+s]}_e.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),s=0;s<this.getLength();s++)for(var a=0;a<e.getLength();a++)t[s+a]^=De.gexp(De.glog(this.get(s))+De.glog(e.get(a)));return new _e(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=De.glog(this.get(0))-De.glog(e.get(0)),s=new Array(this.getLength()),a=0;a<this.getLength();a++)s[a]=this.get(a);for(a=0;a<e.getLength();a++)s[a]^=De.gexp(De.glog(e.get(a))+t);return new _e(s,0).mod(e)}};var Re=ye,Be=_e,Ue=Ie,Oe=0,ze=1,$e=2,Fe=3,He=4,Ge=5,We=6,Ke=7,qe={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;qe.getBCHDigit(t)-qe.getBCHDigit(qe.G15)>=0;)t^=qe.G15<<qe.getBCHDigit(t)-qe.getBCHDigit(qe.G15);return(e<<10|t)^qe.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;qe.getBCHDigit(t)-qe.getBCHDigit(qe.G18)>=0;)t^=qe.G18<<qe.getBCHDigit(t)-qe.getBCHDigit(qe.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return qe.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,s){switch(e){case Oe:return(t+s)%2==0;case ze:return t%2==0;case $e:return s%3==0;case Fe:return(t+s)%3==0;case He:return(Math.floor(t/2)+Math.floor(s/3))%2==0;case Ge:return t*s%2+t*s%3==0;case We:return(t*s%2+t*s%3)%2==0;case Ke:return(t*s%3+(t+s)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new Be([1],0),s=0;s<e;s++)t=t.multiply(new Be([1,Ue.gexp(s)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case Re.MODE_NUMBER:return 10;case Re.MODE_ALPHA_NUM:return 9;case Re.MODE_8BIT_BYTE:case Re.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case Re.MODE_NUMBER:return 12;case Re.MODE_ALPHA_NUM:return 11;case Re.MODE_8BIT_BYTE:return 16;case Re.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case Re.MODE_NUMBER:return 14;case Re.MODE_ALPHA_NUM:return 13;case Re.MODE_8BIT_BYTE:return 16;case Re.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),s=0,a=0;a<t;a++)for(var l=0;l<t;l++){for(var r=0,n=e.isDark(a,l),i=-1;i<=1;i++)if(!(a+i<0||t<=a+i))for(var o=-1;o<=1;o++)l+o<0||t<=l+o||0==i&&0==o||n==e.isDark(a+i,l+o)&&r++;r>5&&(s+=3+r-5)}for(a=0;a<t-1;a++)for(l=0;l<t-1;l++){var d=0;e.isDark(a,l)&&d++,e.isDark(a+1,l)&&d++,e.isDark(a,l+1)&&d++,e.isDark(a+1,l+1)&&d++,0!=d&&4!=d||(s+=3)}for(a=0;a<t;a++)for(l=0;l<t-6;l++)e.isDark(a,l)&&!e.isDark(a,l+1)&&e.isDark(a,l+2)&&e.isDark(a,l+3)&&e.isDark(a,l+4)&&!e.isDark(a,l+5)&&e.isDark(a,l+6)&&(s+=40);for(l=0;l<t;l++)for(a=0;a<t-6;a++)e.isDark(a,l)&&!e.isDark(a+1,l)&&e.isDark(a+2,l)&&e.isDark(a+3,l)&&e.isDark(a+4,l)&&!e.isDark(a+5,l)&&e.isDark(a+6,l)&&(s+=40);var c=0;for(l=0;l<t;l++)for(a=0;a<t;a++)e.isDark(a,l)&&c++;return s+=10*(Math.abs(100*c/t/t-50)/5)}},Ve=Ce,Je=Ae,Ye=Me,Xe=qe,Qe=_e;function Ze(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var et=Ze.prototype;et.addData=function(e){var t=new Ve(e);this.dataList.push(t),this.dataCache=null},et.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},et.getModuleCount=function(){return this.moduleCount},et.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=Je.getRSBlocks(e,this.errorCorrectLevel),s=new Ye,a=0,l=0;l<t.length;l++)a+=t[l].dataCount;for(l=0;l<this.dataList.length;l++){var r=this.dataList[l];s.put(r.mode,4),s.put(r.getLength(),Xe.getLengthInBits(r.mode,e)),r.write(s)}if(s.getLengthInBits()<=8*a)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},et.makeImpl=function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var s=0;s<this.moduleCount;s++){this.modules[s]=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++)this.modules[s][a]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=Ze.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},et.setupPositionProbePattern=function(e,t){for(var s=-1;s<=7;s++)if(!(e+s<=-1||this.moduleCount<=e+s))for(var a=-1;a<=7;a++)t+a<=-1||this.moduleCount<=t+a||(this.modules[e+s][t+a]=0<=s&&s<=6&&(0==a||6==a)||0<=a&&a<=6&&(0==s||6==s)||2<=s&&s<=4&&2<=a&&a<=4)},et.getBestMaskPattern=function(){for(var e=0,t=0,s=0;s<8;s++){this.makeImpl(!0,s);var a=Xe.getLostPoint(this);(0==s||e>a)&&(e=a,t=s)}return t},et.createMovieClip=function(e,t,s){var a=e.createEmptyMovieClip(t,s);this.make();for(var l=0;l<this.modules.length;l++)for(var r=1*l,n=0;n<this.modules[l].length;n++){var i=1*n;this.modules[l][n]&&(a.beginFill(0,100),a.moveTo(i,r),a.lineTo(i+1,r),a.lineTo(i+1,r+1),a.lineTo(i,r+1),a.endFill())}return a},et.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},et.setupPositionAdjustPattern=function(){for(var e=Xe.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var s=0;s<e.length;s++){var a=e[t],l=e[s];if(null==this.modules[a][l])for(var r=-2;r<=2;r++)for(var n=-2;n<=2;n++)this.modules[a+r][l+n]=-2==r||2==r||-2==n||2==n||0==r&&0==n}},et.setupTypeNumber=function(e){for(var t=Xe.getBCHTypeNumber(this.typeNumber),s=0;s<18;s++){var a=!e&&1==(t>>s&1);this.modules[Math.floor(s/3)][s%3+this.moduleCount-8-3]=a}for(s=0;s<18;s++){a=!e&&1==(t>>s&1);this.modules[s%3+this.moduleCount-8-3][Math.floor(s/3)]=a}},et.setupTypeInfo=function(e,t){for(var s=this.errorCorrectLevel<<3|t,a=Xe.getBCHTypeInfo(s),l=0;l<15;l++){var r=!e&&1==(a>>l&1);l<6?this.modules[l][8]=r:l<8?this.modules[l+1][8]=r:this.modules[this.moduleCount-15+l][8]=r}for(l=0;l<15;l++){r=!e&&1==(a>>l&1);l<8?this.modules[8][this.moduleCount-l-1]=r:l<9?this.modules[8][15-l-1+1]=r:this.modules[8][15-l-1]=r}this.modules[this.moduleCount-8][8]=!e},et.mapData=function(e,t){for(var s=-1,a=this.moduleCount-1,l=7,r=0,n=this.moduleCount-1;n>0;n-=2)for(6==n&&n--;;){for(var i=0;i<2;i++)if(null==this.modules[a][n-i]){var o=!1;r<e.length&&(o=1==(e[r]>>>l&1)),Xe.getMask(t,a,n-i)&&(o=!o),this.modules[a][n-i]=o,-1==--l&&(r++,l=7)}if((a+=s)<0||this.moduleCount<=a){a-=s,s=-s;break}}},Ze.PAD0=236,Ze.PAD1=17,Ze.createData=function(e,t,s){for(var a=Je.getRSBlocks(e,t),l=new Ye,r=0;r<s.length;r++){var n=s[r];l.put(n.mode,4),l.put(n.getLength(),Xe.getLengthInBits(n.mode,e)),n.write(l)}var i=0;for(r=0;r<a.length;r++)i+=a[r].dataCount;if(l.getLengthInBits()>8*i)throw new Error("code length overflow. ("+l.getLengthInBits()+">"+8*i+")");for(l.getLengthInBits()+4<=8*i&&l.put(0,4);l.getLengthInBits()%8!=0;)l.putBit(!1);for(;!(l.getLengthInBits()>=8*i||(l.put(Ze.PAD0,8),l.getLengthInBits()>=8*i));)l.put(Ze.PAD1,8);return Ze.createBytes(l,a)},Ze.createBytes=function(e,t){for(var s=0,a=0,l=0,r=new Array(t.length),n=new Array(t.length),i=0;i<t.length;i++){var o=t[i].dataCount,d=t[i].totalCount-o;a=Math.max(a,o),l=Math.max(l,d),r[i]=new Array(o);for(var c=0;c<r[i].length;c++)r[i][c]=255&e.buffer[c+s];s+=o;var m=Xe.getErrorCorrectPolynomial(d),x=new Qe(r[i],m.getLength()-1).mod(m);n[i]=new Array(m.getLength()-1);for(c=0;c<n[i].length;c++){var h=c+x.getLength()-n[i].length;n[i][c]=h>=0?x.get(h):0}}var u=0;for(c=0;c<t.length;c++)u+=t[c].totalCount;var g=new Array(u),p=0;for(c=0;c<a;c++)for(i=0;i<t.length;i++)c<r[i].length&&(g[p++]=r[i][c]);for(c=0;c<l;c++)for(i=0;i<t.length;i++)c<n[i].length&&(g[p++]=n[i][c]);return g};var tt=Ze,st={};Object.defineProperty(st,"__esModule",{value:!0});var at=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},lt=it(we),rt=e,nt=it(rt);function it(e){return e&&e.__esModule?e:{default:e}}var ot={bgColor:lt.default.oneOfType([lt.default.object,lt.default.string]).isRequired,bgD:lt.default.string.isRequired,fgColor:lt.default.oneOfType([lt.default.object,lt.default.string]).isRequired,fgD:lt.default.string.isRequired,size:lt.default.number.isRequired,title:lt.default.string,viewBoxSize:lt.default.number.isRequired,xmlns:lt.default.string},dt=(0,rt.forwardRef)(function(e,t){var s=e.bgColor,a=e.bgD,l=e.fgD,r=e.fgColor,n=e.size,i=e.title,o=e.viewBoxSize,d=e.xmlns,c=void 0===d?"http://www.w3.org/2000/svg":d,m=function(e,t){var s={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=e[a]);return s}(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return nt.default.createElement("svg",at({},m,{height:n,ref:t,viewBox:"0 0 "+o+" "+o,width:n,xmlns:c}),i?nt.default.createElement("title",null,i):null,nt.default.createElement("path",{d:a,fill:s}),nt.default.createElement("path",{d:l,fill:r}))});dt.displayName="QRCodeSvg",dt.propTypes=ot,st.default=dt,Object.defineProperty(pe,"__esModule",{value:!0}),pe.QRCode=void 0;var ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},mt=bt(we),xt=bt(je),ht=bt(tt),ut=e,gt=bt(ut),pt=bt(st);function bt(e){return e&&e.__esModule?e:{default:e}}var ft={bgColor:mt.default.oneOfType([mt.default.object,mt.default.string]),fgColor:mt.default.oneOfType([mt.default.object,mt.default.string]),level:mt.default.string,size:mt.default.number,value:mt.default.string.isRequired},vt=(0,ut.forwardRef)(function(e,t){var s=e.bgColor,a=void 0===s?"#FFFFFF":s,l=e.fgColor,r=void 0===l?"#000000":l,n=e.level,i=void 0===n?"L":n,o=e.size,d=void 0===o?256:o,c=e.value,m=function(e,t){var s={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=e[a]);return s}(e,["bgColor","fgColor","level","size","value"]),x=new ht.default(-1,xt.default[i]);x.addData(c),x.make();var h=x.modules;return gt.default.createElement(pt.default,ct({},m,{bgColor:a,bgD:h.map(function(e,t){return e.map(function(e,s){return e?"":"M "+s+" "+t+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:r,fgD:h.map(function(e,t){return e.map(function(e,s){return e?"M "+s+" "+t+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:d,viewBoxSize:h.length}))});pe.QRCode=vt,vt.displayName="QRCode",vt.propTypes=ft;var wt=pe.default=vt;const jt=({agent:e,onClose:s})=>{const l=`https://widget.callshivai.com/agent/${e.id}`,[r,n]=a.useState(180);a.useEffect(()=>{const e=()=>{window.innerWidth<640?n(140):window.innerWidth<1024?n(160):n(180)},t=e=>{"Escape"===e.key&&s()};return e(),window.addEventListener("resize",e),window.addEventListener("keydown",t),()=>{window.removeEventListener("resize",e),window.removeEventListener("keydown",t)}},[s]);return t.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-3 sm:p-4 -top-8",onClick:e=>{e.target===e.currentTarget&&s()},children:t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-lg sm:max-w-2xl lg:max-w-4xl max-h-[90vh] overflow-y-auto relative border border-slate-200 dark:border-slate-700",children:[t.jsx("button",{onClick:s,className:"absolute top-3 right-3 sm:top-4 sm:right-4 p-2 hover:bg-slate-100 dark:hover:bg-slate-700 bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm rounded-lg transition-colors z-50 cursor-pointer",children:t.jsx(S,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-500 dark:text-slate-400"})}),t.jsx("div",{className:"bg-gradient-to-r from-gray-400 via-gray-500 to-gray-600 px-4 sm:px-6 py-4 text-white relative overflow-hidden",children:t.jsx("div",{className:"relative z-10",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center",children:t.jsx(me,{className:"w-4 h-4 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg sm:text-xl font-bold",children:"Share Agent"}),t.jsx("p",{className:"text-white/80 text-sm",children:"Scan to start conversation"})]})]})})}),t.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-5 lg:gap-6 p-4 sm:p-6",children:[t.jsx("div",{className:"lg:col-span-2 flex justify-center mb-6 lg:mb-0",children:t.jsxs("div",{className:"bg-white rounded-xl p-4 sm:p-6 flex items-center justify-center shadow-lg border-2 border-slate-100 dark:border-slate-700 relative max-w-xs sm:max-w-none",children:[t.jsxs("div",{className:"relative bg-white p-3 sm:p-4 rounded-lg shadow-inner",children:[t.jsx("div",{className:"bg-white p-2 sm:p-3 rounded-lg border border-slate-100",children:t.jsx(wt,{id:"qr-code-svg",value:l,size:r,style:{height:"auto",maxWidth:"100%",width:"100%"},viewBox:"0 0 256 256",bgColor:"#ffffff",fgColor:"#000000",level:"M"})}),t.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg p-1.5 shadow-xl border-2 border-white",children:t.jsxs("div",{className:"w-4 h-4 sm:w-5 sm:h-5 bg-gradient-to-br from-gray-500 to-gray-600 rounded-md flex items-center justify-center shadow-md relative overflow-hidden",children:[t.jsx("span",{className:"text-white font-bold text-xs relative z-10",children:"AI"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent"})]})})]}),t.jsx("div",{className:"absolute top-2 left-2 w-3 h-3 border-l-2 border-t-2 border-gray-400 rounded-tl-md"}),t.jsx("div",{className:"absolute top-2 right-2 w-3 h-3 border-r-2 border-t-2 border-gray-400 rounded-tr-md"}),t.jsx("div",{className:"absolute bottom-2 left-2 w-3 h-3 border-l-2 border-b-2 border-gray-400 rounded-bl-md"}),t.jsx("div",{className:"absolute bottom-2 right-2 w-3 h-3 border-r-2 border-b-2 border-gray-400 rounded-br-md"})]})}),t.jsxs("div",{className:"lg:col-span-3 flex flex-col justify-between",children:[t.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-slate-900/50 dark:to-gray-800/20 rounded-xl p-4 sm:p-5 border border-slate-200 dark:border-slate-700 mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-gray-400 to-gray-500 rounded-lg flex items-center justify-center shadow-lg flex-shrink-0",children:t.jsx("span",{className:"text-white font-bold text-lg",children:e.name.charAt(0).toUpperCase()})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-base sm:text-lg truncate",children:e.name}),t.jsx("div",{className:"flex items-center gap-2 mt-1",children:t.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold "+("Published"===e.status?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"Training"===e.status?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300"),children:[t.jsx("div",{className:"w-2 h-2 rounded-full mr-1.5 "+("Published"===e.status?"bg-green-500":"Training"===e.status?"bg-yellow-500":"bg-slate-500")}),e.status]})})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-3 border border-slate-200 dark:border-slate-600",children:[t.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs font-medium mb-1 uppercase tracking-wide",children:"Widget URL"}),t.jsx("p",{className:"font-mono text-xs sm:text-sm text-gray-600 dark:text-gray-400 break-all bg-gray-100 dark:bg-gray-800/20 px-2 py-1.5 rounded",children:l})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsxs("button",{onClick:()=>{const t=document.getElementById("qr-code-svg");if(!t)return;const s=document.createElement("canvas"),a=s.getContext("2d");if(!a)return;const l=(new XMLSerializer).serializeToString(t),r=window.URL||window.webkitURL||window,n=new Image,i=new Blob([l],{type:"image/svg+xml;charset=utf-8"}),o=r.createObjectURL(i);n.onload=()=>{s.width=512,s.height=512,a.fillStyle="#ffffff",a.fillRect(0,0,s.width,s.height),a.drawImage(n,0,0,s.width,s.height),r.revokeObjectURL(o);const t=document.createElement("a");t.download=`${e.name}-qr-code.png`,t.href=s.toDataURL(),t.click()},n.src=o},className:"group bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white font-semibold py-3 px-4 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-2 touch-manipulation",children:[t.jsx("div",{className:"w-4 h-4 transition-transform group-hover:scale-110",children:t.jsxs("svg",{fill:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z"}),t.jsx("polyline",{points:"14,2 14,8 20,8"}),t.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),t.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),t.jsx("polyline",{points:"10,9 9,9 8,9"})]})}),t.jsx("span",{className:"text-sm sm:text-base",children:"Download QR"})]}),t.jsxs("button",{id:"copy-url-btn",onClick:()=>{navigator.clipboard.writeText(l);const e=document.getElementById("copy-url-btn");if(e){const t=e.innerHTML;e.innerHTML='\n        <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>\n        </svg>\n        Copied!\n      ',setTimeout(()=>{e.innerHTML=t},2e3)}},className:"group bg-white hover:bg-slate-50 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 font-semibold py-3 px-4 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98] border-2 border-slate-200 dark:border-slate-600 flex items-center justify-center gap-2 touch-manipulation",children:[t.jsx("div",{className:"w-4 h-4 transition-transform group-hover:scale-110",children:t.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),t.jsx("span",{className:"text-sm sm:text-base",children:"Copy Link"})]})]}),t.jsx("div",{className:"mt-4 text-center",children:t.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xs sm:text-sm leading-relaxed",children:"Share this QR code or link to let users instantly chat with your AI agent"})})]})]})]})})};const yt=new class{constructor(){this.room=null,this.isConnected=!1,this.isConnecting=!1,this.callbacks=null,this.lastSentMessage=null,this.localAudioTrack=null,this.remoteAudioTrack=null}async loadLiveKitSDK(){return new Promise((e,t)=>{if(void 0!==window.LivekitClient)return void e();const s=document.createElement("script");s.src="https://unpkg.com/livekit-client@latest/dist/livekit-client.umd.js",s.onload=()=>{e()},s.onerror=()=>{t(new Error("Failed to load LiveKit client"))},document.head.appendChild(s)})}setCallbacks(e){this.callbacks=e}async connect(e,t="en-US"){var s,a,l,r;try{if(this.isConnecting||this.isConnected)return;if(this.isConnecting=!0,null==(s=this.callbacks)||s.onStatusUpdate("Loading LiveKit...","connecting"),void 0===window.LivekitClient&&(await this.loadLiveKitSDK(),void 0===window.LivekitClient))throw new Error("LiveKit not available after loading");if(null==(a=this.callbacks)||a.onStatusUpdate("Connecting...","connecting"),!this.isConnecting)return;const l=/Mobile|Android|iPhone/i.test(navigator.userAgent)?"mobile":"desktop",r=`call_${Date.now()}`,n=await fetch("https://python.service.callshivai.com/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agent_id:e,language:t,call_id:r,device:l,user_agent:navigator.userAgent})});if(!n.ok){const e=await n.text();throw new Error(`Failed to get LiveKit token: ${n.status} - ${e}`)}const i=await n.json();if(!this.isConnecting)return;window.pendingAudioElement&&(window.pendingAudioElement.play().catch(e=>{}),window.pendingAudioElement=null);const o={echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,suppressLocalAudioPlayback:!0,channelCount:1,sampleRate:48e3,sampleSize:16,volume:.5,latency:.1,facingMode:"user",deviceId:"default",googEchoCancellation:!0,googAutoGainControl:!0,googNoiseSuppression:!0,googHighpassFilter:!0,googAudioMirroring:!1,googBeamforming:!1,googArrayGeometry:!1,mozAutoGainControl:!0,mozNoiseSuppression:!0},d=window.LivekitClient,c={adaptiveStream:!0,dynacast:!0,audioCaptureDefaults:{...o,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,suppressLocalAudioPlayback:!0},reconnectPolicy:{nextRetryDelayInMs:()=>2e3},publishDefaults:{audioPreset:d.AudioPresets.speech,dtx:!0,red:!1,simulcast:!1},e2eeEnabled:!1,expWebAudioMix:!1};if(this.room=new d.Room(c),this.setupRoomEvents(d,o),await this.room.connect(i.url,i.token),!this.isConnecting)return void(this.room&&(this.room.disconnect(),this.room=null))}catch(n){this.isConnecting=!1,this.isConnected=!1;let e="Connection failed";n instanceof Error&&(n.message.includes("token")?e="Authentication failed":n.message.includes("timeout")?e="Connection timeout":n.message.includes("network")&&(e="Network error")),null==(l=this.callbacks)||l.onError(e),null==(r=this.callbacks)||r.onStatusUpdate(`‚ùå ${e}`,"disconnected")}}setupRoomEvents(e,t){if(this.room){this.room.on(e.RoomEvent.TrackSubscribed,(t,s,a)=>{if(t.kind===e.Track.Kind.Audio){const e=t.attach();if(e.volume=.4,e.preload="auto",e.autoplay=!0,e.setSinkId)try{e.setSinkId("default")}catch(l){}void 0!==e.webkitAudioDecodedByteCount&&(e.webkitPreservesPitch=!1),document.body.appendChild(e),e.play().catch(t=>{window.pendingAudioElement=e}),this.remoteAudioTrack=t}}),this.room.on(e.RoomEvent.ParticipantMetadataChanged,(e,t)=>{if(e)try{const t=JSON.parse(e);(t.transcript||t.text)&&this.addMessage(!1,t.transcript||t.text,"voice")}catch(s){}}),this.room.on(e.RoomEvent.RoomMetadataChanged,e=>{if(e)try{const t=JSON.parse(e);(t.transcript||t.text)&&this.addMessage(!1,t.transcript||t.text,"voice")}catch(t){}}),this.room.on(e.RoomEvent.Connected,async()=>{var e,t,s,a;this.isConnected=!0,this.isConnecting=!1,null==(e=this.callbacks)||e.onStatusUpdate("ü§ñ AI is Initializing...","connected");try{await this.room.localParticipant.setMicrophoneEnabled(!0,{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,suppressLocalAudioPlayback:!0,channelCount:1,sampleRate:48e3,sampleSize:16,volume:.5,latency:.1,facingMode:"user"})}catch(r){try{await this.room.localParticipant.setMicrophoneEnabled(!0)}catch(n){null==(t=this.callbacks)||t.onError("Failed to enable microphone. Please check your microphone permissions and try again.")}}if(window.AudioContext||window.webkitAudioContext){const e=new(window.AudioContext||window.webkitAudioContext);"suspended"===e.state&&e.resume().then(()=>{}).catch(e=>{})}null==(s=this.callbacks)||s.onStatusUpdate("‚úÖ Connected - Speak now!","connected");const l=Array.from(this.room.localParticipant.audioTrackPublications.values());l.length>0&&(this.localAudioTrack=l[0].track),null==(a=this.callbacks)||a.onConnected()}),this.room.on(e.RoomEvent.Disconnected,e=>{var t,s;this.isConnected=!1,null==(t=this.callbacks)||t.onDisconnected(e),null==(s=this.callbacks)||s.onStatusUpdate("‚ùå Disconnected","disconnected")}),this.room.on(e.RoomEvent.ConnectionStateChanged,t=>{var s,a;null==(s=this.callbacks)||s.onConnectionStateChange(t),t===e.ConnectionState.Disconnected&&(this.isConnected=!1,null==(a=this.callbacks)||a.onStatusUpdate("‚ùå Disconnected","disconnected"))}),this.room.on(e.RoomEvent.DataReceived,(e,t,s,a)=>{var l,r;try{const s=(new TextDecoder).decode(e);if(s&&s.trim().length>0){let e=s.trim(),a=!1;null==t||t.identity;if(["subscribed","connected","disconnected","enabled","disabled","true","false","null","undefined"].some(e=>s.toLowerCase()===e))return;try{const r=JSON.parse(s),n=["text","transcript","message","content","data","response","speech","voice","audio","words","result","output"];for(const t of n)if(r[t]&&"string"==typeof r[t]&&r[t].trim().length>0){e=r[t].trim(),a=!0;break}let i=!1;if(r.role?i=r.role.includes("user")||r.role.includes("human"):r.speaker?i=r.speaker.includes("user")||r.speaker.includes("human")||r.speaker.includes("You"):t&&(i=t.identity===(null==(l=this.room.localParticipant)?void 0:l.identity)),"transcript"===r.type&&r.text)return void("user"===r.role?"chat"!==r.type&&this.addMessage(!0,r.text,"voice"):"assistant"===r.role&&this.addMessage(!1,r.text,"voice"));if(a){const t=i;(!i||i&&"chat"!==r.type||i&&"typed"!==r.source)&&this.addMessage(t,e,"voice")}}catch(n){if(s.length>=2&&s.length<=1e3){const s=t&&t.identity===(null==(r=this.room.localParticipant)?void 0:r.identity);this.addMessage(s,e,"voice")}}}}catch(i){}});try{"function"==typeof this.room.registerTextStreamHandler&&(this.room.registerTextStreamHandler("lk.transcription",async(e,t)=>{var s,a,l,r;try{const n=e.info,i=(null==(s=n.attributes)||s["lk.transcription_final"],null==(a=n.attributes)||a["lk.transcribed_track_id"],null==(l=n.attributes)||l["lk.segment_id"],await e.readAll());if(i&&i.trim()){const e=t.identity===(null==(r=this.room.localParticipant)?void 0:r.identity);if(e&&this.lastSentMessage&&i.trim()===this.lastSentMessage.trim())return;this.addMessage(e,i,"voice")}}catch(n){}}),this.room.registerTextStreamHandler("lk.chat",async(e,t)=>{var s;try{const a=await e.readAll();!(t.identity===(null==(s=this.room.localParticipant)?void 0:s.identity))&&a&&a.trim()&&this.addMessage(!1,a,"chat")}catch(a){}}))}catch(s){}}}addMessage(e,t,s="voice"){if(!this.callbacks)return;const a={id:Date.now()+Math.random(),text:t.trim(),isUser:e,timestamp:new Date,source:s};this.callbacks.onMessage(a)}async sendMessage(e){var t;if(this.room&&this.isConnected&&e.trim())try{if("function"==typeof this.room.localParticipant.sendText)await this.room.localParticipant.sendText(e,{topic:"lk.chat"});else{const t={type:"chat",text:e,timestamp:Date.now(),source:"typed"},s=(new TextEncoder).encode(JSON.stringify(t));this.room.localParticipant.publishData(s,{reliable:!0})}this.addMessage(!0,e,"chat"),this.lastSentMessage=e}catch(s){null==(t=this.callbacks)||t.onError("Failed to send message")}}async disconnect(){if(this.room){this.isConnecting=!1,this.isConnected=!1;try{await this.room.disconnect()}catch(e){}this.room=null,this.localAudioTrack=null,this.remoteAudioTrack=null}}async toggleMute(){if(!this.room||!this.isConnected)return!1;try{const e=this.room.localParticipant.isMicrophoneEnabled;return await this.room.localParticipant.setMicrophoneEnabled(!e),!e}catch(e){return!1}}getStatus(){return{isConnected:this.isConnected,isConnecting:this.isConnecting}}},kt=()=>{var a;const{id:u}=l(),g=r(),v=n(),[w,j]=i(),{agents:y,currentAgent:he,setCurrentAgent:pe,publishAgentStatus:be,unpublishAgentStatus:fe,refreshAgents:ve,deleteAgent:we}=o(),{user:je}=d(),ye=L(null==je?void 0:je.email),ke=v.pathname.includes("/train"),Ne=u&&!ke,Ce=!u,[Se,Ee]=e.useState({name:"",gender:"Female",businessProcess:"",industry:"",persona:"Empathetic",language:"English (US)",voice:"Sarah - Professional",customInstructions:"",guardrailsLevel:"Medium",responseStyle:"Balanced",maxResponseLength:"Medium (150 words)",contextWindow:"Standard (8K tokens)",temperature:50}),[Ae,Te]=e.useState(""),[Me,Le]=e.useState("newest"),[Pe,Ie]=e.useState("all"),[De,_e]=e.useState(!1),[Re,Be]=e.useState([]),[Ue,Oe]=e.useState(0),[ze,$e]=e.useState(0),[Fe,He]=e.useState(!1),Ge=parseInt(w.get("page")||"1",10),[We,Ke]=e.useState(!1),[qe,Ve]=e.useState(!1),[Je,Ye]=e.useState(!1),[Xe,Qe]=e.useState(null),[Ze,et]=e.useState(!1),[tt,st]=e.useState("call"),[at,lt]=e.useState(!1),[rt,nt]=e.useState(0),[it,ot]=e.useState(null),[dt,ct]=e.useState([{id:"1",text:`Hi! I'm ${(null==he?void 0:he.name)||"your AI assistant"}. How can I help you today?`,isUser:!1,timestamp:new Date}]),[mt,xt]=e.useState(""),ht=e.useRef(new Set),ut=e.useRef(0),[gt,pt]=e.useState(!1),[bt,ft]=e.useState(!1),[vt,wt]=e.useState(1),[kt,Nt]=e.useState(0),[Ct,St]=e.useState(0),[Et,At]=e.useState(0),[Tt,Mt]=e.useState({companyName:"",aiEmployeeName:"",businessProcess:"",industry:"",subIndustry:"",websiteUrls:[""],uploadedFiles:[],selectedTemplate:null}),[Lt,Pt]=e.useState(!1),[It,Dt]=e.useState(null),_t=[{value:"customer-support",label:"Customer Support",icon:"üéß"},{value:"sales-marketing",label:"Sales & Marketing",icon:"üíº"},{value:"appointment-setting",label:"Appointment Setting",icon:"üìÖ"},{value:"lead-qualification",label:"Lead Qualification",icon:"üéØ"},{value:"technical-support",label:"Technical Support",icon:"üîß"},{value:"order-processing",label:"Order Processing",icon:"üì¶"},{value:"billing-inquiries",label:"Billing Inquiries",icon:"üí≥"},{value:"onboarding",label:"Customer Onboarding",icon:"üöÄ"}],Rt=[{value:"real-estate",label:"Real Estate",icon:"üè†"},{value:"healthcare",label:"Healthcare",icon:"üè•"},{value:"dental",label:"Dental",icon:"ü¶∑"},{value:"fitness",label:"Fitness & Wellness",icon:"üí™"},{value:"education",label:"Education",icon:"üéì"},{value:"finance",label:"Finance & Banking",icon:"üè¶"},{value:"insurance",label:"Insurance",icon:"üõ°Ô∏è"},{value:"ecommerce",label:"E-commerce",icon:"üõí"},{value:"retail",label:"Retail",icon:"üè™"},{value:"technology",label:"Technology",icon:"üíª"},{value:"saas",label:"SaaS",icon:"‚òÅÔ∏è"},{value:"legal",label:"Legal Services",icon:"‚öñÔ∏è"},{value:"hospitality",label:"Hospitality",icon:"üè®"},{value:"restaurants",label:"Restaurants",icon:"üçΩÔ∏è"},{value:"automotive",label:"Automotive",icon:"üöó"},{value:"beauty",label:"Beauty & Salon",icon:"üíá"},{value:"home-services",label:"Home Services",icon:"üè†"},{value:"other",label:"Other",icon:"üìã"}],Bt={"real-estate":[{value:"residential",label:"Residential"},{value:"commercial",label:"Commercial"},{value:"property-management",label:"Property Management"}],healthcare:[{value:"hospitals",label:"Hospitals"},{value:"clinics",label:"Clinics"},{value:"mental-health",label:"Mental Health"},{value:"home-healthcare",label:"Home Healthcare"}],dental:[{value:"general-dentistry",label:"General Dentistry"},{value:"orthodontics",label:"Orthodontics"},{value:"cosmetic-dentistry",label:"Cosmetic Dentistry"}],fitness:[{value:"gyms",label:"Gyms & Fitness Centers"},{value:"yoga-studios",label:"Yoga Studios"},{value:"personal-training",label:"Personal Training"}],education:[{value:"k12",label:"K-12 Schools"},{value:"higher-education",label:"Higher Education"},{value:"online-learning",label:"Online Learning"}],finance:[{value:"banking",label:"Banking"},{value:"investment",label:"Investment Services"},{value:"wealth-management",label:"Wealth Management"}],insurance:[{value:"health-insurance",label:"Health Insurance"},{value:"life-insurance",label:"Life Insurance"},{value:"auto-insurance",label:"Auto Insurance"}],ecommerce:[{value:"fashion",label:"Fashion & Apparel"},{value:"electronics",label:"Electronics"},{value:"food-beverage",label:"Food & Beverage"}],retail:[{value:"grocery",label:"Grocery"},{value:"fashion-retail",label:"Fashion Retail"},{value:"electronics-retail",label:"Electronics Retail"}],technology:[{value:"software-development",label:"Software Development"},{value:"it-services",label:"IT Services"},{value:"cybersecurity",label:"Cybersecurity"}],saas:[{value:"crm",label:"CRM"},{value:"erp",label:"ERP"},{value:"marketing-automation",label:"Marketing Automation"}],legal:[{value:"corporate-law",label:"Corporate Law"},{value:"family-law",label:"Family Law"},{value:"immigration-law",label:"Immigration Law"}],hospitality:[{value:"hotels",label:"Hotels"},{value:"resorts",label:"Resorts"},{value:"event-venues",label:"Event Venues"}],restaurants:[{value:"fine-dining",label:"Fine Dining"},{value:"casual-dining",label:"Casual Dining"},{value:"fast-food",label:"Fast Food"}],automotive:[{value:"dealerships",label:"Dealerships"},{value:"auto-repair",label:"Auto Repair"},{value:"car-rental",label:"Car Rental"}],beauty:[{value:"hair-salons",label:"Hair Salons"},{value:"nail-salons",label:"Nail Salons"},{value:"med-spas",label:"Med Spas"}],"home-services":[{value:"plumbing",label:"Plumbing"},{value:"electrical",label:"Electrical"},{value:"hvac",label:"HVAC"},{value:"cleaning",label:"Cleaning Services"}],other:[{value:"general",label:"General"},{value:"custom",label:"Custom"}]},Ut=()=>{vt<6&&wt(vt+1)},Ot=()=>{vt>1&&wt(vt-1)},zt=()=>{ft(!1),wt(1),Nt(0),St(0),At(0),Mt({companyName:"",aiEmployeeName:"",businessProcess:"",industry:"",subIndustry:"",websiteUrls:[""],uploadedFiles:[],selectedTemplate:null})},$t=()=>{Mt(e=>({...e,websiteUrls:[...e.websiteUrls,""]}))},Ft=()=>{const e=new URLSearchParams;Tt.companyName&&e.set("company",Tt.companyName),Tt.aiEmployeeName&&e.set("agentName",Tt.aiEmployeeName),Tt.businessProcess&&e.set("process",Tt.businessProcess),Tt.industry&&e.set("industry",Tt.industry),Tt.subIndustry&&e.set("subIndustry",Tt.subIndustry),Tt.selectedTemplate&&e.set("template",Tt.selectedTemplate),Tt.websiteUrls.filter(e=>e.trim()).length>0&&e.set("urls",Tt.websiteUrls.filter(e=>e.trim()).join(",")),zt(),g(`/agents/create?${e.toString()}`)},Ht=()=>{switch(vt){case 1:return Tt.companyName.trim().length>0&&Tt.aiEmployeeName.trim().length>0;case 2:return Tt.businessProcess.length>0;case 3:return Tt.industry.length>0;case 4:case 5:case 6:return!0;default:return!1}},[Gt,Wt]=e.useState(new Set),[Kt,qt]=e.useState("disconnected"),[Vt,Jt]=e.useState("Ready to connect"),[Yt,Xt]=e.useState(!1),[Qt,Zt]=e.useState(!1),[es,ts]=e.useState(!1),[ss,as]=e.useState(null),[ls,rs]=e.useState([]),[ns,is]=e.useState(!1),[os,ds]=e.useState(null),[cs,ms]=e.useState(!1),[xs,hs]=e.useState("üìû Ready to start call");e.useEffect(()=>{const e={onMessage:e=>{ct(t=>[...t,{id:String(e.id),text:e.text,isUser:e.isUser,timestamp:e.timestamp,source:e.source}])},onConnected:()=>{lt(!0),qt("connected"),Jt("Connected - Speak now!"),pt(!1)},onDisconnected:()=>{lt(!1),qt("disconnected"),Jt("Disconnected"),pt(!1),it&&(clearInterval(it),ot(null)),nt(0)},onConnectionStateChange:e=>{},onError:e=>{qt("disconnected"),Jt(e),pt(!1),lt(!1)},onStatusUpdate:(e,t)=>{Jt(e),qt(t)}};return yt.setCallbacks(e),()=>{yt.disconnect(),it&&clearInterval(it)}},[it]),e.useEffect(()=>{bt&&document.activeElement instanceof HTMLElement&&document.activeElement.blur()},[bt]),e.useEffect(()=>{if(u){const e=y.find(e=>e.id===u);e&&(pe(e),Ee({name:e.name,gender:"Female",businessProcess:"",industry:"",persona:e.persona,language:e.language,voice:e.voice,customInstructions:"",guardrailsLevel:"Medium",responseStyle:"Balanced",maxResponseLength:"Medium (150 words)",contextWindow:"Standard (8K tokens)",temperature:50}),ct([{id:"1",text:`Hi! I'm ${e.name}. How can I help you today?`,isUser:!1,timestamp:new Date}]),us(e.id))}},[u,y,pe]),e.useEffect(()=>{var e;(null==(e=v.state)?void 0:e.refresh)&&(ve(),g(v.pathname,{replace:!0,state:{}}))},[null==(a=v.state)?void 0:a.refresh,ve,g,v.pathname]);const us=async e=>{is(!0),ds(null);try{const t=await s.getAgentSessions("",e),a=(null==t?void 0:t.sessions)||[];rs(a)}catch(t){ds(t instanceof Error?t.message:"Failed to load session history"),rs([])}finally{is(!1)}},gs=async e=>{try{Wt(t=>new Set(t).add(e)),await be(e),await ve()}catch(t){alert(t.message||"Failed to publish agent. Please try again.")}finally{Wt(t=>{const s=new Set(t);return s.delete(e),s})}},ps=async e=>{try{Wt(t=>new Set(t).add(e)),await fe(e),await ve()}catch(t){alert(t.message||"Failed to pause agent. Please try again.")}finally{Wt(t=>{const s=new Set(t);return s.delete(e),s})}},bs=async()=>{if(Xe){et(!0);try{await we(Xe),await ve(),Ye(!1),Qe(null),(null==he?void 0:he.id)===Xe&&g("/agents")}catch(e){alert(e.message||"Failed to delete agent. Please try again.")}finally{et(!1)}}},fs=()=>{Ye(!1),Qe(null)},vs=async()=>{if(!mt.trim()||gt)return;const e=mt.trim(),t=Date.now();if(t-ut.current<1e3)return;const s=`user-${e}-${Math.floor(t/1e3)}`;if(ht.current.has(s))xt("");else{ht.current.add(s),ut.current=t,setTimeout(()=>{ht.current.delete(s)},1e4),xt(""),pt(!0);try{const s={id:`user-chat-${t}-${Math.random()}`,text:e,isUser:!0,timestamp:new Date,source:"chat"};if(ct(e=>[...e,s]),ss&&"connected"===Kt){const t=window.LivekitClient,s=JSON.stringify({type:"chat",text:e,timestamp:(new Date).toISOString(),source:"typed"}),a=(new TextEncoder).encode(s);await ss.localParticipant.publishData(a,t.DataPacket_Kind.RELIABLE)}else setTimeout(()=>{const e=["I understand you're looking for help. Let me assist you with that based on my training and configuration.","Thank you for your message. As an AI Employee, I'm designed to help with various tasks in a professional manner.","I appreciate your question. Based on my role as your AI Employee, I'd be happy to provide assistance.","That's an interesting point. As your AI Employee, here's how I can help you.","I see what you're asking about. As an AI Employee, I'm here to provide helpful, accurate information."],t={id:`fallback-${Date.now()}-${Math.random()}`,text:e[Math.floor(Math.random()*e.length)],isUser:!1,timestamp:new Date,source:"chat"};ct(e=>[...e,t]),pt(!1)},1e3+2e3*Math.random())}catch(a){pt(!1)}}},ws=e.useCallback(async()=>{try{if(Zt(!0),hs("üé§ Requesting microphone access..."),qt("connecting"),Jt("Initializing call..."),!window.isSecureContext)throw new Error("HTTPS required for microphone access");try{(await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!1,channelCount:1,sampleRate:48e3,sampleSize:16}})).getTracks().forEach(e=>e.stop()),hs("‚úÖ Microphone access granted")}catch(e){const t=e instanceof Error?e.message:"Unknown error";throw new Error(`Microphone access denied: ${t}`)}const t=null==he?void 0:he.id;if(!t)throw new Error("Agent ID not found");hs("üîó Getting LiveKit token...");const s=`admin_test_${Date.now()}`,a=await fetch("https://python.service.callshivai.com/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agent_id:t,language:"en-US",call_id:s,device:"desktop",user_agent:navigator.userAgent})});if(!a.ok){const e=await a.text();throw new Error(`Failed to get LiveKit token: ${a.status} - ${e}`)}const l=await a.json();if(hs("üîó Connecting to LiveKit..."),void 0===window.LivekitClient){hs("üì¶ Loading LiveKit SDK...");const e=document.createElement("script");e.src="https://unpkg.com/livekit-client@latest/dist/livekit-client.umd.js",e.onload=()=>{js(l)},e.onerror=()=>{throw new Error("Failed to load LiveKit SDK")},document.head.appendChild(e)}else await js(l)}catch(t){hs(`‚ùå Error: ${t instanceof Error?t.message:"Unknown error"}`),qt("disconnected"),Jt("Connection failed"),Zt(!1),ts(!1)}},[he]),js=e.useCallback(async e=>{try{const t=window.LivekitClient,s=new t.Room({adaptiveStream:!0,dynacast:!0,audioCaptureDefaults:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,suppressLocalAudioPlayback:!0},publishDefaults:{audioPreset:t.AudioPresets.speech,dtx:!0,red:!1,simulcast:!1}});s.on(t.RoomEvent.TrackSubscribed,e=>{if(e.kind===t.Track.Kind.Audio){const t=e.attach();t.volume=.4,t.autoplay=!0,document.body.appendChild(t),t.play().catch(e=>{})}}),s.on(t.RoomEvent.DataReceived,(e,t)=>{var a,l;try{const n=(new TextDecoder).decode(e);if(!n||0===n.trim().length)return;if(["subscribed","connected","disconnected","enabled","disabled","true","false"].some(e=>n.toLowerCase()===e))return;try{const e=JSON.parse(n);let l="";const r=["text","transcript","message","content","response"];for(const t of r)if(e[t]&&"string"==typeof e[t]&&e[t].trim()){l=e[t].trim();break}if(l){const e=(null==t?void 0:t.identity)===(null==(a=s.localParticipant)?void 0:a.identity),r=`${e?"user":"ai"}-${l}-${Math.floor(Date.now()/2e3)}`;if(ht.current.has(r))return;ht.current.add(r),setTimeout(()=>ht.current.delete(r),5e3),ct(t=>[...t,{id:`${Date.now()}-${Math.random()}`,text:l,isUser:e,timestamp:new Date,source:"voice"}]),e||pt(!1)}}catch(r){if(n.length>=2&&n.length<=1e3){const e=(null==t?void 0:t.identity)===(null==(l=s.localParticipant)?void 0:l.identity),a=`${e?"user":"ai"}-${n.trim()}-${Math.floor(Date.now()/2e3)}`;if(ht.current.has(a))return;ht.current.add(a),setTimeout(()=>ht.current.delete(a),5e3),ct(t=>[...t,{id:`${Date.now()}-${Math.random()}`,text:n.trim(),isUser:e,timestamp:new Date,source:"voice"}]),e||pt(!1)}}}catch(n){}}),"function"==typeof s.registerTextStreamHandler&&(s.registerTextStreamHandler("lk.transcription",async(e,t)=>{var a;try{const l=await e.readAll();if(l&&l.trim()){const e=t.identity===(null==(a=s.localParticipant)?void 0:a.identity),r=`${e?"user":"ai"}-transcription-${l.trim()}-${Math.floor(Date.now()/2e3)}`;if(ht.current.has(r))return;ht.current.add(r),setTimeout(()=>ht.current.delete(r),5e3),ct(t=>[...t,{id:`transcription-${Date.now()}-${Math.random()}`,text:l.trim(),isUser:e,timestamp:new Date,source:"voice"}]),e||pt(!1)}}catch(l){}}),s.registerTextStreamHandler("lk.chat",async(e,t)=>{var a;try{const l=await e.readAll();if(!(t.identity===(null==(a=s.localParticipant)?void 0:a.identity))&&l&&l.trim()){const e=`ai-chat-${l.trim()}-${Math.floor(Date.now()/2e3)}`;if(ht.current.has(e))return;ht.current.add(e),setTimeout(()=>ht.current.delete(e),5e3),ct(e=>[...e,{id:`chat-${Date.now()}-${Math.random()}`,text:l.trim(),isUser:!1,timestamp:new Date,source:"chat"}]),pt(!1)}}catch(l){}})),s.on(t.RoomEvent.ParticipantMetadataChanged,(e,t)=>{var a;if(e)try{const l=JSON.parse(e);if(l.transcript||l.text){const e=(null==t?void 0:t.identity)===(null==(a=s.localParticipant)?void 0:a.identity);ct(t=>[...t,{id:`metadata-${Date.now()}`,text:l.transcript||l.text,isUser:e,timestamp:new Date,source:"voice"}]),e||pt(!1)}}catch(l){}}),s.on(t.RoomEvent.RoomMetadataChanged,e=>{if(e)try{const t=JSON.parse(e);(t.transcript||t.text)&&(ct(e=>[...e,{id:`room-metadata-${Date.now()}`,text:t.transcript||t.text,isUser:!1,timestamp:new Date,source:"voice"}]),pt(!1))}catch(t){}}),s.on(t.RoomEvent.Connected,async()=>{ts(!0),Zt(!1),lt(!0),qt("connected"),hs("üü¢ Connected! You can now speak with the agent."),Jt("‚úÖ Connected - Speak now!");const e=setInterval(()=>{nt(e=>e+1)},1e3);ot(e);try{await s.localParticipant.setMicrophoneEnabled(!0,{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}),ms(!0)}catch(t){}}),s.on(t.RoomEvent.Disconnected,()=>{ts(!1),Zt(!1),lt(!1),qt("disconnected"),hs("üî¥ Disconnected"),Jt("‚ùå Disconnected"),as(null),it&&(clearInterval(it),ot(null)),nt(0)}),await s.connect(e.url,e.token),as(s)}catch(t){hs(`‚ùå Connection failed: ${t instanceof Error?t.message:"Unknown error"}`),qt("disconnected"),Jt("Connection failed"),Zt(!1),ts(!1)}},[he,it]),ys=e.useCallback(async()=>{if(ss)try{await ss.disconnect()}catch(e){}ts(!1),Zt(!1),lt(!1),qt("disconnected"),hs("üìû Call ended"),Jt("Ready to connect"),as(null),ms(!1),it&&(clearInterval(it),ot(null)),nt(0),ct(e=>[...e,{id:`disconnect-${Date.now()}`,text:"Call ended",isUser:!1,timestamp:new Date,source:"system"}])},[ss,it]),ks=e.useCallback(async()=>{if(ss&&es)try{const e=!Yt;await ss.localParticipant.setMicrophoneEnabled(!e),Xt(e),ms(!e)}catch(e){}},[ss,es,Yt]),Ns=e.useCallback(async()=>{if(he)try{await navigator.mediaDevices.getUserMedia({audio:!0});const e=await fetch("https://python.service.callshivai.com/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agent_id:he.id,language:"en-US",call_id:`test_${Date.now()}`,device:"desktop",user_agent:navigator.userAgent})});if(e.ok){await e.json();alert("‚úÖ Connection test passed! Token server is working. Try starting the call again.")}else alert(`‚ùå Token server error: ${e.status}. The voice service may be temporarily unavailable.`)}catch(e){e instanceof Error&&"NotAllowedError"===e.name?alert("‚ùå Microphone permission denied. Please allow microphone access and try again."):e instanceof Error&&e.message.includes("fetch")?alert("‚ùå Cannot reach voice service. Please check your internet connection."):alert(`‚ùå Connection test failed: ${e instanceof Error?e.message:"Unknown error"}`)}else alert("No agent selected")},[he]),Cs=ws,Ss=ys,Es=ks,As=e=>{const t=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},[Ts,Ms]=e.useState(Ae);e.useEffect(()=>{const e=setTimeout(()=>{Ms(Ae)},300);return()=>clearTimeout(e)},[Ae]);const Ls=e.useCallback(async()=>{if(!ye)return Be([]),Oe(0),void $e(0);He(!0);try{const e=await s.getAgentsWithFilters({gender:Pe,sort:Me,search:Ts||void 0,page:Ge,limit:6});Be(e.agents),Oe(e.total),$e(e.totalPages)}catch(e){const t=y.filter(e=>{const t=e.name.toLowerCase().includes((Ts||"").toLowerCase()),s=(e.gender||"").toLowerCase(),a="all"===Pe||s===Pe.toLowerCase();return t&&a}).sort((e,t)=>{switch(Me){case"a-z":return e.name.localeCompare(t.name);case"z-a":return t.name.localeCompare(e.name);case"newest":return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime();case"oldest":return new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime();default:return 0}}),s=t.length,a=Math.ceil(s/6),l=6*(Ge-1),r=t.slice(l,l+6);Be(r),Oe(s),$e(a)}finally{He(!1)}},[ye,Pe,Me,Ts,Ge,y]);e.useEffect(()=>{Ls()},[Ls]);const Ps=Re,Is=e=>{j({page:e.toString()}),window.scrollTo({top:0,behavior:"smooth"})};return e.useEffect(()=>{Ge>1&&j({page:"1"})},[Ts,Pe,Me]),Ce?t.jsxs("div",{className:"space-y-4 lg:space-y-6 w-full max-w-full overflow-hidden",children:[t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[t.jsxs("div",{className:"grid grid-cols-3 gap-2 lg:gap-4 flex-1",children:[t.jsxs("div",{className:"bg-white/50 flex items-center justify-center gap-1.5 dark:bg-slate-800/50 rounded-lg px-2 lg:px-6 py-2 lg:py-2 text-center shadow-sm transition-all duration-200 hover:shadow-md",children:[t.jsx("p",{className:"text-base lg:text-2xl font-bold text-slate-800 dark:text-white",children:ye?y.length:0}),t.jsx("p",{className:"text-[10px] lg:text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total"})]}),t.jsxs("div",{className:"bg-white/50 flex items-center justify-center gap-1.5 dark:bg-slate-800/50 rounded-lg px-2 lg:px-6 py-2 lg:py-2 text-center shadow-sm transition-all duration-200 hover:shadow-md",children:[t.jsx("p",{className:"text-base lg:text-2xl font-bold text-green-600 dark:text-green-400",children:ye?y.filter(e=>"Published"===e.status||e.is_active).length:0}),t.jsx("p",{className:"text-[10px] lg:text-sm font-medium text-slate-600 dark:text-slate-400",children:"Live"})]}),t.jsxs("div",{className:"bg-white/50 flex items-center justify-center gap-1.5 dark:bg-slate-800/50 rounded-lg px-2 lg:px-6 py-2 lg:py-2 text-center shadow-sm transition-all duration-200 hover:shadow-md",children:[t.jsx("p",{className:"text-base lg:text-2xl font-bold text-orange-600 dark:text-orange-400",children:ye?y.filter(e=>"Published"!==e.status&&!e.is_active).length:0}),t.jsx("p",{className:"text-[10px] lg:text-sm font-medium text-slate-600 dark:text-slate-400",children:"Unpublished"})]})]}),t.jsxs("button",{onClick:()=>ye&&ft(!0),disabled:!ye,className:"relative overflow-hidden flex items-center justify-center gap-2 px-4 lg:px-6 py-2.5 lg:py-3 rounded-xl transition-all duration-200 shadow-sm whitespace-nowrap "+(ye?"common-button-bg transform hover:scale-[1.02] active:scale-[0.98] cursor-pointer":"bg-gray-400 dark:bg-gray-600 text-gray-200 dark:text-gray-300 cursor-not-allowed opacity-50"),children:[ye&&t.jsx("span",{"aria-hidden":"true",className:"absolute left-0 top-0 h-full w-full pointer-events-none z-0",children:t.jsx("span",{className:"block absolute left-[-60%] top-0 h-full w-1/2 bg-gradient-to-r from-transparent via-white/60 to-transparent opacity-70 blur-sm animate-shine"})}),t.jsx(P,{className:"w-4 h-4 lg:w-5 lg:h-5 z-10"}),t.jsx("span",{className:"text-sm lg:text-base font-medium z-10",children:"Create AI Employee"})]})]}),t.jsx(x,{children:t.jsxs("div",{className:"p-4 lg:p-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(I,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400 z-10"}),t.jsx("input",{type:"text",placeholder:"Search agents...",value:Ae,onChange:e=>Te(e.target.value),className:"w-full pl-10 pr-4 py-2.5 lg:py-3 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500/20 text-slate-800 dark:text-white text-sm transition-all duration-200"})]}),t.jsx("div",{className:"hidden lg:block min-w-[140px]",children:t.jsx(h,{options:[{value:"all",label:"All Gender"},{value:"male",label:"Male"},{value:"female",label:"Female"}],value:Pe,onChange:e=>Ie(e),placeholder:"Filter by gender..."})}),t.jsx("div",{className:"hidden lg:block min-w-[140px]",children:t.jsx(h,{options:[{value:"newest",label:"Newest"},{value:"oldest",label:"Oldest"},{value:"a-z",label:"A to Z"},{value:"z-a",label:"Z to A"}],value:Me,onChange:e=>Le(e),placeholder:"Sort by..."})}),t.jsxs("button",{onClick:()=>_e(!0),className:"lg:hidden flex items-center justify-center common-button-bg2 p-2.5 rounded-lg active:scale-95 relative",children:[t.jsx(p,{className:"w-4 h-4"}),("all"!==Pe||"newest"!==Me)&&t.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-blue-500 rounded-full"})]})]}),(Ae||"all"!==Pe||"newest"!==Me)&&t.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:[t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Active filters:"}),Ae&&t.jsxs("span",{className:"px-2 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-full text-xs flex items-center gap-1",children:['"',Ae,'"',t.jsx("button",{onClick:()=>Te(""),className:"hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full p-0.5",children:"‚úï"})]}),"all"!==Pe&&t.jsxs("span",{className:"px-2 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-full text-xs flex items-center gap-1",children:["Gender: ",Pe,t.jsx("button",{onClick:()=>Ie("all"),className:"hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full p-0.5",children:"‚úï"})]}),"newest"!==Me&&t.jsxs("span",{className:"px-2 py-1 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-full text-xs flex items-center gap-1",children:["Sort:"," ","a-z"===Me?"A to Z":"z-a"===Me?"Z to A":"oldest"===Me?"Oldest":Me,t.jsx("button",{onClick:()=>Le("newest"),className:"hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full p-0.5",children:"‚úï"})]}),t.jsx("button",{onClick:()=>{Te(""),Ie("all"),Le("newest")},className:"text-xs text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 underline",children:"Clear all"})]})]})}),Fe&&t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-3 sm:gap-4 lg:gap-6",children:[...Array(6)].map((e,s)=>t.jsx(x,{children:t.jsxs("div",{className:"p-4 sm:p-5 lg:p-6 animate-pulse",children:[t.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[t.jsx("div",{className:"w-10 sm:w-12 h-10 sm:h-12 bg-slate-200 dark:bg-slate-700 rounded-xl"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-3/4 mb-2"}),t.jsx("div",{className:"h-3 bg-slate-200 dark:bg-slate-700 rounded w-1/2"})]})]}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsx("div",{className:"h-3 bg-slate-200 dark:bg-slate-700 rounded w-full"}),t.jsx("div",{className:"h-3 bg-slate-200 dark:bg-slate-700 rounded w-2/3"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("div",{className:"h-8 bg-slate-200 dark:bg-slate-700 rounded flex-1"}),t.jsx("div",{className:"h-8 bg-slate-200 dark:bg-slate-700 rounded w-10"})]})]})},s))}),!Fe&&Ps.length>0&&t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-3 sm:gap-4 lg:gap-6",children:Ps.map(e=>t.jsx(x,{hover:!0,children:t.jsxs("div",{className:"p-4 sm:p-5 lg:p-6",children:[t.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[t.jsx("div",{className:"w-10 sm:w-12 h-10 sm:h-12 common-bg-icons rounded-xl flex items-center justify-center flex-shrink-0",children:t.jsx(D,{className:"w-5 sm:w-6 h-5 sm:h-6 text-slate-900 dark:text-slate-100"})}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("h3",{className:"font-semibold text-slate-800 dark:text-white text-sm sm:text-base truncate",children:e.name}),t.jsxs("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400 truncate",children:[e.language," ‚Ä¢ ",e.persona]})]}),t.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium flex-shrink-0 "+("Published"===e.status||e.is_active?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":"bg-orange-100 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400"),children:"Published"===e.status||e.is_active?"Live":"Unpublished"})]})})]}),t.jsxs("div",{className:"space-y-2 mb-4 sm:mb-5",children:[t.jsxs("div",{className:"flex items-center justify-start text-xs sm:text-sm",children:[t.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Voice:"}),t.jsx("span",{className:"text-slate-800 dark:text-white truncate ml-2 text-right",children:e.voice})]}),t.jsxs("div",{className:"flex items-center justify-start text-xs sm:text-sm",children:[t.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Created:"}),t.jsx("span",{className:"text-slate-800 dark:text-white ml-2",children:new Date(e.createdAt).toLocaleDateString()})]})]}),t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsxs("button",{onClick:()=>g(`/agents/${e.id}`),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-all duration-200 text-sm font-medium active:scale-[0.98]",children:[t.jsx(_,{className:"w-4 h-4"}),"View"]}),t.jsxs("button",{onClick:()=>g(`/agents/${e.id}/edit`),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-all duration-200 text-sm font-medium active:scale-[0.98]",children:[t.jsx(R,{className:"w-4 h-4"}),"Edit"]}),t.jsxs("button",{onClick:()=>g(`/agents/${e.id}/train`,{state:{from:"list"}}),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 rounded-lg hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-all duration-200 text-sm font-medium active:scale-[0.98]",children:[t.jsx(B,{className:"w-4 h-4"}),"Train"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:["Published"===e.status?t.jsxs("button",{onClick:()=>ps(e.id),disabled:Gt.has(e.id),className:"flex-1 flex items-center justify-center gap-1.5 common-button-bg2 transition-all duration-200 text-sm font-medium "+(Gt.has(e.id)?"opacity-50 cursor-not-allowed":"active:scale-[0.98]"),children:[Gt.has(e.id)?t.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin"}):t.jsx(U,{className:"w-4 h-4"}),Gt.has(e.id)?"Pausing...":"Pause"]}):t.jsxs("button",{onClick:()=>e.is_active?ps(e.id):gs(e.id),disabled:Gt.has(e.id),className:`flex-1 flex items-center justify-center gap-1.5 transition-all duration-200 text-sm font-medium ${Gt.has(e.id)?"opacity-50 cursor-not-allowed":"active:scale-[0.98]"} ${e.is_active?"common-button-bg2":"common-button-bg"}`,children:[Gt.has(e.id)?t.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin"}):e.is_active?t.jsx(U,{className:"w-4 h-4"}):t.jsx(O,{className:"w-4 h-4"}),Gt.has(e.id)?e.is_active?"Pausing...":"Publishing...":e.is_active?"Pause":"Publish"]}),t.jsx("button",{className:"p-2.5 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 active:scale-95",children:t.jsx(C,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>{return t=e.id,Qe(t),void Ye(!0);var t},className:"p-2.5 text-slate-400 hover:text-red-500 transition-colors rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 active:scale-95",title:"Delete agent",children:t.jsx(z,{className:"w-4 h-4"})})]})]})},e.id))}),Ue>0&&t.jsx("div",{className:"mt-4 lg:mt-6",children:t.jsx(b,{currentPage:Ge,totalPages:ze,totalItems:Ue,itemsPerPage:6,onPageChange:Is})}),0===Re.length&&!Fe&&t.jsxs("div",{className:"text-center py-12 lg:py-16 px-4",children:[t.jsx(D,{className:"w-20 lg:w-24 h-20 lg:h-24 text-slate-300 dark:text-slate-600 mx-auto mb-6"}),t.jsx("h3",{className:"text-xl lg:text-2xl font-medium text-slate-600 dark:text-slate-400 mb-3",children:Ae||"all"!==Pe?"No agents found":"No agents created yet"}),t.jsx("p",{className:"text-sm lg:text-base text-slate-500 dark:text-slate-500 max-w-md lg:max-w-lg mx-auto mb-6 leading-relaxed",children:Ae||"all"!==Pe?"Try adjusting your search or filter criteria to find what you're looking for":"Create your first AI agent to get started with automated conversations and boost your business efficiency"}),!Ae&&"all"===Pe&&ye&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:()=>g("/agents/create"),className:"w-full sm:w-auto common-button-bg px-6 py-3 rounded-xl shadow-sm hover:shadow-md transform hover:scale-[1.02] active:scale-[0.98]",children:"Create Your First Agent"}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-400 dark:text-slate-500",children:"Get started in just 2 minutes ‚ö°"})]}),(Ae||"all"!==Pe)&&t.jsx("button",{onClick:()=>{Te(""),Ie("all")},className:"w-full sm:w-auto common-button-bg2 px-6 py-2.5 rounded-lg",children:"Clear Filters"})]}),Je&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[70] flex items-center justify-center p-4",children:t.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl w-full max-w-md shadow-xl border border-slate-200 dark:border-slate-700",children:t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 dark:bg-red-900/20 rounded-full mx-auto mb-4",children:t.jsx(z,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),t.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-white text-center mb-2",children:"Delete Agent?"}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 text-center mb-6",children:"Are you sure you want to delete this agent? This action cannot be undone and all associated data will be permanently removed."}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:fs,disabled:Ze,className:"flex-1 px-4 py-2.5 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-700 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),t.jsx("button",{onClick:bs,disabled:Ze,className:"flex-1 px-4 py-2.5 bg-red-600 hover:bg-red-700 text-white rounded-xl transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Ze?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),t.jsx("span",{children:"Deleting..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(z,{className:"w-4 h-4"}),t.jsx("span",{children:"Delete"})]})})]})]})})}),De&&c.createPortal(t.jsxs("div",{className:"lg:hidden",children:[t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9998]",onClick:()=>_e(!1)}),t.jsx("div",{className:"fixed inset-x-0 bottom-0 z-[9999] animate-slide-up",children:t.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-t-3xl shadow-2xl max-h-[85vh] overflow-hidden",children:[t.jsx("div",{className:"flex justify-center pt-3 pb-2",children:t.jsx("div",{className:"w-10 h-1 bg-slate-300 dark:bg-slate-600 rounded-full"})}),t.jsxs("div",{className:"flex items-center justify-between px-5 pb-4 border-b border-slate-200 dark:border-slate-700",children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:"Filters & Sort"}),t.jsx("button",{onClick:()=>_e(!1),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition-colors",children:t.jsx(S,{className:"w-5 h-5 text-slate-500"})})]}),t.jsxs("div",{className:"px-5 py-4 space-y-5 overflow-y-auto max-h-[50vh]",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Gender"}),t.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"all",label:"All"},{value:"male",label:"Male"},{value:"female",label:"Female"}].map(e=>t.jsx("button",{onClick:()=>Ie(e.value),className:"py-2.5 px-3 rounded-xl text-sm font-medium transition-all "+(Pe===e.value?"bg-blue-500 text-white shadow-md":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"),children:e.label},e.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Sort By"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"newest",label:"Newest"},{value:"oldest",label:"Oldest"},{value:"a-z",label:"A ‚Üí Z"},{value:"z-a",label:"Z ‚Üí A"}].map(e=>t.jsx("button",{onClick:()=>Le(e.value),className:"py-2.5 px-3 rounded-xl text-sm font-medium transition-all "+(Me===e.value?"bg-blue-500 text-white shadow-md":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"),children:e.label},e.value))})]})]}),t.jsx("div",{className:"px-5 py-4 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 pb-safe",children:t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>{Ie("all"),Le("newest")},className:"flex-1 py-3 border border-slate-300 dark:border-slate-600 rounded-xl text-slate-700 dark:text-slate-300 font-medium active:scale-[0.98] transition-transform",children:"Reset"}),t.jsx("button",{onClick:()=>_e(!1),className:"flex-1 py-3 common-button-bg rounded-xl font-medium active:scale-[0.98] transition-transform",children:"Apply"})]})})]})})]}),document.body),bt&&c.createPortal(t.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",onClick:e=>e.target===e.currentTarget&&zt(),children:[t.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:zt}),t.jsxs("div",{className:"relative bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden border border-slate-200 dark:border-slate-700",tabIndex:-1,children:[t.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-5 border-b border-slate-200 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[t.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl common-button-bg2 flex items-center justify-center",children:t.jsx(D,{className:"w-5 h-5 sm:w-6 sm:h-6 text-slate-600 dark:text-slate-300"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-base sm:text-lg font-bold text-slate-800 dark:text-white",children:"Create AI Employee"}),t.jsxs("p",{className:"text-[10px] sm:text-xs text-slate-500 dark:text-slate-400",children:["Step ",vt," of 6"]})]})]}),t.jsx("button",{onClick:zt,className:"p-1.5 sm:p-2 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-lg transition-colors",children:t.jsx(S,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-500"})})]}),t.jsx("div",{className:"px-3 sm:px-5 pt-3 sm:pt-4",children:t.jsx("div",{className:"flex items-center gap-1 sm:gap-2",children:[1,2,3,4,5,6].map(e=>t.jsx("div",{className:"flex-1 flex items-center",children:t.jsx("div",{className:"h-1.5 sm:h-2 w-full rounded-full transition-all duration-300 "+(e<=vt?"bg-blue-400 dark:bg-blue-500":"bg-slate-200 dark:bg-slate-700")})},e))})}),t.jsxs("div",{className:"p-3 sm:p-5 overflow-y-auto max-h-[55vh] sm:max-h-[60vh]",children:[1===vt&&t.jsxs("div",{className:"space-y-3 sm:space-y-4 animate-fadeIn",children:[t.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[t.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3 sm:mb-4 rounded-2xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 shadow-sm flex items-center justify-center",children:t.jsx($,{className:"w-6 h-6 sm:w-8 sm:h-8 text-blue-600 dark:text-blue-400"})}),t.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-slate-800 dark:text-white mb-1 sm:mb-2",children:"Let's get started!"}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400 max-w-md mx-auto px-2",children:"Enter your company name and give your AI a friendly name. This helps personalize conversations with your customers."})]}),t.jsxs("div",{className:"space-y-1.5 sm:space-y-2",children:[t.jsxs("label",{className:"text-xs sm:text-sm font-medium text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[t.jsx($,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),"Company Name"]}),t.jsx("input",{type:"text",value:Tt.companyName,onChange:e=>Mt(t=>({...t,companyName:e.target.value})),placeholder:"e.g., Acme Corporation",className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm sm:text-base text-slate-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500/30 transition-all"})]}),t.jsxs("div",{className:"space-y-1.5 sm:space-y-2",children:[t.jsxs("label",{className:"text-xs sm:text-sm font-medium text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[t.jsx(D,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),"AI Employee Name"]}),t.jsx("input",{type:"text",value:Tt.aiEmployeeName,onChange:e=>Mt(t=>({...t,aiEmployeeName:e.target.value})),placeholder:"e.g., Alex, Sarah, Max",className:"w-full px-3 sm:px-4 py-2.5 sm:py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm sm:text-base text-slate-800 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500/30 transition-all"}),t.jsx("p",{className:"text-[10px] sm:text-xs text-slate-400 dark:text-slate-500",children:"This is how your AI Employee will introduce itself to callers"})]})]}),2===vt&&t.jsxs("div",{className:"space-y-3 sm:space-y-4 animate-fadeIn",children:[t.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[t.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3 sm:mb-4 rounded-2xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 shadow-sm flex items-center justify-center",children:t.jsx(le,{className:"w-6 h-6 sm:w-8 sm:h-8 text-purple-600 dark:text-purple-400"})}),t.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-slate-800 dark:text-white mb-1 sm:mb-2",children:"What will your AI Employee do?"}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400 max-w-md mx-auto px-2",children:"Select the main task your AI will handle. This determines how it responds and what skills it prioritizes."})]}),t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:()=>Nt(Math.max(0,kt-1)),disabled:0===kt,className:"absolute -left-2 sm:-left-3 top-1/2 -translate-y-1/2 z-10 w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white dark:bg-slate-800 shadow-lg border border-slate-200 dark:border-slate-700 flex items-center justify-center transition-all "+(0===kt?"opacity-40 cursor-not-allowed":"hover:bg-slate-50 dark:hover:bg-slate-700 hover:scale-110"),children:t.jsx(k,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-600 dark:text-slate-300"})}),t.jsx("button",{onClick:()=>Nt(Math.min(Math.ceil(_t.length/2)-1,kt+1)),disabled:kt>=Math.ceil(_t.length/2)-1,className:"absolute -right-2 sm:-right-3 top-1/2 -translate-y-1/2 z-10 w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white dark:bg-slate-800 shadow-lg border border-slate-200 dark:border-slate-700 flex items-center justify-center transition-all "+(kt>=Math.ceil(_t.length/2)-1?"opacity-40 cursor-not-allowed":"hover:bg-slate-50 dark:hover:bg-slate-700 hover:scale-110"),children:t.jsx(N,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-600 dark:text-slate-300"})}),t.jsx("div",{className:"overflow-hidden px-1 sm:px-2",children:t.jsx("div",{className:"flex transition-transform duration-300 ease-out",style:{transform:`translateX(-${100*kt}%)`},children:Array.from({length:Math.ceil(_t.length/2)}).map((e,s)=>t.jsxs("div",{className:"flex gap-2 sm:gap-4 min-w-full flex-shrink-0",children:[_t.slice(2*s,2*s+2).map(e=>t.jsxs("button",{onClick:()=>Mt(t=>({...t,businessProcess:e.value})),className:"flex-1 p-3 sm:p-4 rounded-xl border-2 text-center transition-colors duration-200 relative "+(Tt.businessProcess===e.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 shadow-md":"border-slate-200 dark:border-slate-700 hover:border-blue-300 dark:hover:border-blue-600 bg-white dark:bg-slate-800/50"),children:[Tt.businessProcess===e.value&&t.jsx(H,{className:"w-4 h-4 text-blue-500 absolute top-2 right-2"}),t.jsx("span",{className:"text-2xl sm:text-3xl mb-1 sm:mb-2 block",children:e.icon}),t.jsx("span",{className:"text-xs sm:text-sm font-medium text-slate-800 dark:text-white block",children:e.label})]},e.value)),1===_t.slice(2*s,2*s+2).length&&t.jsx("div",{className:"flex-1"})]},s))})}),t.jsx("div",{className:"flex justify-center gap-1.5 sm:gap-2 mt-3 sm:mt-4",children:Array.from({length:Math.ceil(_t.length/2)}).map((e,s)=>t.jsx("button",{onClick:()=>Nt(s),className:"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full transition-all "+(kt===s?"bg-blue-500 w-4 sm:w-6":"bg-slate-300 dark:bg-slate-600 hover:bg-slate-400")},s))})]})]}),3===vt&&t.jsxs("div",{className:"space-y-3 sm:space-y-4 animate-fadeIn",children:[t.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[t.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3 sm:mb-4 rounded-2xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 shadow-sm flex items-center justify-center",children:t.jsx(re,{className:"w-6 h-6 sm:w-8 sm:h-8 text-green-600 dark:text-green-400"})}),t.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-slate-800 dark:text-white mb-1 sm:mb-2",children:"What industry are you in?"}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400 max-w-md mx-auto px-2",children:"Your AI will use industry-specific language, understand common terms, and follow best practices for your field."})]}),t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:()=>St(Math.max(0,Ct-1)),disabled:0===Ct,className:"absolute -left-2 sm:-left-3 top-1/2 -translate-y-1/2 z-10 w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white dark:bg-slate-800 shadow-lg border border-slate-200 dark:border-slate-700 flex items-center justify-center transition-all "+(0===Ct?"opacity-40 cursor-not-allowed":"hover:bg-slate-50 dark:hover:bg-slate-700 hover:scale-110"),children:t.jsx(k,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-600 dark:text-slate-300"})}),t.jsx("button",{onClick:()=>St(Math.min(Math.ceil(Rt.length/6)-1,Ct+1)),disabled:Ct>=Math.ceil(Rt.length/6)-1,className:"absolute -right-2 sm:-right-3 top-1/2 -translate-y-1/2 z-10 w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white dark:bg-slate-800 shadow-lg border border-slate-200 dark:border-slate-700 flex items-center justify-center transition-all "+(Ct>=Math.ceil(Rt.length/6)-1?"opacity-40 cursor-not-allowed":"hover:bg-slate-50 dark:hover:bg-slate-700 hover:scale-110"),children:t.jsx(N,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-600 dark:text-slate-300"})}),t.jsx("div",{className:"overflow-hidden px-1 sm:px-2",children:t.jsx("div",{className:"flex transition-transform duration-300 ease-out",style:{transform:`translateX(-${100*Ct}%)`},children:Array.from({length:Math.ceil(Rt.length/6)}).map((e,s)=>t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-3 min-w-full",children:Rt.slice(6*s,6*s+6).map(e=>t.jsxs("button",{onClick:()=>Mt(t=>({...t,industry:e.value,subIndustry:""})),className:"p-2 sm:p-3 rounded-xl border-2 text-center transition-colors duration-200 relative "+(Tt.industry===e.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 shadow-md":"border-slate-200 dark:border-slate-700 hover:border-blue-300 dark:hover:border-blue-600 bg-white dark:bg-slate-800/50"),children:[Tt.industry===e.value&&t.jsx(H,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5 text-blue-500 absolute top-1 right-1 sm:top-1.5 sm:right-1.5"}),t.jsx("span",{className:"text-xl sm:text-2xl mb-0.5 sm:mb-1 block",children:e.icon}),t.jsx("span",{className:"text-[10px] sm:text-xs font-medium text-slate-800 dark:text-white leading-tight",children:e.label})]},e.value))},s))})}),t.jsx("div",{className:"flex justify-center gap-1.5 sm:gap-2 mt-3 sm:mt-4",children:Array.from({length:Math.ceil(Rt.length/6)}).map((e,s)=>t.jsx("button",{onClick:()=>St(s),className:"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full transition-all "+(Ct===s?"bg-blue-500 w-4 sm:w-6":"bg-slate-300 dark:bg-slate-600 hover:bg-slate-400")},s))})]})]}),4===vt&&t.jsxs("div",{className:"space-y-3 sm:space-y-4 animate-fadeIn",children:[t.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[t.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3 sm:mb-4 rounded-2xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 shadow-sm flex items-center justify-center",children:t.jsx(oe,{className:"w-6 h-6 sm:w-8 sm:h-8 text-orange-600 dark:text-orange-400"})}),t.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-slate-800 dark:text-white mb-1 sm:mb-2",children:"Specify your niche"}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400 max-w-md mx-auto px-2",children:"Select a sub-category to help your AI understand the specific terminology and practices in your area."})]}),Tt.industry&&Bt[Tt.industry]?t.jsx("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:Bt[Tt.industry].map(e=>t.jsxs("button",{onClick:()=>Mt(t=>({...t,subIndustry:e.value})),className:"p-3 sm:p-4 rounded-xl border-2 text-center transition-colors duration-200 relative "+(Tt.subIndustry===e.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 shadow-md":"border-slate-200 dark:border-slate-700 hover:border-blue-300 dark:hover:border-blue-600 bg-white dark:bg-slate-800/50"),children:[Tt.subIndustry===e.value&&t.jsx(H,{className:"w-4 h-4 text-blue-500 absolute top-2 right-2"}),t.jsx("span",{className:"text-sm font-medium text-slate-800 dark:text-white",children:e.label})]},e.value))}):t.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[t.jsx("p",{children:"No sub-industries available for selected industry"}),t.jsx("p",{className:"text-sm mt-2",children:"You can skip this step"})]})]}),5===vt&&t.jsxs("div",{className:"space-y-3 sm:space-y-4 animate-fadeIn",children:[t.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[t.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3 sm:mb-4 rounded-2xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 shadow-sm flex items-center justify-center",children:t.jsx(G,{className:"w-6 h-6 sm:w-8 sm:h-8 text-cyan-600 dark:text-cyan-400"})}),t.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-slate-800 dark:text-white mb-1 sm:mb-2",children:"Train Your AI"}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400 max-w-md mx-auto px-2",children:"Upload your documents, FAQs, or website links. Your AI will learn from these to give accurate, company-specific answers."})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[t.jsx(W,{className:"w-4 h-4"}),"Upload Files"]}),t.jsxs("div",{className:"border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl p-4 sm:p-6 text-center hover:border-blue-400 dark:hover:border-blue-500 transition-colors cursor-pointer bg-slate-50/50 dark:bg-slate-800/50",onClick:()=>{var e;return null==(e=document.getElementById("knowledge-file-input"))?void 0:e.click()},onDragOver:e=>{e.preventDefault(),e.currentTarget.classList.add("border-blue-400","bg-blue-50/50")},onDragLeave:e=>{e.currentTarget.classList.remove("border-blue-400","bg-blue-50/50")},onDrop:e=>{e.preventDefault(),e.currentTarget.classList.remove("border-blue-400","bg-blue-50/50");const t=Array.from(e.dataTransfer.files);Mt(e=>({...e,uploadedFiles:[...e.uploadedFiles,...t]}))},children:[t.jsx("input",{id:"knowledge-file-input",type:"file",multiple:!0,accept:".pdf,.doc,.docx,.txt,.csv,.xlsx,.xls,.png,.jpg,.jpeg,.gif,.webp",className:"hidden",onChange:e=>{const t=Array.from(e.target.files||[]);Mt(e=>({...e,uploadedFiles:[...e.uploadedFiles,...t]})),e.target.value=""}}),t.jsxs("div",{className:"flex flex-col items-center gap-1.5 sm:gap-2",children:[t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 text-slate-400",children:[t.jsx(G,{className:"w-6 h-6 sm:w-8 sm:h-8"}),t.jsx(ie,{className:"w-6 h-6 sm:w-8 sm:h-8"}),t.jsx(ne,{className:"w-6 h-6 sm:w-8 sm:h-8"})]}),t.jsxs("p",{className:"text-xs sm:text-sm text-slate-600 dark:text-slate-400",children:[t.jsx("span",{className:"text-blue-500 font-medium",children:"Click to upload"})," or drag and drop"]}),t.jsx("p",{className:"text-[10px] sm:text-xs text-slate-400 dark:text-slate-500",children:"PDF, DOC, TXT, CSV, Excel, Images (max 10MB each)"})]})]}),Tt.uploadedFiles.length>0&&t.jsx("div",{className:"space-y-1.5 sm:space-y-2 max-h-24 sm:max-h-32 overflow-y-auto",children:Tt.uploadedFiles.map((e,s)=>t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 p-1.5 sm:p-2 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[e.type.includes("image")?t.jsx(ie,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-green-500 flex-shrink-0"}):e.type.includes("pdf")?t.jsx(G,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-red-500 flex-shrink-0"}):t.jsx(ne,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-blue-500 flex-shrink-0"}),t.jsx("span",{className:"flex-1 text-xs sm:text-sm text-slate-700 dark:text-slate-300 truncate",children:e.name}),t.jsxs("span",{className:"text-[10px] sm:text-xs text-slate-400 hidden sm:inline",children:[(e.size/1024/1024).toFixed(2)," MB"]}),t.jsx("button",{onClick:()=>Mt(e=>({...e,uploadedFiles:e.uploadedFiles.filter((e,t)=>t!==s)})),className:"p-0.5 sm:p-1 text-red-500 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:t.jsx(S,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})]},s))})]}),t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 my-3 sm:my-4",children:[t.jsx("div",{className:"flex-1 h-px bg-slate-200 dark:bg-slate-700"}),t.jsx("span",{className:"text-[10px] sm:text-xs text-slate-400 dark:text-slate-500",children:"OR"}),t.jsx("div",{className:"flex-1 h-px bg-slate-200 dark:bg-slate-700"})]}),t.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[t.jsxs("label",{className:"text-xs sm:text-sm font-medium text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[t.jsx(K,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),"Website URLs"]}),Tt.websiteUrls.map((e,s)=>t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[t.jsx("input",{type:"url",value:e,onChange:e=>((e,t)=>{Mt(s=>({...s,websiteUrls:s.websiteUrls.map((s,a)=>a===e?t:s)}))})(s,e.target.value),placeholder:"https://yourcompany.com",className:"flex-1 px-3 sm:px-4 py-2 sm:py-2.5 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-800 dark:text-white text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30 focus:border-blue-500/30 transition-all"}),Tt.websiteUrls.length>1&&t.jsx("button",{onClick:()=>(e=>{Mt(t=>({...t,websiteUrls:t.websiteUrls.filter((t,s)=>s!==e)}))})(s),className:"p-2 sm:p-2.5 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl transition-colors",children:t.jsx(S,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})]},s)),t.jsxs("button",{onClick:$t,className:"w-full py-2 sm:py-2.5 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl text-slate-500 dark:text-slate-400 hover:border-blue-400 hover:text-blue-500 transition-colors flex items-center justify-center gap-2 text-xs sm:text-sm",children:[t.jsx(P,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),"Add another URL"]})]}),(Tt.uploadedFiles.length>0||Tt.websiteUrls.some(e=>e.trim()))&&t.jsx("div",{className:"mt-3 sm:mt-4 p-2.5 sm:p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl",children:t.jsxs("p",{className:"text-[10px] sm:text-xs text-blue-600 dark:text-blue-400",children:["üìö ",Tt.uploadedFiles.length," file(s) and ",Tt.websiteUrls.filter(e=>e.trim()).length," URL(s) will be added to knowledge base"]})})]}),6===vt&&(()=>{var e,s,a,l,r,n;const i=M(Tt.businessProcess,Tt.industry,Tt.subIndustry),o=Math.ceil(i.length/2);return t.jsxs("div",{className:"space-y-3 sm:space-y-4 animate-fadeIn",children:[t.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[t.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-3 sm:mb-4 rounded-2xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 shadow-sm flex items-center justify-center",children:t.jsx(D,{className:"w-6 h-6 sm:w-8 sm:h-8 text-pink-600 dark:text-pink-400"})}),t.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-slate-800 dark:text-white mb-1 sm:mb-2",children:"Recommended Templates"}),t.jsx("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400 max-w-md mx-auto px-2",children:"Based on your selections, here are the best templates for your AI Employee."})]}),(Tt.businessProcess||Tt.industry||Tt.subIndustry)&&t.jsxs("div",{className:"flex flex-wrap justify-center gap-1.5 sm:gap-2 mb-3 sm:mb-4",children:[Tt.businessProcess&&t.jsxs("span",{className:"px-2 sm:px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full text-[10px] sm:text-xs font-medium",children:[null==(e=_t.find(e=>e.value===Tt.businessProcess))?void 0:e.icon," ",null==(s=_t.find(e=>e.value===Tt.businessProcess))?void 0:s.label]}),Tt.industry&&t.jsxs("span",{className:"px-2 sm:px-3 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 rounded-full text-[10px] sm:text-xs font-medium",children:[null==(a=Rt.find(e=>e.value===Tt.industry))?void 0:a.icon," ",null==(l=Rt.find(e=>e.value===Tt.industry))?void 0:l.label]}),Tt.subIndustry&&t.jsx("span",{className:"px-2 sm:px-3 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full text-[10px] sm:text-xs font-medium",children:null==(n=null==(r=Bt[Tt.industry])?void 0:r.find(e=>e.value===Tt.subIndustry))?void 0:n.label})]}),t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:()=>At(Math.max(0,Et-1)),disabled:0===Et,className:"absolute -left-2 sm:-left-3 top-1/2 -translate-y-1/2 z-10 w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white dark:bg-slate-800 shadow-lg border border-slate-200 dark:border-slate-700 flex items-center justify-center transition-all "+(0===Et?"opacity-40 cursor-not-allowed":"hover:bg-slate-50 dark:hover:bg-slate-700 hover:scale-110"),children:t.jsx(k,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-600 dark:text-slate-300"})}),t.jsx("button",{onClick:()=>At(Math.min(o-1,Et+1)),disabled:Et>=o-1,className:"absolute -right-2 sm:-right-3 top-1/2 -translate-y-1/2 z-10 w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white dark:bg-slate-800 shadow-lg border border-slate-200 dark:border-slate-700 flex items-center justify-center transition-all "+(Et>=o-1?"opacity-40 cursor-not-allowed":"hover:bg-slate-50 dark:hover:bg-slate-700 hover:scale-110"),children:t.jsx(N,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-600 dark:text-slate-300"})}),t.jsx("div",{className:"overflow-hidden px-1 sm:px-2",children:t.jsx("div",{className:"flex transition-transform duration-300 ease-out",style:{transform:`translateX(-${100*Et}%)`},children:Array.from({length:o}).map((e,s)=>{const a=i.slice(2*s,2*s+2);return t.jsx("div",{className:"flex gap-2 sm:gap-4 min-w-full flex-shrink-0 justify-center",children:a.map(e=>{const s=E(e.matchScore),a=A(e.matchScore);return t.jsxs("div",{onClick:()=>Mt(t=>({...t,selectedTemplate:e.key})),className:"w-[140px] sm:w-[200px] p-3 sm:p-4 rounded-xl border-2 text-left transition-colors duration-200 relative cursor-pointer "+(Tt.selectedTemplate===e.key?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 shadow-md":e.isBestMatch?"border-green-400 dark:border-green-600 hover:border-green-500 dark:hover:border-green-500 bg-white dark:bg-slate-800/50":"border-slate-200 dark:border-slate-700 hover:border-blue-300 dark:hover:border-blue-600 bg-white dark:bg-slate-800/50"),children:[s&&t.jsxs("div",{className:`absolute -top-2 left-1/2 -translate-x-1/2 px-2 py-0.5 rounded-full text-[9px] sm:text-[10px] font-semibold ${a.bg} ${a.text} whitespace-nowrap`,children:[e.isBestMatch&&"‚≠ê ",s]}),Tt.selectedTemplate===e.key&&t.jsx(H,{className:"w-4 h-4 text-blue-500 absolute top-2 right-2"}),t.jsxs("div",{className:"flex flex-col h-full mt-1",children:[t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-1.5 sm:mb-2",children:[t.jsx("span",{className:"text-xl sm:text-2xl",children:e.template.icon}),t.jsx("h4",{className:"font-semibold text-slate-800 dark:text-white text-xs sm:text-sm flex-1",children:e.template.name})]}),t.jsx("p",{className:"text-[10px] sm:text-xs text-slate-500 dark:text-slate-400 mb-1.5 sm:mb-2 line-clamp-2",children:e.template.description}),e.matchReasons.length>0&&t.jsxs("p",{className:"text-[9px] sm:text-[10px] text-green-600 dark:text-green-400 mb-1.5 line-clamp-1 font-medium",children:["‚úì ",e.matchReasons[0]]}),t.jsx("div",{className:"flex flex-wrap gap-1",children:e.template.features.slice(0,2).map((e,s)=>t.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded text-[10px] sm:text-xs",children:e},s))}),t.jsxs("button",{onClick:t=>{t.stopPropagation(),Dt(e.key),Pt(!0)},className:"mt-2 text-[10px] sm:text-xs text-blue-500 hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300 font-medium flex items-center gap-1 transition-colors",children:[t.jsx(_,{className:"w-3 h-3"}),"View Details"]})]})]},e.key)})},s)})})}),t.jsx("div",{className:"flex justify-center gap-1.5 sm:gap-2 mt-3 sm:mt-4",children:Array.from({length:o}).map((e,s)=>t.jsx("button",{onClick:()=>At(s),className:"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full transition-all "+(Et===s?"bg-blue-500 w-4 sm:w-6":"bg-slate-300 dark:bg-slate-600 hover:bg-slate-400")},s))})]}),t.jsx("div",{className:"text-center mt-2 sm:mt-3",children:t.jsxs("button",{onClick:()=>Mt(e=>({...e,selectedTemplate:null})),className:"text-[10px] sm:text-xs font-medium transition-colors "+(null===Tt.selectedTemplate?"text-blue-600 dark:text-blue-400":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-400"),children:[null===Tt.selectedTemplate?"‚úì ":"","Skip - I'll start from scratch"]})})]})})()]}),t.jsxs("div",{className:"p-3 sm:p-5 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50",children:[t.jsxs("div",{className:"flex items-center justify-between gap-2 sm:gap-3",children:[vt>1?t.jsxs("button",{onClick:Ot,className:"flex items-center gap-1 sm:gap-2 px-2.5 sm:px-4 py-2 sm:py-2.5 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-xl transition-colors text-sm",children:[t.jsx(k,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),"Back"]}):t.jsx("div",{}),t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[6===vt&&t.jsxs("button",{onClick:Ft,className:"hidden sm:flex items-center gap-2 px-4 py-2.5 text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 transition-colors",children:[t.jsx(f,{className:"w-4 h-4"}),"Skip & Configure Manually"]}),vt<6?t.jsxs("button",{onClick:Ut,disabled:!Ht(),className:"flex items-center gap-1.5 sm:gap-2 px-4 sm:px-6 py-2 sm:py-2.5 rounded-xl font-medium transition-all text-sm sm:text-base "+(Ht()?"common-button-bg hover:scale-[1.02] active:scale-[0.98]":"bg-slate-200 dark:bg-slate-700 text-slate-400 dark:text-slate-500 cursor-not-allowed"),children:["Continue",t.jsx(N,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})]}):t.jsxs("button",{onClick:Ft,className:"flex items-center gap-1.5 sm:gap-2 px-4 sm:px-6 py-2 sm:py-2.5 common-button-bg rounded-xl font-medium hover:scale-[1.02] active:scale-[0.98] transition-all text-sm sm:text-base",children:[t.jsx(q,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Create AI Employee"}),t.jsx("span",{className:"sm:hidden",children:"Create"}),t.jsx(F,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})]})]})]}),6===vt&&t.jsxs("button",{onClick:Ft,className:"sm:hidden w-full mt-2 flex items-center justify-center gap-2 py-2 text-xs text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 transition-colors",children:[t.jsx(f,{className:"w-3.5 h-3.5"}),"Skip & Configure Manually"]})]})]})]}),document.body),Lt&&It&&T[It]&&c.createPortal(t.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",children:[t.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>Pt(!1)}),t.jsxs("div",{className:"relative bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[85vh] overflow-hidden border border-slate-200 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b border-slate-200 dark:border-slate-700",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 common-bg-icons rounded-xl flex items-center justify-center text-2xl",children:T[It].icon}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:T[It].name}),t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"AI Employee Template"})]})]}),t.jsx("button",{onClick:()=>Pt(!1),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:t.jsx(S,{className:"w-5 h-5 text-slate-500"})})]}),t.jsxs("div",{className:"p-4 sm:p-5 overflow-y-auto max-h-[55vh] space-y-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Description"}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:T[It].description})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Key Features"}),t.jsx("div",{className:"flex flex-wrap gap-1.5",children:T[It].features.map((e,s)=>t.jsx("span",{className:"px-2.5 py-1 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-lg text-xs font-medium border border-slate-200 dark:border-slate-700",children:e},s))})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Best For Industries"}),t.jsx("div",{className:"flex flex-wrap gap-1.5",children:T[It].matchingIndustries.map((e,s)=>t.jsx("span",{className:"px-2.5 py-1 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 rounded-lg text-xs capitalize border border-emerald-200 dark:border-emerald-800",children:"all"===e?"All Industries":e.replace("-"," ")},s))})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Recommended For"}),t.jsx("div",{className:"flex flex-wrap gap-1.5",children:T[It].matchingProcesses.map((e,s)=>t.jsx("span",{className:"px-2.5 py-1 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 rounded-lg text-xs capitalize border border-blue-200 dark:border-blue-800",children:e.replace("-"," ")},s))})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Persona"}),t.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:T[It].persona})]}),t.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-slate-700",children:[t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Guardrails"}),t.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:T[It].guardrailsLevel})]})]}),t.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4",children:t.jsx("h3",{className:"text-sm font-bold text-slate-800 dark:text-white mb-3",children:"Training Configuration"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Custom Instructions"}),t.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700 max-h-20 overflow-y-auto",children:t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:T[It].customInstructions})})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"First Message"}),t.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700",children:t.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 italic",children:['"',T[It].firstMessage,'"']})})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"System Prompt"}),t.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700 max-h-20 overflow-y-auto",children:t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:T[It].systemPrompt})})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Opening Script"}),t.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700 h-24 overflow-y-auto",children:t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:T[It].openingScript})})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Closing Script"}),t.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700 h-24 overflow-y-auto",children:t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:T[It].closingScript})})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Key Talking Points"}),t.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700 max-h-24 overflow-y-auto",children:t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 whitespace-pre-line",children:T[It].keyTalkingPoints})})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:["Objection Handling (",T[It].objections.length,")"]}),t.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:T[It].objections.map((e,s)=>t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700",children:[t.jsxs("p",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 mb-1",children:['"',e.objection,'"']}),t.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["‚Üí ",e.response]})]},s))})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:["Conversation Examples (",T[It].conversationExamples.length,")"]}),t.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:T[It].conversationExamples.map((e,s)=>t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-3 border border-slate-200 dark:border-slate-700",children:[t.jsxs("p",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 mb-1",children:['Customer: "',e.customerInput,'"']}),t.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:['Agent: "',e.expectedResponse,'"']})]},s))})]})]}),t.jsx("div",{className:"p-4 sm:p-5 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50",children:t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>Pt(!1),className:"flex-1 py-2.5 border border-slate-300 dark:border-slate-600 rounded-xl text-slate-700 dark:text-slate-300 font-medium hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:"Close"}),t.jsxs("button",{onClick:()=>{Mt(e=>({...e,selectedTemplate:It})),Pt(!1)},className:"flex-1 py-2.5 common-button-bg rounded-xl font-medium hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[t.jsx(H,{className:"w-4 h-4"}),"Select Template"]})]})})]})]}),document.body)]}):Ne&&he?t.jsxs("div",{className:"space-y-3 sm:space-y-4 lg:space-y-6 w-full",children:[t.jsx(x,{children:t.jsx("div",{className:"p-4 sm:p-6",children:t.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4 sm:flex-row sm:items-start sm:justify-between",children:[t.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 lg:gap-4 min-w-0 flex-1",children:[t.jsx("button",{onClick:()=>g("/agents"),className:"common-button-bg2 p-1.5 sm:p-2.5 rounded-lg sm:rounded-xl flex-shrink-0 touch-manipulation",children:t.jsx(V,{className:"w-4 sm:w-5 h-4 sm:h-5 text-slate-600 dark:text-slate-300"})}),t.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 lg:gap-4 min-w-0 flex-1",children:[t.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 lg:w-16 lg:h-16 common-bg-icons flex items-center justify-center flex-shrink-0 rounded-lg sm:rounded-xl",children:t.jsx(D,{className:"w-5 h-5 sm:w-7 sm:h-7 lg:w-8 lg:h-8 text-black dark:text-white"})}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsx("div",{className:"flex flex-col gap-1.5 sm:gap-2 sm:flex-row sm:items-start sm:justify-between",children:t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("h1",{className:"text-base sm:text-xl lg:text-2xl font-bold text-slate-800 dark:text-white leading-tight truncate",children:he.name}),t.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 sm:gap-x-3 gap-y-1 text-xs sm:text-sm text-slate-600 dark:text-slate-400 mt-1",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(J,{className:"w-3 h-3 sm:w-4 sm:h-4"}),t.jsx("span",{className:"truncate text-xs sm:text-sm",children:he.language})]}),t.jsx("div",{className:"flex items-center gap-1",children:t.jsx("span",{className:"px-2 py-0.5 sm:px-3 sm:py-1 rounded-full text-xs font-medium flex-shrink-0 "+("Published"===he.status||he.is_active?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":"bg-orange-100 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400"),children:"Published"===he.status||he.is_active?"Live":"Unpublished"})})]})]})})})]})]}),t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 lg:gap-3 flex-shrink-0",children:[t.jsxs("button",{onClick:()=>g(`/agents/${he.id}/edit`),className:"flex-1 sm:flex-none common-button-bg2 flex items-center justify-center gap-1 sm:gap-2 px-2 sm:px-3 lg:px-4 py-1.5 sm:py-2 lg:py-2.5 rounded-lg sm:rounded-xl touch-manipulation min-h-[36px] sm:min-h-[40px]",children:[t.jsx(R,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),t.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"Edit"})]}),("Published"===he.status||he.is_active)&&t.jsxs("button",{onClick:()=>Ke(!0),className:"flex-none common-button-bg2 flex items-center justify-center gap-1 sm:gap-2 px-2 sm:px-3 lg:px-4 py-1.5 sm:py-2 lg:py-2.5 rounded-lg sm:rounded-xl touch-manipulation min-h-[36px] sm:min-h-[40px]",children:[t.jsx(me,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),t.jsx("span",{className:"hidden sm:inline text-xs sm:text-sm font-medium",children:"QR"})]}),"Published"===he.status?t.jsxs("button",{onClick:()=>ps(he.id),disabled:Gt.has(he.id),className:"flex-none common-button-bg2 flex items-center justify-center gap-1 sm:gap-2 px-2 sm:px-3 lg:px-4 py-1.5 sm:py-2 lg:py-2.5 rounded-lg sm:rounded-xl touch-manipulation min-h-[36px] sm:min-h-[40px] "+(Gt.has(he.id)?"opacity-50 cursor-not-allowed":""),children:[Gt.has(he.id)?t.jsx("div",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin"}):t.jsx(U,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),t.jsx("span",{className:"text-xs sm:text-sm font-medium",children:Gt.has(he.id)?"...":"Pause"})]}):t.jsxs("button",{onClick:()=>he.is_active?ps(he.id):gs(he.id),disabled:Gt.has(he.id),className:`flex-none flex items-center justify-center gap-1 sm:gap-2 px-2 sm:px-3 lg:px-4 py-1.5 sm:py-2 lg:py-2.5 rounded-lg sm:rounded-xl touch-manipulation min-h-[36px] sm:min-h-[40px] ${Gt.has(he.id)?"opacity-50 cursor-not-allowed":""} ${he.is_active?"common-button-bg2":"common-button-bg"}`,children:[Gt.has(he.id)?t.jsx("div",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin"}):he.is_active?t.jsx(U,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}):t.jsx(O,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),t.jsx("span",{className:"text-xs sm:text-sm font-medium",children:Gt.has(he.id)?"...":he.is_active?"Pause":"Publish"})]})]})]})})}),t.jsxs("div",{className:"lg:hidden grid grid-cols-2 gap-2",children:[t.jsx(x,{className:"hover:shadow-md transition-all duration-200",children:t.jsx("div",{className:"p-2",children:t.jsxs("div",{className:"flex flex-col items-center gap-1",children:[t.jsx("div",{className:"w-7 h-7 bg-blue-50 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:t.jsx(Y,{className:"w-3.5 h-3.5 text-blue-600 dark:text-blue-400"})}),t.jsx("p",{className:"text-base font-bold text-slate-800 dark:text-white",children:he.stats.conversations.toLocaleString()}),t.jsx("p",{className:"text-[10px] text-slate-600 dark:text-slate-400",children:"Conversations"}),he.stats.conversations>0?t.jsx("span",{className:"text-[10px] font-medium text-green-600 dark:text-green-400",children:"+12%"}):t.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-500",children:"No data"})]})})}),t.jsx(x,{className:"hover:shadow-md transition-all duration-200",children:t.jsx("div",{className:"p-2",children:t.jsxs("div",{className:"flex flex-col items-center gap-1",children:[t.jsx("div",{className:"w-7 h-7 bg-green-50 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:t.jsx(H,{className:"w-3.5 h-3.5 text-green-600 dark:text-green-400"})}),t.jsxs("p",{className:"text-base font-bold text-slate-800 dark:text-white",children:[he.stats.successRate,"%"]}),t.jsx("p",{className:"text-[10px] text-slate-600 dark:text-slate-400",children:"Success Rate"}),he.stats.successRate>0?t.jsx("span",{className:"text-[10px] font-medium text-green-600 dark:text-green-400",children:"+2.1%"}):t.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-500",children:"No data"})]})})}),t.jsx(x,{className:"hover:shadow-md transition-all duration-200",children:t.jsx("div",{className:"p-2",children:t.jsxs("div",{className:"flex flex-col items-center gap-1",children:[t.jsx("div",{className:"w-7 h-7 bg-purple-50 dark:bg-purple-900/20 rounded-lg flex items-center justify-center",children:t.jsx(X,{className:"w-3.5 h-3.5 text-purple-600 dark:text-purple-400"})}),t.jsxs("p",{className:"text-base font-bold text-slate-800 dark:text-white",children:[he.stats.avgResponseTime,"s"]}),t.jsx("p",{className:"text-[10px] text-slate-600 dark:text-slate-400",children:"Avg Response"}),he.stats.avgResponseTime>0?t.jsx("span",{className:"text-[10px] font-medium text-green-600 dark:text-green-400",children:"-0.3s"}):t.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-500",children:"No data"})]})})}),t.jsx(x,{className:"hover:shadow-md transition-all duration-200",children:t.jsx("div",{className:"p-2",children:t.jsxs("div",{className:"flex flex-col items-center gap-1",children:[t.jsx("div",{className:"w-7 h-7 bg-orange-50 dark:bg-orange-900/20 rounded-lg flex items-center justify-center",children:t.jsx(Q,{className:"w-3.5 h-3.5 text-orange-600 dark:text-orange-400"})}),t.jsx("p",{className:"text-base font-bold text-slate-800 dark:text-white",children:he.stats.activeUsers}),t.jsx("p",{className:"text-[10px] text-slate-600 dark:text-slate-400",children:"Active Users"}),he.stats.activeUsers>0?t.jsx("span",{className:"text-[10px] font-medium text-green-600 dark:text-green-400",children:"+8%"}):t.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-500",children:"No data"})]})})})]}),t.jsxs("div",{className:"hidden lg:grid grid-cols-4 gap-4",children:[t.jsx(x,{className:"hover:shadow-lg transition-all duration-300",children:t.jsxs("div",{className:"p-5",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-50 dark:bg-blue-900/20 rounded-xl flex items-center justify-center",children:t.jsx(Y,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:he.stats.conversations.toLocaleString()}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Conversations"})]})]}),t.jsx("div",{className:"flex items-center gap-1",children:he.stats.conversations>0?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"+12%"}),t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:"this week"})]}):t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:"No data yet"})})]})}),t.jsx(x,{className:"hover:shadow-lg transition-all duration-300",children:t.jsxs("div",{className:"p-5",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("div",{className:"w-12 h-12 bg-green-50 dark:bg-green-900/20 rounded-xl flex items-center justify-center",children:t.jsx(H,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:[he.stats.successRate,"%"]}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Success Rate"})]})]}),t.jsx("div",{className:"flex items-center gap-1",children:he.stats.successRate>0?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"+2.1%"}),t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:"improved"})]}):t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:"No data yet"})})]})}),t.jsx(x,{className:"hover:shadow-lg transition-all duration-300",children:t.jsxs("div",{className:"p-5",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("div",{className:"w-12 h-12 bg-purple-50 dark:bg-purple-900/20 rounded-xl flex items-center justify-center",children:t.jsx(X,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:[he.stats.avgResponseTime,"s"]}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Avg Response"})]})]}),t.jsx("div",{className:"flex items-center gap-1",children:he.stats.avgResponseTime>0?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"-0.3s"}),t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:"faster"})]}):t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:"No data yet"})})]})}),t.jsx(x,{className:"hover:shadow-lg transition-all duration-300",children:t.jsxs("div",{className:"p-5",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("div",{className:"w-12 h-12 bg-orange-50 dark:bg-orange-900/20 rounded-xl flex items-center justify-center",children:t.jsx(Q,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:he.stats.activeUsers}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Active Users"})]})]}),t.jsx("div",{className:"flex items-center gap-1",children:he.stats.activeUsers>0?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"+8%"}),t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:"today"})]}):t.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-500",children:"No data yet"})})]})})]}),t.jsx("div",{className:"grid grid-cols-1 gap-3 sm:gap-4 lg:gap-6",children:t.jsx("div",{className:"order-1 lg:order-1",children:t.jsx(x,{children:t.jsxs("div",{className:"p-2 sm:p-3",children:[t.jsxs("div",{className:"flex flex-row sm:items-center sm:justify-between gap-2 mb-2",children:[t.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[t.jsx("div",{className:"w-5 h-5 sm:w-6 sm:h-6 bg-slate-50 dark:bg-slate-800 rounded-lg flex items-center justify-center",children:t.jsx(Z,{className:"w-3 h-3 text-slate-600 dark:text-slate-400"})}),t.jsx("h3",{className:"text-xs sm:text-sm font-semibold text-slate-800 dark:text-white",children:"Configuration"})]}),("Published"===he.status||he.is_active)&&t.jsxs("button",{onClick:()=>Ve(!0),className:"flex items-center justify-center gap-1.5 sm:gap-2 px-3 py-1.5 sm:py-2 border border-1 dark:bg-green-900/20 text-black dark:text-green-300 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/30 transition-all duration-200 text-xs sm:text-sm font-medium shadow-sm hover:shadow-md self-start",children:[t.jsx(O,{className:"w-3 h-3 sm:w-4 sm:h-4"}),t.jsx("span",{children:"Test"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("div",{className:"p-2 bg-slate-50 border dark:bg-slate-800/50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[t.jsx(J,{className:"w-3 h-3 text-blue-600 dark:text-blue-400"}),t.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Language"})]}),t.jsx("p",{className:"text-sm font-semibold text-slate-800 dark:text-white",children:he.language})]}),t.jsxs("div",{className:"p-2 bg-slate-50 border dark:bg-slate-800/50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[t.jsx(Y,{className:"w-3 h-3 text-purple-600 dark:text-purple-400"}),t.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Voice"})]}),t.jsx("p",{className:"text-sm font-semibold text-slate-800 dark:text-white",children:he.voice})]}),t.jsxs("div",{className:"p-2 bg-slate-50 border dark:bg-slate-800/50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[t.jsx(Q,{className:"w-3 h-3 text-green-600 dark:text-green-400"}),t.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Persona"})]}),t.jsx("p",{className:"text-sm font-semibold text-slate-800 dark:text-white",children:he.persona})]}),t.jsxs("div",{className:"p-2 bg-slate-50 border dark:bg-slate-800/50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5",children:[t.jsx(X,{className:"w-3 h-3 text-orange-600 dark:text-orange-400"}),t.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Created"})]}),t.jsx("p",{className:"text-sm font-semibold text-slate-800 dark:text-white",children:new Date(he.createdAt).toLocaleDateString()})]})]})]})})})}),t.jsx("div",{className:"mt-3 sm:mt-4 lg:mt-6",children:t.jsx(ue,{agentId:he.id,agentName:he.name,isPublished:!0})}),("Published"===he.status||he.is_active)&&t.jsx("div",{className:"mt-4 sm:mt-6",children:t.jsx(ge,{currentAgent:he})}),We&&he&&t.jsx(jt,{agent:he,onClose:()=>Ke(!1)}),Je&&t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[70] flex items-center justify-center p-4",children:t.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl w-full max-w-md shadow-xl border border-slate-200 dark:border-slate-700",children:t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 dark:bg-red-900/20 rounded-full mx-auto mb-4",children:t.jsx(z,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),t.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-white text-center mb-2",children:"Delete Agent?"}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 text-center mb-6",children:"Are you sure you want to delete this agent? This action cannot be undone and all associated data will be permanently removed."}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:fs,disabled:Ze,className:"flex-1 px-4 py-2.5 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-700 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),t.jsx("button",{onClick:bs,disabled:Ze,className:"flex-1 px-4 py-2.5 bg-red-600 hover:bg-red-700 text-white rounded-xl transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Ze?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),t.jsx("span",{children:"Deleting..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(z,{className:"w-4 h-4"}),t.jsx("span",{children:"Delete"})]})})]})]})})}),t.jsxs("div",{className:"mt-4 sm:mt-6",children:[t.jsx("div",{className:"lg:hidden",children:t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("button",{onClick:()=>g(`/agents/${he.id}/train`),className:"common-bg-icons hover:shadow-md transition-all duration-200 p-2 rounded-lg touch-manipulation group",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-7 h-7 bg-blue-50 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:t.jsx(ee,{className:"w-3.5 h-3.5 text-blue-600 dark:text-blue-400"})}),t.jsx("p",{className:"text-xs font-medium text-slate-800 dark:text-white",children:"Train"})]})}),t.jsx("button",{onClick:()=>g(`/agents/${he.id}/edit`),className:"common-bg-icons hover:shadow-md transition-all duration-200 p-2 rounded-lg touch-manipulation group",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-7 h-7 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg flex items-center justify-center",children:t.jsx(R,{className:"w-3.5 h-3.5 text-yellow-600 dark:text-yellow-400"})}),t.jsx("p",{className:"text-xs font-medium text-slate-800 dark:text-white",children:"Edit"})]})}),t.jsx("button",{className:"common-bg-icons hover:shadow-md transition-all duration-200 p-2 rounded-lg touch-manipulation group",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-7 h-7 bg-green-50 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:t.jsx(C,{className:"w-3.5 h-3.5 text-green-600 dark:text-green-400"})}),t.jsx("p",{className:"text-xs font-medium text-slate-800 dark:text-white",children:"Clone"})]})}),t.jsx("button",{className:"common-bg-icons hover:shadow-md transition-all duration-200 p-2 rounded-lg touch-manipulation group",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-7 h-7 bg-purple-50 dark:bg-purple-900/20 rounded-lg flex items-center justify-center",children:t.jsx(te,{className:"w-3.5 h-3.5 text-purple-600 dark:text-purple-400"})}),t.jsx("p",{className:"text-xs font-medium text-slate-800 dark:text-white",children:"Export"})]})})]})}),t.jsx("div",{className:"hidden lg:block",children:t.jsx(x,{children:t.jsxs("div",{className:"p-3 sm:p-4 lg:p-6",children:[t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-3 sm:mb-4",children:[t.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-slate-50 dark:bg-slate-800 rounded-lg sm:rounded-xl flex items-center justify-center",children:t.jsx(B,{className:"w-3 h-3 sm:w-4 sm:h-4 text-slate-600 dark:text-slate-400"})}),t.jsx("h3",{className:"text-sm sm:text-base lg:text-lg font-semibold text-slate-800 dark:text-white",children:"Quick Actions"})]}),t.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-2 sm:gap-3",children:[t.jsx("button",{onClick:()=>g(`/agents/${he.id}/train`),className:"common-bg-icons hover:shadow-md transition-all duration-200 p-3 sm:p-4 rounded-lg touch-manipulation group",children:t.jsxs("div",{className:"flex flex-col items-center gap-2 sm:gap-3",children:[t.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-blue-50 dark:bg-blue-900/20 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform",children:t.jsx(ee,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 dark:text-blue-400"})}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm sm:text-base font-medium text-slate-800 dark:text-white",children:"Train Agent"}),t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Improve responses"})]})]})}),t.jsx("button",{onClick:()=>g(`/agents/${he.id}/edit`),className:"common-bg-icons hover:shadow-md transition-all duration-200 p-3 sm:p-4 rounded-lg touch-manipulation group",children:t.jsxs("div",{className:"flex flex-col items-center gap-2 sm:gap-3",children:[t.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform",children:t.jsx(R,{className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-600 dark:text-yellow-400"})}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm sm:text-base font-medium text-slate-800 dark:text-white",children:"Edit Agent"}),t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Modify settings"})]})]})}),t.jsx("button",{className:"common-bg-icons hover:shadow-md transition-all duration-200 p-3 sm:p-4 rounded-lg touch-manipulation group",children:t.jsxs("div",{className:"flex flex-col items-center gap-2 sm:gap-3",children:[t.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-green-50 dark:bg-green-900/20 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform",children:t.jsx(C,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600 dark:text-green-400"})}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm sm:text-base font-medium text-slate-800 dark:text-white",children:"Clone Agent"}),t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Create duplicate"})]})]})}),t.jsx("button",{className:"common-bg-icons hover:shadow-md transition-all duration-200 p-3 sm:p-4 rounded-lg touch-manipulation group",children:t.jsxs("div",{className:"flex flex-col items-center gap-2 sm:gap-3",children:[t.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-purple-50 dark:bg-purple-900/20 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform",children:t.jsx(te,{className:"w-4 h-4 sm:w-5 sm:h-5 text-purple-600 dark:text-purple-400"})}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm sm:text-base font-medium text-slate-800 dark:text-white",children:"Export Data"}),t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Download config"})]})]})})]})]})})})]}),qe&&he&&"Published"===he.status&&t.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-[60] flex items-center justify-center p-3 sm:p-4 -top-8",children:t.jsxs("div",{className:"bg-white/95 dark:bg-slate-900/95 backdrop-blur-md rounded-2xl w-full max-w-2xl h-[80vh] max-h-[600px] relative flex flex-col shadow-xl border border-white/20 dark:border-slate-700/50",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200/50 dark:border-slate-700/50",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),t.jsxs("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:["Test ",he.name]})]}),t.jsx("button",{onClick:async()=>{if(ss)try{await ss.disconnect()}catch(e){}Ve(!1),lt(!1),ms(!1),qt("disconnected"),Jt("Ready to connect"),it&&(clearInterval(it),ot(null)),nt(0),st("call")},className:"w-8 h-8 flex items-center justify-center hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:t.jsx(S,{className:"w-4 h-4 text-slate-400"})})]}),t.jsx("div",{className:"flex border-b border-slate-200/50 dark:border-slate-700/50",children:[{id:"call",label:"Voice",icon:se},{id:"conversation",label:"Conversation",icon:Y}].map(({id:e,label:s,icon:a})=>t.jsxs("button",{onClick:()=>st(e),className:"flex-1 flex items-center justify-center gap-2 py-3 text-xs font-medium transition-colors "+(tt===e?"text-slate-900 dark:text-white border-b-2 border-slate-900 dark:border-white bg-slate-50/50 dark:bg-slate-800/50":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"),children:[t.jsx(a,{className:"w-4 h-4"}),t.jsx("span",{children:s})]},e))}),t.jsxs("div",{className:"flex-1 overflow-hidden",children:["call"===tt&&t.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-6",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mb-4 mx-auto transition-all "+("connected"===Kt?"bg-green-100 dark:bg-green-900/20":"connecting"===Kt?"bg-yellow-100 dark:bg-yellow-900/20 animate-pulse":"bg-slate-100 dark:bg-slate-800/50"),children:t.jsx(se,{className:"w-8 h-8 "+("connected"===Kt?"text-green-600 dark:text-green-400":"connecting"===Kt?"text-yellow-600 dark:text-yellow-400":"text-slate-400")})}),t.jsx("h3",{className:"text-lg font-medium text-slate-800 dark:text-white mb-1",children:"connected"===Kt?"Connected":"connecting"===Kt?"Connecting...":"Ready to Call"}),t.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:Vt}),at&&t.jsx("p",{className:"text-sm font-mono text-slate-600 dark:text-slate-300 mt-2",children:As(rt)})]}),t.jsx("div",{className:"flex items-center gap-3",children:at||Qt?at?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:Es,className:"p-3 rounded-xl transition-colors "+(Yt?"bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400":"bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-400"),title:Yt?"Unmute":"Mute",children:Yt?t.jsx(de,{className:"w-5 h-5"}):t.jsx(ae,{className:"w-5 h-5"})}),t.jsx("button",{onClick:Ss,className:"p-3 bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-xl hover:bg-red-200 dark:hover:bg-red-900/40 transition-colors",title:"End Call",children:t.jsx(se,{className:"w-5 h-5"})})]}):t.jsxs("div",{className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 text-sm",children:[t.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 dark:border-slate-600 border-t-slate-900 dark:border-t-white rounded-full animate-spin"}),t.jsx("span",{children:"Connecting..."})]}):t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:Cs,disabled:gt||Qt,className:"flex items-center gap-2 px-6 py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl hover:bg-slate-800 dark:hover:bg-slate-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:[t.jsx(ce,{className:"w-4 h-4"}),Qt?"Connecting...":"Start Call"]}),t.jsxs("button",{onClick:Ns,className:"flex items-center gap-2 px-4 py-3 text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200 transition-colors text-sm",children:[t.jsx(Z,{className:"w-4 h-4"}),"Test"]})]})}),at&&t.jsx("div",{className:"mt-6 text-center",children:t.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-slate-500 dark:text-slate-400",children:[t.jsx("div",{className:"w-2 h-2 rounded-full "+(Yt?"bg-red-500":"bg-green-500")}),Yt?"Muted":"Listening"]})})]}),"conversation"===tt&&t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[0===dt.length?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(Y,{className:"w-8 h-8 text-slate-300 dark:text-slate-600 mx-auto mb-3"}),t.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Start a conversation to see messages"})]}):dt.map(e=>t.jsx("div",{className:"flex mb-4 "+(e.isUser?"justify-end":"justify-start"),children:t.jsxs("div",{className:"flex gap-3 max-w-[80%] "+(e.isUser?"flex-row-reverse":""),children:[t.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 "+(e.isUser?"bg-blue-500 text-white":"bg-green-500 text-white"),children:e.isUser?t.jsx("span",{className:"text-sm font-medium",children:"U"}):t.jsx("span",{className:"text-sm font-medium",children:"AI"})}),t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:e.isUser?"You":"AI Employee"}),t.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),e.source&&t.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full "+("voice"===e.source?"bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400"),children:"voice"===e.source?"üéôÔ∏è":"üí¨"})]}),t.jsx("div",{className:"px-4 py-2 rounded-2xl text-sm "+(e.isUser?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200"),children:e.text})]})]})},e.id)),gt&&t.jsx("div",{className:"flex justify-start mb-4",children:t.jsxs("div",{className:"flex gap-3 max-w-[80%]",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500 text-white flex items-center justify-center flex-shrink-0",children:t.jsx("span",{className:"text-sm font-medium",children:"AI"})}),t.jsx("div",{className:"flex flex-col",children:t.jsx("div",{className:"px-4 py-2 rounded-2xl bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200",children:t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-pulse"}),t.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-pulse",style:{animationDelay:"0.1s"}}),t.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}})]})})})]})})]}),t.jsxs("div",{className:"p-4 border-t border-slate-200/50 dark:border-slate-700/50",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:mt,onChange:e=>xt(e.target.value),onKeyPress:e=>{"Enter"!==e.key||gt||vs()},placeholder:"connected"===Kt?"Type a message or use voice...":"Type a message...",className:"flex-1 px-3 py-2 bg-slate-50 dark:bg-slate-800 border-0 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-900/10 dark:focus:ring-white/10 text-slate-700 dark:text-slate-300 text-sm placeholder-slate-400 dark:placeholder-slate-500",disabled:gt}),t.jsx("button",{onClick:vs,disabled:!mt.trim()||gt,className:"px-3 py-2 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-lg hover:bg-slate-800 dark:hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:t.jsx(xe,{className:"w-4 h-4"})})]}),"connected"===Kt&&t.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2 text-center",children:"üî¥ Live conversation ‚Ä¢ Voice and text messages"})]})]})]})]})})]}):t.jsx(m,{to:"/agents",replace:!0})};export{kt as default};
