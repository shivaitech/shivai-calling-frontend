import{r,j as e,l as G,e as ee}from"./index-BORJIdJM.js";import{G as X}from"./GlassCard-CbEnyA27.js";import{i as te}from"./utils-Y-nI2RCH.js";import{S as se}from"./index-CRnEVGOM.js";import{M as E}from"./message-square-DoUn8LnI.js";import{X as ae}from"./x-VMc1qPmq.js";import{M as Z}from"./map-pin-FrNseYaN.js";import{C as re}from"./calendar-lqlJNa6d.js";import{C as V}from"./clock-CgcdEOgD.js";import{L as le}from"./loader-2-8msTnhh8.js";import{F as K}from"./file-text-Btig-11E.js";import{U as P}from"./users-C5KiWObR.js";import{B as ne}from"./bot-Xmltws0-.js";import{c as C}from"./createLucideIcon-DwF9F7Q7.js";import{P as oe}from"./pause-7NaMhzVz.js";import{P as ie}from"./play-NxCRCSPg.js";import{D as de}from"./download-CY0pHTDt.js";import{C as ce}from"./chevron-left-BPIYug43.js";import{C as xe}from"./chevron-right-DA-A9Zam.js";import{T as Q}from"./trending-up-Bhg0dEdg.js";import{C as q}from"./chevron-down-BysW-4LA.js";import{S as me}from"./search-CF17Vqyq.js";import{F as he}from"./filter-5xiW1N2z.js";import{P as ue}from"./phone-BSaV1iBq.js";import{E as ge}from"./eye-FfFYwL1n.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=C("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=C("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=C("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=C("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=C("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=C("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),Ne=({session:a,onClose:x})=>{var l;const[f,v]=r.useState([]),[b,N]=r.useState(!0),[w,u]=r.useState(null),[j,k]=r.useState(!1),[o,m]=r.useState(0),[n,_]=r.useState(0),[L,F]=r.useState(1),[y,T]=r.useState(!1),[D,B]=r.useState(1),c=r.useRef(null),S=r.useRef(null);r.useEffect(()=>{(async()=>{if(a!=null&&a.session_id){N(!0),u(null);try{const i=await G.getSessionTranscripts(a.session_id);v(i.transcripts||[])}catch(i){console.error("Failed to fetch transcripts:",i),u(i.message||"Failed to load transcripts")}finally{N(!1)}}})()},[a==null?void 0:a.session_id]);const R=()=>{c.current&&(j?c.current.pause():c.current.play(),k(!j))},U=()=>{c.current&&m(c.current.currentTime)},I=()=>{c.current&&_(c.current.duration)},z=s=>{if(!c.current||!S.current)return;const i=S.current.getBoundingClientRect(),g=(s.clientX-i.left)/i.width*n;c.current.currentTime=g,m(g)},d=()=>{c.current&&(y?(c.current.volume=L,T(!1)):(c.current.volume=0,T(!0)))},A=()=>{const s=[.5,.75,1,1.25,1.5,2],i=s.indexOf(D),h=s[(i+1)%s.length];B(h),c.current&&(c.current.playbackRate=h)},M=s=>{c.current&&(c.current.currentTime=Math.max(0,Math.min(n,c.current.currentTime+s)))},W=()=>{const s=document.createElement("a");s.href="#",s.download=`recording-${a.session_id}.mp3`,s.click()},p=s=>{if(!s||isNaN(s))return"0:00";const i=Math.floor(s/60),h=Math.floor(s%60);return`${i}:${h.toString().padStart(2,"0")}`};if(!a)return null;const O=s=>{if(!s)return"0m 0s";const i=Math.floor(s/60),h=Math.floor(s%60);return`${i}m ${h}s`},$=s=>s?new Date(s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}):"N/A",t=s=>s?new Date(s).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return e.jsx("div",{className:"fixed inset-0 -top-8 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-2 sm:p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl sm:rounded-2xl shadow-2xl w-full max-w-3xl max-h-[95vh] sm:max-h-[90vh] overflow-hidden flex flex-col my-auto",children:[e.jsxs("div",{className:"p-3 sm:p-4 border-b border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 common-bg-icons rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(E,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-600 dark:text-slate-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-lg font-semibold text-slate-800 dark:text-white truncate",children:"Session Transcript"}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:["ID: ",a.session_id||a.id]})]})]}),e.jsx("button",{onClick:x,className:"p-1.5 sm:p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors flex-shrink-0",children:e.jsx(ae,{className:"w-4 h-4 sm:w-5 sm:h-5 text-slate-600 dark:text-slate-400"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[e.jsx(Z,{className:"w-3 h-3 sm:w-4 sm:h-4 text-slate-500 dark:text-slate-400 flex-shrink-0"}),e.jsx("span",{className:"text-slate-600 dark:text-slate-400 truncate",children:((l=a.location)==null?void 0:l.city)||a.user_ip||"unknown"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[e.jsx(re,{className:"w-3 h-3 sm:w-4 sm:h-4 text-slate-500 dark:text-slate-400 flex-shrink-0"}),e.jsx("span",{className:"text-slate-600 dark:text-slate-400 truncate",children:a.start_time?new Date(a.start_time).toLocaleDateString():"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[e.jsx(V,{className:"w-3 h-3 sm:w-4 sm:h-4 text-slate-500 dark:text-slate-400 flex-shrink-0"}),e.jsx("span",{className:"text-slate-600 dark:text-slate-400 truncate",children:O(a.duration_seconds)})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"common-bg-icons p-3 sm:p-4 rounded-lg sm:rounded-xl",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-slate-800 dark:text-white mb-3",children:"Conversation Transcript"}),e.jsx("div",{className:"space-y-1 max-h-[250px] sm:max-h-[400px] overflow-y-auto",children:b?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(le,{className:"w-6 h-6 sm:w-8 sm:h-8 text-blue-500 animate-spin"})}):w?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(K,{className:"w-10 h-10 sm:w-12 sm:h-12 text-red-300 dark:text-red-600 mx-auto mb-3"}),e.jsx("p",{className:"text-xs sm:text-sm text-red-500 dark:text-red-400",children:w})]}):f&&f.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400 mb-2",children:["Conversation started on ",t(a.start_time)]}),f.map((s,i)=>e.jsx("div",{className:"flex flex-col gap-1.5 py-1.5 sm:py-2",children:s.role==="user"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-end mb-1",children:e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["CUSTOMER â€¢ ",$(s.timestamp||s.created_at)]})}),e.jsxs("div",{className:"flex items-start gap-1.5 sm:gap-2 justify-end",children:[e.jsx("div",{className:"max-w-[80%] bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-2xl rounded-tr-sm px-3 py-2 sm:px-4 sm:py-3 shadow-sm",children:e.jsx("p",{className:"text-xs sm:text-sm",children:s.text||s.content})}),e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-gradient-to-br from-slate-600 to-slate-700 flex items-center justify-center flex-shrink-0",children:e.jsx(P,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-white"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-start mb-1",children:e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["AI EMPLOYEE â€¢ ",$(s.timestamp||s.created_at)]})}),e.jsxs("div",{className:"flex items-start gap-1.5 sm:gap-2",children:[e.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center flex-shrink-0",children:e.jsx(ne,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-white"})}),e.jsx("div",{className:"max-w-[80%] common-bg-icons rounded-2xl rounded-tl-sm px-3 py-2 sm:px-4 sm:py-3 border border-slate-200 dark:border-slate-700",children:e.jsx("p",{className:"text-xs sm:text-sm text-slate-800 dark:text-white",children:s.text||s.content})})]})]})},i)),e.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-3 flex items-center gap-1",children:[e.jsx(V,{className:"w-3 h-3"}),"Session ended â€¢ Resolution: Session completed"]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(K,{className:"w-10 h-10 sm:w-12 sm:h-12 text-slate-300 dark:text-slate-600 mx-auto mb-3"}),e.jsx("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400",children:"No transcripts available for this session"})]})})]}),e.jsxs("div",{className:"common-bg-icons p-3 sm:p-4 rounded-lg sm:rounded-xl",children:[e.jsxs("h3",{className:"text-sm sm:text-base font-semibold text-slate-800 dark:text-white mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z"})}),"Call Recording"]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/30 p-4 rounded-xl border border-slate-200 dark:border-slate-700",children:[e.jsx("audio",{ref:c,onTimeUpdate:U,onLoadedMetadata:I,onEnded:()=>k(!1),src:"#"}),e.jsx("div",{ref:S,onClick:z,className:"relative h-1 bg-slate-300 dark:bg-slate-700 rounded-full cursor-pointer mb-2",children:e.jsx("div",{className:"absolute top-0 left-0 h-full bg-blue-600 rounded-full transition-all",style:{width:`${n>0?o/n*100:0}%`}})}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400 w-10",children:p(o)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>M(-10),className:"p-1.5 hover:bg-slate-200 dark:hover:bg-slate-700 rounded transition-colors",title:"Rewind 10s",children:e.jsx(fe,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"})}),e.jsx("button",{onClick:R,className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-full transition-colors",title:j?"Pause":"Play",children:j?e.jsx(oe,{className:"w-4 h-4",fill:"currentColor"}):e.jsx(ie,{className:"w-4 h-4 ml-0.5",fill:"currentColor"})}),e.jsx("button",{onClick:()=>M(10),className:"p-1.5 hover:bg-slate-200 dark:hover:bg-slate-700 rounded transition-colors",title:"Forward 10s",children:e.jsx(je,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"})}),e.jsxs("button",{onClick:A,className:"px-2 py-1 hover:bg-slate-200 dark:hover:bg-slate-700 rounded transition-colors text-xs text-slate-600 dark:text-slate-400",title:"Playback speed",children:[D,"x"]}),e.jsx("button",{onClick:d,className:"p-1.5 hover:bg-slate-200 dark:hover:bg-slate-700 rounded transition-colors",title:y?"Unmute":"Mute",children:y?e.jsx(ve,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"}):e.jsx(ke,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"})}),e.jsx("button",{onClick:W,className:"p-1.5 hover:bg-slate-200 dark:hover:bg-slate-700 rounded transition-colors",title:"Download recording",children:e.jsx(de,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"})})]}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400 w-10 text-right",children:p(n||a.duration_seconds||0)})]})]})]})]})]})})},we=({currentPage:a,totalPages:x,totalItems:f,itemsPerPage:v,onPageChange:b,className:N=""})=>{if(x<=1)return null;const w=(a-1)*v+1,u=Math.min(a*v,f),k=(()=>{const o=[];if(x<=5)for(let n=1;n<=x;n++)o.push(n);else if(o.push(1),a<=3){for(let n=2;n<=4;n++)o.push(n);o.push(-1),o.push(x)}else if(a>=x-2){o.push(-1);for(let n=x-3;n<=x;n++)o.push(n)}else{o.push(-1);for(let n=a-1;n<=a+1;n++)o.push(n);o.push(-1),o.push(x)}return o})();return e.jsxs("div",{className:`flex flex-col sm:flex-row items-center justify-between gap-3 ${N}`,children:[e.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Showing ",e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:w})," to"," ",e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:u})," of"," ",e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:f})," results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>b(1),disabled:a===1,className:`p-2 rounded-lg border transition-colors ${a===1?"border-slate-200 dark:border-slate-700 text-slate-400 dark:text-slate-600 cursor-not-allowed":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,title:"First page",children:e.jsx(pe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>b(a-1),disabled:a===1,className:`p-2 rounded-lg border transition-colors ${a===1?"border-slate-200 dark:border-slate-700 text-slate-400 dark:text-slate-600 cursor-not-allowed":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,title:"Previous page",children:e.jsx(ce,{className:"w-4 h-4"})}),e.jsx("div",{className:"flex items-center gap-1",children:k.map((o,m)=>o===-1?e.jsx("span",{className:"px-2 text-slate-400 dark:text-slate-600",children:"..."},`ellipsis-${m}`):e.jsx("button",{onClick:()=>b(o),className:`min-w-[2rem] h-8 px-3 text-sm rounded-lg border transition-colors ${a===o?"bg-blue-500 border-blue-500 text-white font-medium":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:o},o))}),e.jsx("button",{onClick:()=>b(a+1),disabled:a===x,className:`p-2 rounded-lg border transition-colors ${a===x?"border-slate-200 dark:border-slate-700 text-slate-400 dark:text-slate-600 cursor-not-allowed":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,title:"Next page",children:e.jsx(xe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>b(x),disabled:a===x,className:`p-2 rounded-lg border transition-colors ${a===x?"border-slate-200 dark:border-slate-700 text-slate-400 dark:text-slate-600 cursor-not-allowed":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,title:"Last page",children:e.jsx(be,{className:"w-4 h-4"})})]})]})},Ye=()=>{const{user:a}=ee(),[x,f]=r.useState("all"),[v,b]=r.useState("all"),[N,w]=r.useState(""),[u,j]=r.useState(""),[k,o]=r.useState([]),[m,n]=r.useState([]),[_,L]=r.useState(!1),[F,y]=r.useState(null),[T,D]=r.useState(null),[B,c]=r.useState(1),[S,R]=r.useState(1),[U,I]=r.useState(0),z=10,d=te(a==null?void 0:a.email),A=d?k:[];r.useEffect(()=>{(async()=>{if(d)try{console.log("ðŸš€ Fetching agents...");const l=await G.getAgents();o(l||[]),console.log("âœ… Agents loaded:",l.length),l.length>0&&!u&&(console.log("âœ… Setting default agent:",l[0].id,l[0].name),j(l[0].id))}catch(l){console.error("âŒ Error fetching agents:",l)}})()},[d]);const M=async(t,l=1)=>{if(!t){console.log("âš ï¸ No agent ID provided, skipping fetch");return}L(!0),y(null);try{console.log("ðŸ”„ Fetching sessions for agent:",t,"page:",l);const s=await G.getAgentSessions(t),i=(s==null?void 0:s.sessions)||[],h=(s==null?void 0:s.pagination)||{};n(i),R(h.totalPages||1),I(h.total||i.length),c(h.page||l),console.log("âœ… Session history loaded:",i.length,"sessions"),console.log("ðŸ“Š Pagination:",h)}catch(s){console.error("âŒ Error fetching session history:",s),y(s instanceof Error?s.message:"Failed to load session history"),n([]),R(1),I(0)}finally{L(!1)}};r.useEffect(()=>{console.log("ðŸ“Š Analytics useEffect triggered - isDeveloper:",d,"selectedEmployee:",u),d&&u&&(c(1),M(u,1))},[u,d]);const p=(()=>{if(!d)return{totalSessions:0,performanceScore:0,avgDuration:0,activeAgents:0};const t=m.length>0?m.reduce((s,i)=>s+(i.duration_seconds||0),0)/m.length:0,l=t>0?Math.min(100,Math.round(t/300*100)):0;return{totalSessions:U,performanceScore:l,avgDuration:t,activeAgents:k.length}})(),O=t=>{if(!t)return"0s";const l=Math.floor(t/60),s=Math.floor(t%60);return l>0?`${l}m ${s}s`:`${s}s`},$=d?[{title:"Sessions",subtitle:"Total",value:p.totalSessions.toString(),change:m.length>0?`${m.length} on page`:"No data",trend:"neutral",icon:E,color:"blue"},{title:"Performance",subtitle:"Score",value:`${p.performanceScore}%`,change:p.performanceScore>50?"Good":"Low",trend:p.performanceScore>50?"positive":"neutral",icon:Q,color:"green"},{title:"Duration",subtitle:"Average",value:O(p.avgDuration),change:m.length>0?`${m.length} sessions`:"No data",trend:"neutral",icon:V,color:"purple"},{title:"Agents",subtitle:"Active",value:p.activeAgents.toString(),change:p.activeAgents>0?"Online":"Offline",trend:"neutral",icon:P,color:"orange"}]:[{title:"Sessions",subtitle:"Total",value:"0",change:"No data",trend:"neutral",icon:E,color:"blue"},{title:"Performance",subtitle:"Score",value:"0%",change:"No data",trend:"neutral",icon:Q,color:"green"},{title:"Duration",subtitle:"Average",value:"0s",change:"No data",trend:"neutral",icon:V,color:"purple"},{title:"Demo",subtitle:"All-Time Active",value:"",change:"",trend:"neutral",icon:P,color:"orange"}];return e.jsxs("div",{className:"space-y-4 sm:space-y-6 w-full max-w-full overflow-hidden",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-wrap",children:[e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:u,onChange:t=>j(t.target.value),disabled:!d,className:`text-sm sm:text-base font-semibold px-3 py-1.5 pr-8 rounded-lg border-2 appearance-none cursor-pointer transition-all ${d?"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border-blue-200 dark:border-blue-700 text-slate-800 dark:text-white hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-md":"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 dark:text-gray-500 cursor-not-allowed"} focus:outline-none focus:ring-2 focus:ring-blue-500/20`,children:A.map(t=>e.jsx("option",{value:t.id,className:"bg-white dark:bg-slate-800 text-slate-800 dark:text-white",children:t.name},t.id))}),e.jsx(q,{className:`absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 pointer-events-none transition-colors ${d?"text-blue-600 dark:text-blue-400":"text-gray-400"}`})]}),d&&A.length>1&&e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400 italic",children:["(",A.length," more agents)"]})]})}),e.jsxs("div",{className:"stats-section",children:[e.jsx("div",{className:"block sm:hidden",children:e.jsx(se,{dots:!0,infinite:!1,speed:300,slidesToShow:2.2,slidesToScroll:1,swipeToSlide:!0,touchThreshold:10,arrows:!1,className:"mobile-stats-slider",customPaging:()=>e.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded-full hover:bg-gray-600 transition-colors duration-200"}),dotsClass:"slick-dots !bottom-[-20px] !flex !justify-center !gap-2",children:$.map((t,l)=>e.jsx("div",{className:"px-1",children:e.jsx(X,{hover:!0,children:e.jsxs("div",{className:"p-3 min-h-[90px]",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[e.jsx("div",{className:"p-1 rounded-lg common-bg-icons",children:e.jsx(t.icon,{className:`w-3.5 h-3.5 ${t.color==="blue"?"text-blue-600 dark:text-blue-400":t.color==="green"?"text-green-600 dark:text-green-400":t.color==="purple"?"text-purple-600 dark:text-purple-400":"text-orange-600 dark:text-orange-400"}`})}),t.change&&e.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:t.change})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-slate-800 dark:text-white mb-0.5",children:t.value}),e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 leading-tight",children:t.title}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 leading-tight",children:t.subtitle})]})]})})},l))})}),e.jsx("div",{className:"hidden sm:grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:$.map((t,l)=>e.jsx(X,{hover:!0,children:e.jsxs("div",{className:"p-4 sm:p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"p-2 rounded-lg common-bg-icons",children:e.jsx(t.icon,{className:`w-4 sm:w-5 h-4 sm:h-5 ${t.color==="blue"?"text-blue-600 dark:text-blue-400":t.color==="green"?"text-green-600 dark:text-green-400":t.color==="purple"?"text-purple-600 dark:text-purple-400":"text-orange-600 dark:text-orange-400"}`})}),t.change&&e.jsx("span",{className:"text-xs sm:text-sm text-green-600 dark:text-green-400",children:t.change})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl sm:text-2xl font-bold text-slate-800 dark:text-white mb-1",children:t.value}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:t.title}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:t.subtitle})]})]})},l))})]}),e.jsx(X,{children:e.jsxs("div",{className:"p-3 sm:p-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4",children:e.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-slate-800 dark:text-white",children:["Session History (",m.length," sessions)"]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-3 mb-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search sessions...",value:N,onChange:t=>w(t.target.value),disabled:!d,className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 text-sm touch-manipulation ${d?"bg-slate-100 dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-800 dark:text-white":"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 cursor-not-allowed"}`})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:v,onChange:t=>b(t.target.value),disabled:!d,className:`px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 text-sm appearance-none pr-8 touch-manipulation ${d?"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-800 dark:text-white":"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"all",children:"All Devices"}),e.jsx("option",{value:"mobile",children:"Mobile"}),e.jsx("option",{value:"desktop",children:"Desktop"}),e.jsx("option",{value:"unknown",children:"Unknown"})]}),e.jsx(q,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:x,onChange:t=>f(t.target.value),disabled:!d,className:`px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/20 text-sm appearance-none pr-8 touch-manipulation ${d?"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 text-slate-800 dark:text-white":"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-400 cursor-not-allowed"}`,children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"})]}),e.jsx(q,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]}),e.jsx("button",{disabled:!d,className:`p-2 border rounded-lg transition-colors ${d?"border-slate-200 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-700":"border-gray-300 dark:border-gray-600 bg-gray-100 dark:bg-gray-800 cursor-not-allowed opacity-50"}`,children:e.jsx(he,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"})})]})]}),e.jsx("div",{className:"space-y-3",children:_?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):F?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(E,{className:"w-12 h-12 text-red-400 mx-auto mb-3"}),e.jsx("p",{className:"text-base text-red-600 dark:text-red-400 mb-1",children:"Error loading sessions"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500",children:F})]}):m.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(E,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),e.jsx("p",{className:"text-base text-slate-600 dark:text-slate-400 mb-1",children:"No sessions yet"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500",children:"Session history will appear here once agents start handling calls"})]}):m.map(t=>{var h,H;const l=g=>{if(!g)return"0s";const Y=Math.floor(g/60),J=Math.floor(g%60);return Y>0?`${Y}m ${J}s`:`${J}s`},s=g=>g?new Date(g).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"N/A",i=g=>g?new Date(g).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"2-digit"}):"N/A";return e.jsx("div",{className:"p-3 sm:p-4 bg-slate-50/50 dark:bg-slate-800/30 rounded-lg border border-slate-200/50 dark:border-slate-700/50 hover:border-slate-300 dark:hover:border-slate-600 transition-colors",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-3",children:e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"w-4 h-4 text-blue-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-mono text-blue-600 dark:text-blue-400",children:t.session_id||"N/A"}),e.jsx(ge,{className:"w-4 h-4 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 cursor-pointer flex-shrink-0 ml-auto sm:ml-0",onClick:()=>D(t)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-400",children:[((h=t.agent)==null?void 0:h.name)&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:t.agent.name}),e.jsx("span",{children:"â€¢"})]}),e.jsx("span",{children:t.user_ip||"Unknown IP"})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:e.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400 rounded-full text-xs font-medium",children:t.status||"Completed"})}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-0.5",children:"Duration"}),e.jsx("p",{className:"text-slate-800 dark:text-white font-medium",children:l(t.duration_seconds)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-0.5",children:"Session Time"}),e.jsx("p",{className:"text-slate-800 dark:text-white font-medium",children:s(t.start_time)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-0.5",children:"Date"}),e.jsx("p",{className:"text-slate-800 dark:text-white font-medium",children:i(t.start_time)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-0.5",children:"Total Messages"}),e.jsx("p",{className:"text-slate-800 dark:text-white font-medium",children:t.total_messages||0})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-slate-600 dark:text-slate-400",children:[e.jsx(Z,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:((H=t.location)==null?void 0:H.city)||t.user_ip||"Unknown"})]})]})})},t.session_id||t.id)})}),!_&&!F&&S>1&&e.jsx(we,{currentPage:B,totalPages:S,totalItems:U,itemsPerPage:z,onPageChange:t=>M(u,t),className:"mt-6 pt-4 border-t border-slate-200 dark:border-slate-700"})]})}),T&&e.jsx(Ne,{session:T,onClose:()=>D(null)})]})};export{Ye as default};
